<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 데이터 랭글링 | R 프로그래밍</title>
  <meta name="description" content="Chapter 6 데이터 랭글링 | R 프로그래밍" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 데이터 랭글링 | R 프로그래밍" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 데이터 랭글링 | R 프로그래밍" />
  
  
  

<meta name="author" content="Park Sejin" />


<meta name="date" content="2025-03-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyverse-통합-패키지.html"/>
<link rel="next" href="데이터-시각화.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">R 프로그래밍</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>강의 소개</a></li>
<li class="chapter" data-level="1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html"><i class="fa fa-check"></i><b>1</b> 데이터 분석과 R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터의-이해"><i class="fa fa-check"></i><b>1.1</b> 데이터의 이해</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터의-시대"><i class="fa fa-check"></i><b>1.1.1</b> 데이터의 시대</a></li>
<li class="chapter" data-level="1.1.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터-과학"><i class="fa fa-check"></i><b>1.1.2</b> 데이터 과학</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-및-r-studio-설치"><i class="fa fa-check"></i><b>1.2</b> R 및 R Studio 설치</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r"><i class="fa fa-check"></i><b>1.2.1</b> R</a></li>
<li class="chapter" data-level="1.2.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-studio"><i class="fa fa-check"></i><b>1.2.2</b> R Studio</a></li>
<li class="chapter" data-level="1.2.3" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#프로그램-설치"><i class="fa fa-check"></i><b>1.2.3</b> 프로그램 설치</a></li>
<li class="chapter" data-level="1.2.4" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-studio-화면-구성"><i class="fa fa-check"></i><b>1.2.4</b> R Studio 화면 구성</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-기초.html"><a href="r-기초.html"><i class="fa fa-check"></i><b>2</b> R 기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-기초.html"><a href="r-기초.html#산술연산"><i class="fa fa-check"></i><b>2.1</b> 산술연산</a></li>
<li class="chapter" data-level="2.2" data-path="r-기초.html"><a href="r-기초.html#산술연산-함수"><i class="fa fa-check"></i><b>2.2</b> 산술연산 함수</a></li>
<li class="chapter" data-level="2.3" data-path="r-기초.html"><a href="r-기초.html#주석comment"><i class="fa fa-check"></i><b>2.3</b> 주석(comment)</a></li>
<li class="chapter" data-level="2.4" data-path="r-기초.html"><a href="r-기초.html#자료형data-type"><i class="fa fa-check"></i><b>2.4</b> 자료형(data type)</a></li>
<li class="chapter" data-level="2.5" data-path="r-기초.html"><a href="r-기초.html#비교연산"><i class="fa fa-check"></i><b>2.5</b> 비교연산</a></li>
<li class="chapter" data-level="2.6" data-path="r-기초.html"><a href="r-기초.html#논리연산"><i class="fa fa-check"></i><b>2.6</b> 논리연산</a></li>
<li class="chapter" data-level="2.7" data-path="r-기초.html"><a href="r-기초.html#함수function"><i class="fa fa-check"></i><b>2.7</b> 함수(function)</a></li>
<li class="chapter" data-level="2.8" data-path="r-기초.html"><a href="r-기초.html#변수variable"><i class="fa fa-check"></i><b>2.8</b> 변수(variable)</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="r-기초.html"><a href="r-기초.html#변수-값-할당"><i class="fa fa-check"></i><b>2.8.1</b> 변수 값 할당</a></li>
<li class="chapter" data-level="2.8.2" data-path="r-기초.html"><a href="r-기초.html#변수-값-변경"><i class="fa fa-check"></i><b>2.8.2</b> 변수 값 변경</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html"><i class="fa fa-check"></i><b>3</b> 데이터와 자료구조</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터-이해"><i class="fa fa-check"></i><b>3.1</b> 데이터 이해</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#형태에-따른-분류"><i class="fa fa-check"></i><b>3.1.1</b> 형태에 따른 분류</a></li>
<li class="chapter" data-level="3.1.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터-구조화"><i class="fa fa-check"></i><b>3.1.2</b> 데이터 구조화</a></li>
<li class="chapter" data-level="3.1.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#테이블table"><i class="fa fa-check"></i><b>3.1.3</b> 테이블(table)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#자료구조data-structure"><i class="fa fa-check"></i><b>3.2</b> 자료구조(data structure)</a></li>
<li class="chapter" data-level="3.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터vector"><i class="fa fa-check"></i><b>3.3</b> 벡터(vector)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-생성"><i class="fa fa-check"></i><b>3.3.1</b> 벡터 생성</a></li>
<li class="chapter" data-level="3.3.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-인덱싱"><i class="fa fa-check"></i><b>3.3.2</b> 벡터 인덱싱</a></li>
<li class="chapter" data-level="3.3.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-산술연산"><i class="fa fa-check"></i><b>3.3.3</b> 벡터 산술연산</a></li>
<li class="chapter" data-level="3.3.4" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-비교연산"><i class="fa fa-check"></i><b>3.3.4</b> 벡터 비교연산</a></li>
<li class="chapter" data-level="3.3.5" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#팩터factor"><i class="fa fa-check"></i><b>3.3.5</b> 팩터(factor)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬matrix과-배열array"><i class="fa fa-check"></i><b>3.4</b> 행렬(matrix)과 배열(array)</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-생성"><i class="fa fa-check"></i><b>3.4.1</b> 행렬 생성</a></li>
<li class="chapter" data-level="3.4.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-인덱싱"><i class="fa fa-check"></i><b>3.4.2</b> 행렬 인덱싱</a></li>
<li class="chapter" data-level="3.4.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-산술연산"><i class="fa fa-check"></i><b>3.4.3</b> 행렬 산술연산</a></li>
<li class="chapter" data-level="3.4.4" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-곱셈"><i class="fa fa-check"></i><b>3.4.4</b> 행렬 곱셈</a></li>
<li class="chapter" data-level="3.4.5" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#특수행렬"><i class="fa fa-check"></i><b>3.4.5</b> 특수행렬</a></li>
<li class="chapter" data-level="3.4.6" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-결합"><i class="fa fa-check"></i><b>3.4.6</b> 행렬 결합</a></li>
<li class="chapter" data-level="3.4.7" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#배열-생성"><i class="fa fa-check"></i><b>3.4.7</b> 배열 생성</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#리스트list"><i class="fa fa-check"></i><b>3.5</b> 리스트(list)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#리스트-생성"><i class="fa fa-check"></i><b>3.5.1</b> 리스트 생성</a></li>
<li class="chapter" data-level="3.5.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#리스트-인덱싱"><i class="fa fa-check"></i><b>3.5.2</b> 리스트 인덱싱</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터프레임data-frame"><i class="fa fa-check"></i><b>3.6</b> 데이터프레임(data frame)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터프레임-생성"><i class="fa fa-check"></i><b>3.6.1</b> 데이터프레임 생성</a></li>
<li class="chapter" data-level="3.6.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터프레임-인덱싱"><i class="fa fa-check"></i><b>3.6.2</b> 데이터프레임 인덱싱</a></li>
<li class="chapter" data-level="3.6.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터프레임-요약-함수"><i class="fa fa-check"></i><b>3.6.3</b> 데이터프레임 요약 함수</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html"><i class="fa fa-check"></i><b>4</b> 프로그래밍 구조</a>
<ul>
<li class="chapter" data-level="4.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#프로그래밍programming"><i class="fa fa-check"></i><b>4.1</b> 프로그래밍(programming)</a></li>
<li class="chapter" data-level="4.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#조건문conditional-statement"><i class="fa fa-check"></i><b>4.2</b> 조건문(conditional statement)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#if-문"><i class="fa fa-check"></i><b>4.2.1</b> if 문</a></li>
<li class="chapter" data-level="4.2.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#if-else-문"><i class="fa fa-check"></i><b>4.2.2</b> if-else 문</a></li>
<li class="chapter" data-level="4.2.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#ifelse-함수"><i class="fa fa-check"></i><b>4.2.3</b> ifelse() 함수</a></li>
<li class="chapter" data-level="4.2.4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#else-if-문"><i class="fa fa-check"></i><b>4.2.4</b> else if 문</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#반복문repetitive-statement"><i class="fa fa-check"></i><b>4.3</b> 반복문(repetitive statement)</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#for-문"><i class="fa fa-check"></i><b>4.3.1</b> for 문</a></li>
<li class="chapter" data-level="4.3.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#while-문"><i class="fa fa-check"></i><b>4.3.2</b> while 문</a></li>
<li class="chapter" data-level="4.3.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#break-문와-next-문"><i class="fa fa-check"></i><b>4.3.3</b> break 문와 next 문</a></li>
<li class="chapter" data-level="4.3.4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#apply-계열-함수"><i class="fa fa-check"></i><b>4.3.4</b> apply 계열 함수</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#사용자-정의-함수"><i class="fa fa-check"></i><b>4.4</b> 사용자 정의 함수</a></li>
<li class="chapter" data-level="4.5" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#r-패키지r-package"><i class="fa fa-check"></i><b>4.5</b> R 패키지(R package)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html"><i class="fa fa-check"></i><b>5</b> tidyverse 통합 패키지</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tidyverse-이해"><i class="fa fa-check"></i><b>5.1</b> tidyverse 이해</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tidyverse-작업-흐름"><i class="fa fa-check"></i><b>5.2</b> tidyverse 작업 흐름</a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#타이디-데이터tidy-data"><i class="fa fa-check"></i><b>5.3</b> 타이디 데이터(tidy data)</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#파이프pipe-연산자"><i class="fa fa-check"></i><b>5.4</b> 파이프(pipe) 연산자</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble-패키지"><i class="fa fa-check"></i><b>5.5</b> tibble 패키지</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble"><i class="fa fa-check"></i><b>5.5.1</b> tibble</a></li>
<li class="chapter" data-level="5.5.2" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble-이해"><i class="fa fa-check"></i><b>5.5.2</b> tibble 이해</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html"><i class="fa fa-check"></i><b>6</b> 데이터 랭글링</a>
<ul>
<li class="chapter" data-level="6.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#readr-패키지"><i class="fa fa-check"></i><b>6.1</b> readr 패키지</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#readr-패키지-소개"><i class="fa fa-check"></i><b>6.1.1</b> readr 패키지 소개</a></li>
<li class="chapter" data-level="6.1.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#read_csv-함수"><i class="fa fa-check"></i><b>6.1.2</b> read_csv() 함수</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#dplyr-패키지"><i class="fa fa-check"></i><b>6.2</b> dplyr 패키지</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#dplyr-패키지-소개"><i class="fa fa-check"></i><b>6.2.1</b> dplyr 패키지 소개</a></li>
<li class="chapter" data-level="6.2.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#행-관련-함수"><i class="fa fa-check"></i><b>6.2.2</b> 행 관련 함수</a></li>
<li class="chapter" data-level="6.2.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#열-관련-함수"><i class="fa fa-check"></i><b>6.2.3</b> 열 관련 함수</a></li>
<li class="chapter" data-level="6.2.4" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#집단-관련-함수"><i class="fa fa-check"></i><b>6.2.4</b> 집단 관련 함수</a></li>
<li class="chapter" data-level="6.2.5" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#관계형-데이터"><i class="fa fa-check"></i><b>6.2.5</b> 관계형 데이터</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#tidyr-패키지"><i class="fa fa-check"></i><b>6.3</b> tidyr 패키지</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#wide-format과-long-format"><i class="fa fa-check"></i><b>6.3.1</b> wide format과 long format</a></li>
<li class="chapter" data-level="6.3.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#long-format으로-변환"><i class="fa fa-check"></i><b>6.3.2</b> long format으로 변환</a></li>
<li class="chapter" data-level="6.3.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#wide-format으로-변환"><i class="fa fa-check"></i><b>6.3.3</b> wide format으로 변환</a></li>
<li class="chapter" data-level="6.3.4" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#열의-분리-및-결합"><i class="fa fa-check"></i><b>6.3.4</b> 열의 분리 및 결합</a></li>
<li class="chapter" data-level="6.3.5" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#결측값missing-value-처리"><i class="fa fa-check"></i><b>6.3.5</b> 결측값(missing value) 처리</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#stringr-패키지"><i class="fa fa-check"></i><b>6.4</b> stringr 패키지</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#stringr-패키지-소개"><i class="fa fa-check"></i><b>6.4.1</b> stringr 패키지 소개</a></li>
<li class="chapter" data-level="6.4.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#문자열-기초"><i class="fa fa-check"></i><b>6.4.2</b> 문자열 기초</a></li>
<li class="chapter" data-level="6.4.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#데이터에서-문자열-생성"><i class="fa fa-check"></i><b>6.4.3</b> 데이터에서 문자열 생성</a></li>
<li class="chapter" data-level="6.4.4" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#정규-표현식을-이용한-패턴-매칭"><i class="fa fa-check"></i><b>6.4.4</b> 정규 표현식을 이용한 패턴 매칭</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#forcats-패키지"><i class="fa fa-check"></i><b>6.5</b> forcats 패키지</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#forcats-패키지-소개"><i class="fa fa-check"></i><b>6.5.1</b> forcats 패키지 소개</a></li>
<li class="chapter" data-level="6.5.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#팩터-수준levels-재정렬"><i class="fa fa-check"></i><b>6.5.2</b> 팩터 수준(levels) 재정렬</a></li>
<li class="chapter" data-level="6.5.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#팩터-수준levels-변경"><i class="fa fa-check"></i><b>6.5.3</b> 팩터 수준(levels) 변경</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#lubridate-패키지"><i class="fa fa-check"></i><b>6.6</b> lubridate 패키지</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#lubridate-패키지-소개"><i class="fa fa-check"></i><b>6.6.1</b> lubridate 패키지 소개</a></li>
<li class="chapter" data-level="6.6.2" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#날짜시간-생성"><i class="fa fa-check"></i><b>6.6.2</b> 날짜/시간 생성</a></li>
<li class="chapter" data-level="6.6.3" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#날짜시간-구성요소"><i class="fa fa-check"></i><b>6.6.3</b> 날짜/시간 구성요소</a></li>
<li class="chapter" data-level="6.6.4" data-path="데이터-랭글링.html"><a href="데이터-랭글링.html#시간-범위time-spans"><i class="fa fa-check"></i><b>6.6.4</b> 시간 범위(time spans)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="데이터-시각화.html"><a href="데이터-시각화.html"><i class="fa fa-check"></i><b>7</b> 데이터 시각화</a>
<ul>
<li class="chapter" data-level="7.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-시각화-이해"><i class="fa fa-check"></i><b>7.1</b> 데이터 시각화 이해</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-시각화data-visualization"><i class="fa fa-check"></i><b>7.1.1</b> 데이터 시각화(data visualization)</a></li>
<li class="chapter" data-level="7.1.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-유형에-따른-시각화-방법"><i class="fa fa-check"></i><b>7.1.2</b> 데이터 유형에 따른 시각화 방법</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#r-base-graphics"><i class="fa fa-check"></i><b>7.2</b> R base graphics</a></li>
<li class="chapter" data-level="7.3" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-패키지"><i class="fa fa-check"></i><b>7.3</b> ggplot2 패키지</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-패키지-소개"><i class="fa fa-check"></i><b>7.3.1</b> ggplot2 패키지 소개</a></li>
<li class="chapter" data-level="7.3.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-기본-구조"><i class="fa fa-check"></i><b>7.3.2</b> ggplot2 기본 구조</a></li>
<li class="chapter" data-level="7.3.3" data-path="데이터-시각화.html"><a href="데이터-시각화.html#막대-그래프bar-chart"><i class="fa fa-check"></i><b>7.3.3</b> 막대 그래프(bar chart)</a></li>
<li class="chapter" data-level="7.3.4" data-path="데이터-시각화.html"><a href="데이터-시각화.html#히스토그램histogram"><i class="fa fa-check"></i><b>7.3.4</b> 히스토그램(histogram)</a></li>
<li class="chapter" data-level="7.3.5" data-path="데이터-시각화.html"><a href="데이터-시각화.html#상자-그림box-plot"><i class="fa fa-check"></i><b>7.3.5</b> 상자 그림(box plot)</a></li>
<li class="chapter" data-level="7.3.6" data-path="데이터-시각화.html"><a href="데이터-시각화.html#산점도scatter-plot"><i class="fa fa-check"></i><b>7.3.6</b> 산점도(scatter plot)</a></li>
<li class="chapter" data-level="7.3.7" data-path="데이터-시각화.html"><a href="데이터-시각화.html#선-그래프line-plot"><i class="fa fa-check"></i><b>7.3.7</b> 선 그래프(line plot)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-이해"><i class="fa fa-check"></i><b>8.1</b> R Markdown 이해</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="r-markdown.html"><a href="r-markdown.html#markdown과-r-markdown"><i class="fa fa-check"></i><b>8.1.1</b> Markdown과 R Markdown</a></li>
<li class="chapter" data-level="8.1.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-시작하기"><i class="fa fa-check"></i><b>8.1.2</b> R Markdown 시작하기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#yaml-헤더"><i class="fa fa-check"></i><b>8.2</b> YAML 헤더</a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#markdown-문법"><i class="fa fa-check"></i><b>8.3</b> Markdown 문법</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="r-markdown.html"><a href="r-markdown.html#인라인-서식inline-formatting"><i class="fa fa-check"></i><b>8.3.1</b> 인라인 서식(inline formatting)</a></li>
<li class="chapter" data-level="8.3.2" data-path="r-markdown.html"><a href="r-markdown.html#블록-요소block-level-elements"><i class="fa fa-check"></i><b>8.3.2</b> 블록 요소(block-level elements)</a></li>
<li class="chapter" data-level="8.3.3" data-path="r-markdown.html"><a href="r-markdown.html#수학-표현식math-expressions"><i class="fa fa-check"></i><b>8.3.3</b> 수학 표현식(math expressions)</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#r-코드-청크code-chunk"><i class="fa fa-check"></i><b>8.4</b> R 코드 청크(code chunk)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="r-markdown.html"><a href="r-markdown.html#r-코드-청크-이해"><i class="fa fa-check"></i><b>8.4.1</b> R 코드 청크 이해</a></li>
<li class="chapter" data-level="8.4.2" data-path="r-markdown.html"><a href="r-markdown.html#청크-이름chunk-name"><i class="fa fa-check"></i><b>8.4.2</b> 청크 이름(chunk name)</a></li>
<li class="chapter" data-level="8.4.3" data-path="r-markdown.html"><a href="r-markdown.html#청크-옵션chunk-options"><i class="fa fa-check"></i><b>8.4.3</b> 청크 옵션(chunk options)</a></li>
<li class="chapter" data-level="8.4.4" data-path="r-markdown.html"><a href="r-markdown.html#표table-삽입"><i class="fa fa-check"></i><b>8.4.4</b> 표(table) 삽입</a></li>
<li class="chapter" data-level="8.4.5" data-path="r-markdown.html"><a href="r-markdown.html#전역-옵션global-option"><i class="fa fa-check"></i><b>8.4.5</b> 전역 옵션(global option)</a></li>
<li class="chapter" data-level="8.4.6" data-path="r-markdown.html"><a href="r-markdown.html#인라인-코드inline-code"><i class="fa fa-check"></i><b>8.4.6</b> 인라인 코드(inline code)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="데이터-랭글링" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> 데이터 랭글링<a href="데이터-랭글링.html#데이터-랭글링" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="readr-패키지" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> readr 패키지<a href="데이터-랭글링.html#readr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="readr-패키지-소개" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> readr 패키지 소개<a href="데이터-랭글링.html#readr-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>tibble</strong>로 외부 파일을 불러오거나 저장하는 함수를 제공하는 패키지</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">read_csv()</td>
<td align="left">쉼표로 구분된 파일 불러오기</td>
</tr>
<tr class="even">
<td align="center">read_tsv()</td>
<td align="left">탭으로 구분된 파일 불러오기</td>
</tr>
<tr class="odd">
<td align="center">read_delim()</td>
<td align="left">임의의 구분자로 구분된 파일 불러오기</td>
</tr>
<tr class="even">
<td align="center">read_table()</td>
<td align="left">공백으로 구분된 파일 불러오기</td>
</tr>
<tr class="odd">
<td align="center">read_spss()</td>
<td align="left">spss 데이터 파일 불러오기(haven 패키지)</td>
</tr>
<tr class="even">
<td align="center">read_sas()</td>
<td align="left">sas 데이터 파일 불러오기(haven 패키지)</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="read_csv-함수" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> read_csv() 함수<a href="데이터-랭글링.html#read_csv-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>read.csv()</code> 함수에 비해 약 10배 정도 빠르며, 좀 더 재현성이 뛰어남</li>
<li>첫 번째 행은 변수 이름(header)으로 사용</li>
<li>매개변수 <code>col_names</code> - 변수명(header)이 없는 경우 사용
<ul>
<li><code>col_names = FALSE</code> - 변수명을 X1부터 Xn까지 순차적으로 붙여줌</li>
<li><code>col_names = c("x", "y", "z")</code>와 같이 변수명으로 사용할 문자형 벡터를 입력 가능</li>
</ul></li>
<li>매개변수 <code>skip</code> - 파일의 첫 n행 생략</li>
<li>매개변수 <code>na</code> - 특정 값을 결측값으로 지정</li>
<li>예제 - <a href="./dataset/StudentSurvey.csv">StudentSurvey.csv</a></li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="데이터-랭글링.html#cb72-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb72-2"><a href="데이터-랭글링.html#cb72-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;StudentSurvey.csv&quot;</span>)</span>
<span id="cb72-3"><a href="데이터-랭글링.html#cb72-3" tabindex="-1"></a>data</span></code></pre></div>
<p><br></p>
<hr />
</div>
</div>
<div id="dplyr-패키지" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> dplyr 패키지<a href="데이터-랭글링.html#dplyr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="dplyr-패키지-소개" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> dplyr 패키지 소개<a href="데이터-랭글링.html#dplyr-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>데이터 가공, 탐색적 자료분석 등에 매우 유용하고 편리한 함수를 제공하는 패키지</li>
<li>적용 대상에 따른 dplyr 함수
<ul>
<li><strong>행</strong>: filter(), arrange()</li>
<li><strong>열</strong>: select(), mutate(), rename(), relocate()</li>
<li><strong>집단</strong>: summarise(), group_by()</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>[예제] 2013년 뉴욕시 출발 항공편 데이터셋 flights</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">변수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">year</td>
<td align="left">출발 연도</td>
</tr>
<tr class="even">
<td align="center">month</td>
<td align="left">출발 월</td>
</tr>
<tr class="odd">
<td align="center">day</td>
<td align="left">출발 일</td>
</tr>
<tr class="even">
<td align="center">dep_time</td>
<td align="left">실제 출발 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="odd">
<td align="center">arr_time</td>
<td align="left">실제 도착 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="even">
<td align="center">sched_dep_time</td>
<td align="left">예정된 출발 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="odd">
<td align="center">sched_arr_time</td>
<td align="left">예정된 도착 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="even">
<td align="center">dep_delay</td>
<td align="left">출발 지연 시간(분)</td>
</tr>
<tr class="odd">
<td align="center">arr_delay</td>
<td align="left">도착 지연 시간(분)</td>
</tr>
<tr class="even">
<td align="center">carrier</td>
<td align="left">항공사 약어</td>
</tr>
<tr class="odd">
<td align="center">flight</td>
<td align="left">항공편 번호</td>
</tr>
<tr class="even">
<td align="center">tailnum</td>
<td align="left">비행기 식별 번호</td>
</tr>
<tr class="odd">
<td align="center">origin</td>
<td align="left">출발지</td>
</tr>
<tr class="even">
<td align="center">dest</td>
<td align="left">목적지</td>
</tr>
<tr class="odd">
<td align="center">air_time</td>
<td align="left">비행 시간(분)</td>
</tr>
<tr class="even">
<td align="center">distance</td>
<td align="left">비행 거리(miles)</td>
</tr>
<tr class="odd">
<td align="center">hour</td>
<td align="left">예정된 출발 시간; 시</td>
</tr>
<tr class="even">
<td align="center">minute</td>
<td align="left">예정된 출발 시간; 분</td>
</tr>
<tr class="odd">
<td align="center">time_hour</td>
<td align="left">예정된 비행 날짜 및 시간(POSIXct date)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="데이터-랭글링.html#cb73-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb73-2"><a href="데이터-랭글링.html#cb73-2" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb73-3"><a href="데이터-랭글링.html#cb73-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> glimpse</span></code></pre></div>
<p><br></p>
</div>
<div id="행-관련-함수" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> 행 관련 함수<a href="데이터-랭글링.html#행-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="filter-함수" class="section level4 hasAnchor" number="6.2.2.1">
<h4><span class="header-section-number">6.2.2.1</span> filter() 함수<a href="데이터-랭글링.html#filter-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>조건에 맞는 행 추출</li>
<li><code>%in%</code> 연산자 - 벡터의 원소가 다른 벡터에 포함되어 있는지 확인</li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="데이터-랭글링.html#cb74-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)                  <span class="co"># 120분 이상 연착한 항공편</span></span>
<span id="cb74-2"><a href="데이터-랭글링.html#cb74-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> day <span class="sc">==</span> <span class="dv">1</span>)             <span class="co"># 1월 1일에 출발한 항공편</span></span>
<span id="cb74-3"><a href="데이터-랭글링.html#cb74-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)              <span class="co"># 여러 인자는 and로 결합됨</span></span>
<span id="cb74-4"><a href="데이터-랭글링.html#cb74-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>))               <span class="co"># 3,5,8월에 출발한 항공편</span></span></code></pre></div>
<p><br></p>
</div>
<div id="arrange-함수" class="section level4 hasAnchor" number="6.2.2.2">
<h4><span class="header-section-number">6.2.2.2</span> arrange() 함수<a href="데이터-랭글링.html#arrange-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수를 기준으로 행 정렬, 기본값(default)은 오름차순
<ul>
<li>결측값(NA)은 항상 마지막에 정렬됨</li>
</ul></li>
<li>정렬 기준 변수가 여러 개인 경우 순차적으로 적용</li>
<li><code>desc()</code> 함수 - 내림차순 정렬</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="데이터-랭글링.html#cb75-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(year, month, day, dep_time)</span>
<span id="cb75-2"><a href="데이터-랭글링.html#cb75-2" tabindex="-1"></a>filghts <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))                  <span class="co"># 출발 지연 시간이 가장 긴 항공편 확인</span></span>
<span id="cb75-3"><a href="데이터-랭글링.html#cb75-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="데이터-랭글링.html#cb75-4" tabindex="-1"></a>  <span class="fu">filter</span>(dep_delay <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> dep_dalay <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">10</span>) <span class="sc">%&gt;%</span>      <span class="co"># 대체로 정시에 출발한 항공편 중에서 </span></span>
<span id="cb75-5"><a href="데이터-랭글링.html#cb75-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(arr_delay))                            <span class="co"># 도착 지연 시간이 가장 긴 항공편 확인</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="열-관련-함수" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> 열 관련 함수<a href="데이터-랭글링.html#열-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="select-함수" class="section level4 hasAnchor" number="6.2.3.1">
<h4><span class="header-section-number">6.2.3.1</span> select() 함수<a href="데이터-랭글링.html#select-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수 추출</li>
<li>추출한 변수 이름을 바꿀 수 있음</li>
<li>도우미(helpers) 함수</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">starts_with()</td>
<td align="left">특정 문자열로 시작하는 이름 매칭</td>
</tr>
<tr class="even">
<td align="center">ends_with()</td>
<td align="left">특정 문자열로 끝나는 이름 매칭</td>
</tr>
<tr class="odd">
<td align="center">contains()</td>
<td align="left">특정 문자열을 포함하는 이름 매칭</td>
</tr>
<tr class="even">
<td align="center">num_range(prefix, range)</td>
<td align="left">숫자 접미사를 가지는 일련의 이름 매칭</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="데이터-랭글링.html#cb76-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year, month, day)                  <span class="co"># 출발 연월일 변수 추출</span></span>
<span id="cb76-2"><a href="데이터-랭글링.html#cb76-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>day)</span>
<span id="cb76-3"><a href="데이터-랭글링.html#cb76-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(year<span class="sc">:</span>day))                       <span class="co"># 출발 연월일 변수 제외</span></span>
<span id="cb76-4"><a href="데이터-랭글링.html#cb76-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb76-5"><a href="데이터-랭글링.html#cb76-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">dep.time =</span> dep_time, <span class="at">arr.time =</span> arr_time)    <span class="co"># 변수 이름 변경</span></span>
<span id="cb76-6"><a href="데이터-랭글링.html#cb76-6" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;sched&quot;</span>))              <span class="co"># 변수 이름이 &quot;sched&quot;로 시작하는 경우</span></span>
<span id="cb76-7"><a href="데이터-랭글링.html#cb76-7" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;time&quot;</span>))                 <span class="co"># 변수 이름이 &quot;time&quot;으로 끝나는 경우</span></span>
<span id="cb76-8"><a href="데이터-랭글링.html#cb76-8" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;arr&quot;</span>))                   <span class="co"># 변수 이름이 &quot;arr&quot;를 포함하는 경우</span></span></code></pre></div>
<p><br></p>
</div>
<div id="mutate-함수" class="section level4 hasAnchor" number="6.2.3.2">
<h4><span class="header-section-number">6.2.3.2</span> mutate() 함수<a href="데이터-랭글링.html#mutate-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>데이터셋에 존재하는 변수로부터 새로운 변수 생성</li>
<li>새로운 변수는 항상 데이터셋 마지막 열에 추가됨
<ul>
<li>매개변수 <code>.before</code> - 새로운 변수를 특정 위치 앞에 추가</li>
<li>매개변수 <code>.after</code> - 새로운 변수를 특정 위치 뒤에 추가</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="데이터-랭글링.html#cb77-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gain =</span> dep_delay <span class="sc">-</span> arr_delay)                      <span class="co"># 출발 지연 - 도착 지연(분)</span></span>
<span id="cb77-2"><a href="데이터-랭글링.html#cb77-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">speed =</span> distance <span class="sc">/</span> (air_time<span class="sc">/</span><span class="dv">60</span>), <span class="at">.before =</span> <span class="dv">1</span>)     <span class="co"># 첫번째 변수 앞에 추가</span></span>
<span id="cb77-3"><a href="데이터-랭글링.html#cb77-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">hour =</span> air_time <span class="sc">/</span> <span class="dv">60</span>, <span class="at">.after =</span> air_time)           <span class="co"># air_time 변수 뒤에 추가</span></span></code></pre></div>
<p><br></p>
<ul>
<li>mutate()와 자주 쓰이는 함수</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">row_number()</td>
<td align="left">행 번호 반환</td>
</tr>
<tr class="even">
<td align="center">min_rank()</td>
<td align="left">순위 부여(동순위 발생 시 건너뜀)</td>
</tr>
<tr class="odd">
<td align="center">dense_rank()</td>
<td align="left">순위 부여(동순위 발생 시 연속된 값 부여)</td>
</tr>
<tr class="even">
<td align="center">na_if()</td>
<td align="left">특정 값을 결측값(NA)으로 변환</td>
</tr>
<tr class="odd">
<td align="center">coalesce()</td>
<td align="left">결측값(NA)을 여러 열 중 첫 번째 비결측값으로 변환)</td>
</tr>
<tr class="even">
<td align="center">if_else()</td>
<td align="left">단순 조건문(이분법적 분류)</td>
</tr>
<tr class="odd">
<td align="center">case_when()</td>
<td align="left">여러 개의 조건을 처리</td>
</tr>
<tr class="even">
<td align="center">recode()</td>
<td align="left">특정 값을 새로운 값으로 변환</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="데이터-랭글링.html#cb78-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">flight_order =</span> <span class="fu">row_number</span>())                       <span class="co"># 비행기 순서대로 번호 부여</span></span>
<span id="cb78-2"><a href="데이터-랭글링.html#cb78-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">delay_rank =</span> <span class="fu">min_rank</span>(dep_delay))                  <span class="co"># 출발 지연 시간의 순위(동순위 건너뛰기)</span></span>
<span id="cb78-3"><a href="데이터-랭글링.html#cb78-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">delay_dense =</span> <span class="fu">dense_rank</span>(dep_delay))               <span class="co"># 출발 지연 시간의 순위(동순위 연속)</span></span>
<span id="cb78-4"><a href="데이터-랭글링.html#cb78-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">dep_delay_na =</span> <span class="fu">na_if</span>(dep_delay, <span class="dv">0</span>))                <span class="co"># 출발 지연 시간이 0이면 NA로 변환</span></span>
<span id="cb78-5"><a href="데이터-랭글링.html#cb78-5" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">first_non_na =</span> <span class="fu">coalesce</span>(dep_delay, arr_delay))     <span class="co"># 출발 지연 시간이 NA인 경우 도착 지연 시간 사용</span></span>
<span id="cb78-6"><a href="데이터-랭글링.html#cb78-6" tabindex="-1"></a></span>
<span id="cb78-7"><a href="데이터-랭글링.html#cb78-7" tabindex="-1"></a><span class="co"># 비행 시간이 3시간 이상이면 Long Flight, 아니면 Short Flight로 구분</span></span>
<span id="cb78-8"><a href="데이터-랭글링.html#cb78-8" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">flight_duration =</span> <span class="fu">if_else</span>(air_time <span class="sc">&gt;=</span> <span class="dv">180</span>, <span class="st">&quot;Long Flight&quot;</span>, <span class="st">&quot;Short Flight&quot;</span>))</span>
<span id="cb78-9"><a href="데이터-랭글링.html#cb78-9" tabindex="-1"></a></span>
<span id="cb78-10"><a href="데이터-랭글링.html#cb78-10" tabindex="-1"></a><span class="co"># 비행 거리가 500마일 미만이면 Short-haul,</span></span>
<span id="cb78-11"><a href="데이터-랭글링.html#cb78-11" tabindex="-1"></a><span class="co"># 500~1500마일 미만이면 Medium-haul,</span></span>
<span id="cb78-12"><a href="데이터-랭글링.html#cb78-12" tabindex="-1"></a><span class="co"># 1500마일 이상이면 Long-haul로 구분</span></span>
<span id="cb78-13"><a href="데이터-랭글링.html#cb78-13" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb78-14"><a href="데이터-랭글링.html#cb78-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flight_distance =</span> <span class="fu">case_when</span>(</span>
<span id="cb78-15"><a href="데이터-랭글링.html#cb78-15" tabindex="-1"></a>    distance <span class="sc">&lt;</span> <span class="dv">500</span> <span class="sc">~</span> <span class="st">&quot;Short-haul&quot;</span>,</span>
<span id="cb78-16"><a href="데이터-랭글링.html#cb78-16" tabindex="-1"></a>    distance <span class="sc">&lt;</span> <span class="dv">1500</span> <span class="sc">~</span> <span class="st">&quot;Medium-haul&quot;</span>,</span>
<span id="cb78-17"><a href="데이터-랭글링.html#cb78-17" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Long-haul&quot;</span></span>
<span id="cb78-18"><a href="데이터-랭글링.html#cb78-18" tabindex="-1"></a>  ))</span>
<span id="cb78-19"><a href="데이터-랭글링.html#cb78-19" tabindex="-1"></a></span>
<span id="cb78-20"><a href="데이터-랭글링.html#cb78-20" tabindex="-1"></a><span class="co"># 항공사 이름 변경</span></span>
<span id="cb78-21"><a href="데이터-랭글링.html#cb78-21" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb78-22"><a href="데이터-랭글링.html#cb78-22" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">carrier_name =</span> <span class="fu">recode</span>(carrier,</span>
<span id="cb78-23"><a href="데이터-랭글링.html#cb78-23" tabindex="-1"></a>                               <span class="st">&quot;AA&quot;</span> <span class="ot">=</span> <span class="st">&quot;American Airlines Inc.&quot;</span>,</span>
<span id="cb78-24"><a href="데이터-랭글링.html#cb78-24" tabindex="-1"></a>                               <span class="st">&quot;DL&quot;</span> <span class="ot">=</span> <span class="st">&quot;Delta Air Lines Inc.&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="rename-함수" class="section level4 hasAnchor" number="6.2.3.3">
<h4><span class="header-section-number">6.2.3.3</span> rename() 함수<a href="데이터-랭글링.html#rename-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수 이름 변경</li>
<li>명시적으로 언급하지 않은 모든 변수를 유지함</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="데이터-랭글링.html#cb79-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">dep.time =</span> dep_time, <span class="at">arr.time =</span> arr_time)</span></code></pre></div>
<p><br></p>
</div>
<div id="relocate-함수" class="section level4 hasAnchor" number="6.2.3.4">
<h4><span class="header-section-number">6.2.3.4</span> relocate() 함수<a href="데이터-랭글링.html#relocate-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>변수 위치 변경, 기본값(default)은 첫번째 열</li>
<li><code>mutate()</code> 함수와 같이 매개변수 <code>.before</code>, <code>.after</code>를 이용하여 위치 지정</li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="데이터-랭글링.html#cb80-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(air_time, distance)</span>
<span id="cb80-2"><a href="데이터-랭글링.html#cb80-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(carrier<span class="sc">:</span>tailnum, <span class="at">.after =</span> day)</span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="집단-관련-함수" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> 집단 관련 함수<a href="데이터-랭글링.html#집단-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="summarise-함수" class="section level4 hasAnchor" number="6.2.4.1">
<h4><span class="header-section-number">6.2.4.1</span> summarise() 함수<a href="데이터-랭글링.html#summarise-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>통계량을 계산하여 하나의 행으로 요약</li>
<li>여러 개의 다양한 요약 함수를 사용할 수 있음</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">n()</td>
<td align="left">관측값 개수</td>
</tr>
<tr class="even">
<td align="center">n_distinct()</td>
<td align="left">유일한 값의 개수</td>
</tr>
<tr class="odd">
<td align="center">sum()</td>
<td align="left">합계</td>
</tr>
<tr class="even">
<td align="center">mean()</td>
<td align="left">평균</td>
</tr>
<tr class="odd">
<td align="center">sd()</td>
<td align="left">표준편차</td>
</tr>
<tr class="even">
<td align="center">median()</td>
<td align="left">중앙값</td>
</tr>
<tr class="odd">
<td align="center">IQR()</td>
<td align="left">사분위수범위</td>
</tr>
<tr class="even">
<td align="center">min()</td>
<td align="left">최소값</td>
</tr>
<tr class="odd">
<td align="center">max()</td>
<td align="left">최대값</td>
</tr>
<tr class="even">
<td align="center">quantile()</td>
<td align="left">분위수</td>
</tr>
<tr class="odd">
<td align="center">first()</td>
<td align="left">첫 번째 값</td>
</tr>
<tr class="even">
<td align="center">nth()</td>
<td align="left">n 번째 값</td>
</tr>
<tr class="odd">
<td align="center">last</td>
<td align="left">마지막 값</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="데이터-랭글링.html#cb81-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),            <span class="co"># 평균</span></span>
<span id="cb81-2"><a href="데이터-랭글링.html#cb81-2" tabindex="-1"></a>                      <span class="at">std_dev =</span> <span class="fu">sd</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),           <span class="co"># 표준편차</span></span>
<span id="cb81-3"><a href="데이터-랭글링.html#cb81-3" tabindex="-1"></a>                      <span class="at">n =</span> <span class="fu">n</span>())                                        <span class="co"># 데이터 개수</span></span></code></pre></div>
<p><br></p>
</div>
<div id="group_by-함수" class="section level4 hasAnchor" number="6.2.4.2">
<h4><span class="header-section-number">6.2.4.2</span> group_by() 함수<a href="데이터-랭글링.html#group_by-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수를 기준으로 데이터를 그룹화할 수 있음</li>
<li>일반적으로 summarise()와 함께 사용하여 각 집단에 대한 요약 통계를 구할 때 활용</li>
<li>여러 개의 변수를 기준으로 복합적인 그룹화 가능</li>
<li><code>ungroup()</code> 함수 - 그룹화 해제</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="데이터-랭글링.html#cb82-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month)                                           <span class="co"># 데이터 변화 x, 그룹화되어 있음</span></span>
<span id="cb82-2"><a href="데이터-랭글링.html#cb82-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span>                                       <span class="co"># 월별 평균 출발 지연 시간, 집단 크기</span></span>
<span id="cb82-3"><a href="데이터-랭글링.html#cb82-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb82-4"><a href="데이터-랭글링.html#cb82-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, month, day) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb82-5"><a href="데이터-랭글링.html#cb82-5" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())      <span class="co"># 그룹화 해제</span></span></code></pre></div>
<p><br></p>
</div>
<div id="count-함수" class="section level4 hasAnchor" number="6.2.4.3">
<h4><span class="header-section-number">6.2.4.3</span> count() 함수<a href="데이터-랭글링.html#count-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>변수의 고유값별로 관측값 개수를 계산(빈도표 생성)</li>
<li><code>group_by()</code> + <code>summarise(n = n())</code>를 간결하게 표현한 도우미 함수</li>
<li>매개변수 <code>wt</code> - 집계 기준이 되는 가중 변수를 지정하며, 해당 변수의 합계를 산출(가중합)</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="데이터-랭글링.html#cb83-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(carrier)                                            <span class="co"># 항공사별 항공편 개수</span></span>
<span id="cb83-2"><a href="데이터-랭글링.html#cb83-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(carrier, <span class="at">wt =</span> air_time)                             <span class="co"># 항공사별 비행 시간 총합</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="관계형-데이터" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> 관계형 데이터<a href="데이터-랭글링.html#관계형-데이터" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="관계형-데이터-소개" class="section level4 hasAnchor" number="6.2.5.1">
<h4><span class="header-section-number">6.2.5.1</span> 관계형 데이터 소개<a href="데이터-랭글링.html#관계형-데이터-소개" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>관계형 데이터
<ul>
<li>일반적으로 데이터 테이블이 많이 있고, 관심있는 질문에 대답하기 위해 이들을 결합해야 함</li>
<li>여러 데이터 테이블을 총칭하여 <strong>관계형 데이터</strong>라고 함</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>[예제] nycflights13 패키지에서 flights와 관련된 4개의 데이터 테이블</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="데이터-랭글링.html#cb84-1" tabindex="-1"></a><span class="co"># airlines 테이블: 항공사 약어 코드와 전체 항공사 이름 정보</span></span>
<span id="cb84-2"><a href="데이터-랭글링.html#cb84-2" tabindex="-1"></a>airlines</span></code></pre></div>
<pre><code>## # A tibble: 16 × 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="데이터-랭글링.html#cb86-1" tabindex="-1"></a><span class="co"># airports 테이블: 각 공항에 대한 정보가 faa 공항 코드로 식별됨</span></span>
<span id="cb86-2"><a href="데이터-랭글링.html#cb86-2" tabindex="-1"></a>airports</span></code></pre></div>
<pre><code>## # A tibble: 1,458 × 8
##    faa   name                             lat    lon   alt    tz dst   tzone              
##    &lt;chr&gt; &lt;chr&gt;                          &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              
##  1 04G   Lansdowne Airport               41.1  -80.6  1044    -5 A     America/New_York   
##  2 06A   Moton Field Municipal Airport   32.5  -85.7   264    -6 A     America/Chicago    
##  3 06C   Schaumburg Regional             42.0  -88.1   801    -6 A     America/Chicago    
##  4 06N   Randall Airport                 41.4  -74.4   523    -5 A     America/New_York   
##  5 09J   Jekyll Island Airport           31.1  -81.4    11    -5 A     America/New_York   
##  6 0A9   Elizabethton Municipal Airport  36.4  -82.2  1593    -5 A     America/New_York   
##  7 0G6   Williams County Airport         41.5  -84.5   730    -5 A     America/New_York   
##  8 0G7   Finger Lakes Regional Airport   42.9  -76.8   492    -5 A     America/New_York   
##  9 0P2   Shoestring Aviation Airfield    39.8  -76.6  1000    -5 U     America/New_York   
## 10 0S9   Jefferson County Intl           48.1 -123.    108    -8 A     America/Los_Angeles
## # ℹ 1,448 more rows</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="데이터-랭글링.html#cb88-1" tabindex="-1"></a><span class="co"># planes 테이블: 각 여객기에 대한 정보가 tailnum으로 식별됨</span></span>
<span id="cb88-2"><a href="데이터-랭글링.html#cb88-2" tabindex="-1"></a>planes</span></code></pre></div>
<pre><code>## # A tibble: 3,322 × 9
##    tailnum  year type                    manufacturer     model     engines seats speed engine   
##    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt;            &lt;chr&gt;       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
##  1 N10156   2004 Fixed wing multi engine EMBRAER          EMB-145XR       2    55    NA Turbo-fan
##  2 N102UW   1998 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  3 N103US   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  4 N104UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  5 N10575   2002 Fixed wing multi engine EMBRAER          EMB-145LR       2    55    NA Turbo-fan
##  6 N105UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  7 N107US   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  8 N108UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
##  9 N109UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
## 10 N110UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-214        2   182    NA Turbo-fan
## # ℹ 3,312 more rows</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="데이터-랭글링.html#cb90-1" tabindex="-1"></a><span class="co"># weather 테이블: 각 NYC 공항의 매 시각 날씨 정보</span></span>
<span id="cb90-2"><a href="데이터-랭글링.html#cb90-2" tabindex="-1"></a>weather</span></code></pre></div>
<pre><code>## # A tibble: 26,115 × 15
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed wind_gust precip pressure visib time_hour          
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dttm&gt;             
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4         NA      0    1012     10 2013-01-01 01:00:00
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06        NA      0    1012.    10 2013-01-01 02:00:00
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5         NA      0    1012.    10 2013-01-01 03:00:00
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7         NA      0    1012.    10 2013-01-01 04:00:00
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7         NA      0    1012.    10 2013-01-01 05:00:00
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5         NA      0    1012.    10 2013-01-01 06:00:00
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0         NA      0    1012.    10 2013-01-01 07:00:00
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4         NA      0    1012.    10 2013-01-01 08:00:00
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0         NA      0    1013.    10 2013-01-01 09:00:00
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8         NA      0    1012.    10 2013-01-01 10:00:00
## # ℹ 26,105 more rows</code></pre>
<p><br></p>
<p><img src="img/fig6-1.png" /></p>
<p><br></p>
</div>
<div id="키key" class="section level4 hasAnchor" number="6.2.5.2">
<h4><span class="header-section-number">6.2.5.2</span> 키(key)<a href="데이터-랭글링.html#키key" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><u>두 테이블을 연결할 때 사용</u>하는 변수로, 관측값을 고유하게 식별하는 역할을 함</li>
<li>두 가지 주요 키 유형이 있음:
<ul>
<li><strong>기본키(primary key)</strong>
<ul>
<li>한 테이블 내에서 각 관측값을 고유하게 식별하는 변수(또는 변수 집합)</li>
<li>예 : planes$tailnum은 planes 테이블에서 각 비행기를 고유하게 구분함</li>
</ul></li>
<li><strong>외래키(foreign key)</strong>
<ul>
<li>다른 테이블의 기본키를 참조하여 두 테이블을 연결하는 변수(또는 변수 집합)</li>
<li>예 : flights$tailnum은 flights 테이블에서 각 항공편을 planes 테이블의 비행기와 연결함</li>
</ul></li>
</ul></li>
<li>기본키는 반드시 모든 관측값을 유일하게 식별해야 하므로, 실제로 중복이 없는지 확인하는 것이 중요</li>
<li>일부 테이블은 명시적으로 기본키가 정의되어 있지 않기도 함</li>
<li>일반적으로 기본키와 외래키는 일대다(one-to-many) 관계를 형성함
<ul>
<li>예 : 하나의 비행기(tailnum)는 여러 항공편(flights)에 사용될 수 있음</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="데이터-랭글링.html#cb92-1" tabindex="-1"></a><span class="co"># 기본키 중복 확인1</span></span>
<span id="cb92-2"><a href="데이터-랭글링.html#cb92-2" tabindex="-1"></a>planes <span class="sc">%&gt;%</span> <span class="fu">count</span>(tailnum) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 0 × 2
## # ℹ 2 variables: tailnum &lt;chr&gt;, n &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="데이터-랭글링.html#cb94-1" tabindex="-1"></a><span class="co"># 기본키 중복 확인2</span></span>
<span id="cb94-2"><a href="데이터-랭글링.html#cb94-2" tabindex="-1"></a>weather <span class="sc">%&gt;%</span> <span class="fu">count</span>(year, month, day, hour, origin) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 6
##    year month   day  hour origin     n
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
## 1  2013    11     3     1 EWR        2
## 2  2013    11     3     1 JFK        2
## 3  2013    11     3     1 LGA        2</code></pre>
<p><br></p>
</div>
<div id="뮤테이팅-조인mutating-join" class="section level4 hasAnchor" number="6.2.5.3">
<h4><span class="header-section-number">6.2.5.3</span> 뮤테이팅 조인(mutating join)<a href="데이터-랭글링.html#뮤테이팅-조인mutating-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>관측값을 키로 매칭한 후, 한 테이블의 변수를 다른 테이블에 복사하여 결합함</li>
<li>1개의 내부 조인(inner join)과 3개의 외부 조인(outer join) 방식이 있음</li>
</ul>
<p><br></p>
<p><img src="img/fig6-2.png" /></p>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">inner_join(x, y)</td>
<td align="left">키가 일치하는 관측값만 결합(x, y 모두에 존재하는 값만 유지)</td>
</tr>
<tr class="even">
<td align="center">left_join(x, y)</td>
<td align="left">x의 모든 관측값을 유지하고, 일치하는 y의 값을 결합</td>
</tr>
<tr class="odd">
<td align="center">right_join(x, y)</td>
<td align="left">y의 모든 관측값을 유지하고, 일치하는 x의 값을 결합</td>
</tr>
<tr class="even">
<td align="center">full_join(x, y)</td>
<td align="left">x와 y의 모든 관측값을 유지하고, 가능한 부분은 결합</td>
</tr>
</tbody>
</table>
<p><img src="img/fig6-3.png" /></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="데이터-랭글링.html#cb96-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="at">value_x =</span> <span class="fu">c</span>(<span class="st">&quot;x1&quot;</span>, <span class="st">&quot;x2&quot;</span>, <span class="st">&quot;x3&quot;</span>))</span>
<span id="cb96-2"><a href="데이터-랭글링.html#cb96-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>), <span class="at">value_y =</span> <span class="fu">c</span>(<span class="st">&quot;y1&quot;</span>, <span class="st">&quot;y2&quot;</span>, <span class="st">&quot;x3&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="데이터-랭글링.html#cb97-1" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">inner_join</span>(y, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>)                       <span class="co"># inner join</span></span>
<span id="cb97-2"><a href="데이터-랭글링.html#cb97-2" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(y, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>)                        <span class="co"># left join</span></span>
<span id="cb97-3"><a href="데이터-랭글링.html#cb97-3" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">right_join</span>(y, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>)                       <span class="co"># right join</span></span>
<span id="cb97-4"><a href="데이터-랭글링.html#cb97-4" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(y, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>)                        <span class="co"># full join</span></span></code></pre></div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="데이터-랭글링.html#cb98-1" tabindex="-1"></a><span class="do">## flights 데이터셋 일부 추출</span></span>
<span id="cb98-2"><a href="데이터-랭글링.html#cb98-2" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="데이터-랭글링.html#cb98-3" tabindex="-1"></a>  <span class="fu">select</span>(year<span class="sc">:</span>day, hour, origin, dest, tailnum, carrier)</span>
<span id="cb98-4"><a href="데이터-랭글링.html#cb98-4" tabindex="-1"></a></span>
<span id="cb98-5"><a href="데이터-랭글링.html#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="데이터-랭글링.html#cb98-6" tabindex="-1"></a><span class="do">## by = NULL (기본값) : 두 테이블에 있는 모든 변수를 사용하여 조인(natural join)</span></span>
<span id="cb98-7"><a href="데이터-랭글링.html#cb98-7" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(weather)</span>
<span id="cb98-8"><a href="데이터-랭글링.html#cb98-8" tabindex="-1"></a></span>
<span id="cb98-9"><a href="데이터-랭글링.html#cb98-9" tabindex="-1"></a></span>
<span id="cb98-10"><a href="데이터-랭글링.html#cb98-10" tabindex="-1"></a><span class="do">## by = &quot;x&quot; : 일부 공통 변수 x만 사용하여 조인</span></span>
<span id="cb98-11"><a href="데이터-랭글링.html#cb98-11" tabindex="-1"></a><span class="co"># flights와 planes에는 year 변수가 있지만 서로 다른 의미이므로, tailnum 변수로만 조인</span></span>
<span id="cb98-12"><a href="데이터-랭글링.html#cb98-12" tabindex="-1"></a><span class="co"># year 변수는 접미사가 붙어 출력에서 헷갈리지 않음</span></span>
<span id="cb98-13"><a href="데이터-랭글링.html#cb98-13" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(planes, <span class="at">by =</span> <span class="st">&quot;tailnum&quot;</span>)</span>
<span id="cb98-14"><a href="데이터-랭글링.html#cb98-14" tabindex="-1"></a></span>
<span id="cb98-15"><a href="데이터-랭글링.html#cb98-15" tabindex="-1"></a></span>
<span id="cb98-16"><a href="데이터-랭글링.html#cb98-16" tabindex="-1"></a><span class="do">## by = c(&quot;a&quot; = b&quot;) : 테이블 x의 a 변수와 테이블 y의 b 변수를 매칭</span></span>
<span id="cb98-17"><a href="데이터-랭글링.html#cb98-17" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;dest&quot;</span> <span class="ot">=</span> <span class="st">&quot;faa&quot;</span>))</span>
<span id="cb98-18"><a href="데이터-랭글링.html#cb98-18" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(airports, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;origin&quot;</span> <span class="ot">=</span> <span class="st">&quot;faa&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="필터링-조인filtering-join" class="section level4 hasAnchor" number="6.2.5.4">
<h4><span class="header-section-number">6.2.5.4</span> 필터링 조인(filtering join)<a href="데이터-랭글링.html#필터링-조인filtering-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>뮤테이팅 조인처럼 키를 기준으로 관측값을 매칭하지만, 변수를 결합하지 않고 관측값 자체를 필터링함</li>
<li>매칭 여부만 중요하며, 어떤 관측값이 매칭되었는지는 중요하지 않음</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">semi_join(x, y)</td>
<td align="left">x의 관측값 중 y와 키가 일치하는 값만 유지(결합 ×)</td>
</tr>
<tr class="even">
<td align="center">anti_join(x, y)</td>
<td align="left">x의 관측값 중 y와 키가 일치하지 않는 값만 반환(결합 ×)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="데이터-랭글링.html#cb99-1" tabindex="-1"></a><span class="co"># 가장 인기있는 상위 10개 도착지</span></span>
<span id="cb99-2"><a href="데이터-랭글링.html#cb99-2" tabindex="-1"></a>top_dest <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(dest, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb99-3"><a href="데이터-랭글링.html#cb99-3" tabindex="-1"></a></span>
<span id="cb99-4"><a href="데이터-랭글링.html#cb99-4" tabindex="-1"></a><span class="co"># 목적지 중 한 곳으로 운행한 항공편 필터링</span></span>
<span id="cb99-5"><a href="데이터-랭글링.html#cb99-5" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">semi_join</span>(top_dest)</span>
<span id="cb99-6"><a href="데이터-랭글링.html#cb99-6" tabindex="-1"></a></span>
<span id="cb99-7"><a href="데이터-랭글링.html#cb99-7" tabindex="-1"></a><span class="co"># 여객기에 매칭되지 않는 항공편 필터링</span></span>
<span id="cb99-8"><a href="데이터-랭글링.html#cb99-8" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">anti_join</span>(planes, <span class="at">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(tailnum, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><br></p>
<hr />
</div>
</div>
</div>
<div id="tidyr-패키지" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> tidyr 패키지<a href="데이터-랭글링.html#tidyr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="wide-format과-long-format" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> wide format과 long format<a href="데이터-랭글링.html#wide-format과-long-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>wide format
<ul>
<li>사람이 읽기 좋은 데이터 구조</li>
<li>통계학에서 다루는 데이터 테이블 구조와 동일한 개념</li>
<li>각 행은 관측 단위(사람, 가구 등)를 나타내며, 각 열은 관측 단위에 대한 측정값(키, 몸무게 등)으로 표현된 형태</li>
</ul></li>
<li>long format
<ul>
<li>컴퓨터가 이해하기 편한 데이터 구조</li>
<li>각 행은 wide format에서 특정 셀의 정보를 반영하며, 각 열은 요인(factor)으로 표현된 형태</li>
<li>wide format보다 유연하여 데이터 추가 및 삭제가 용이함</li>
</ul></li>
</ul>
<p><img src="img/fig6-4.png" /></p>
<p><br></p>
<ul>
<li>[예제] WHO에서 발표한 1999~2000년 3개 국가(아프가니스탄, 브라질, 중국)의 결핵 사례 수
<ul>
<li>동일한 데이터셋을 다양한 format으로 보여줌</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="데이터-랭글링.html#cb100-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb100-2"><a href="데이터-랭글링.html#cb100-2" tabindex="-1"></a>table1                                                <span class="co"># tidy data</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="데이터-랭글링.html#cb102-1" tabindex="-1"></a>table2</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    country      year type            count
##    &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
##  1 Afghanistan  1999 cases             745
##  2 Afghanistan  1999 population   19987071
##  3 Afghanistan  2000 cases            2666
##  4 Afghanistan  2000 population   20595360
##  5 Brazil       1999 cases           37737
##  6 Brazil       1999 population  172006362
##  7 Brazil       2000 cases           80488
##  8 Brazil       2000 population  174504898
##  9 China        1999 cases          212258
## 10 China        1999 population 1272915272
## 11 China        2000 cases          213766
## 12 China        2000 population 1280428583</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="데이터-랭글링.html#cb104-1" tabindex="-1"></a>table3</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country      year rate             
##   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="데이터-랭글링.html#cb106-1" tabindex="-1"></a>table4a</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   country     `1999` `2000`
##   &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="데이터-랭글링.html#cb108-1" tabindex="-1"></a>table4b</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   country         `1999`     `2000`
##   &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan   19987071   20595360
## 2 Brazil       172006362  174504898
## 3 China       1272915272 1280428583</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="데이터-랭글링.html#cb110-1" tabindex="-1"></a>table5</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     century year  rate             
##   &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19      99    745/19987071     
## 2 Afghanistan 20      00    2666/20595360    
## 3 Brazil      19      99    37737/172006362  
## 4 Brazil      20      00    80488/174504898  
## 5 China       19      99    212258/1272915272
## 6 China       20      00    213766/1280428583</code></pre>
<p><br></p>
</div>
<div id="long-format으로-변환" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> long format으로 변환<a href="데이터-랭글링.html#long-format으로-변환" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>wide format을 long format으로 변환 - <code>pivot_longer()</code> 함수(권장)
<ul>
<li>행의 개수를 늘리고 열의 개수를 줄여서 데이터셋을 길게 만듬</li>
<li>long format으로 변환하고자 하는 열을 지정하는 방법은 <code>dplyr::select()</code> 함수와 동일</li>
<li>[참고] <code>gather()</code>, <code>reshape2::melt()</code> 함수</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="데이터-랭글링.html#cb112-1" tabindex="-1"></a><span class="do">## long format 변환1</span></span>
<span id="cb112-2"><a href="데이터-랭글링.html#cb112-2" tabindex="-1"></a>table4a <span class="sc">%&gt;%</span></span>
<span id="cb112-3"><a href="데이터-랭글링.html#cb112-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-4"><a href="데이터-랭글링.html#cb112-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">parse_integer</span>(year))                  <span class="co"># year 변수를 정수형으로 변경</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country      year  cases
##   &lt;chr&gt;       &lt;int&gt;  &lt;dbl&gt;
## 1 Afghanistan  1999    745
## 2 Afghanistan  2000   2666
## 3 Brazil       1999  37737
## 4 Brazil       2000  80488
## 5 China        1999 212258
## 6 China        2000 213766</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="데이터-랭글링.html#cb114-1" tabindex="-1"></a><span class="do">## long format 변환2</span></span>
<span id="cb114-2"><a href="데이터-랭글링.html#cb114-2" tabindex="-1"></a>table4b <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="데이터-랭글링.html#cb114-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;population&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb114-4"><a href="데이터-랭글링.html#cb114-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">parse_integer</span>(year))                  <span class="co"># year 변수를 정수형으로 변경</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country      year population
##   &lt;chr&gt;       &lt;int&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999   19987071
## 2 Afghanistan  2000   20595360
## 3 Brazil       1999  172006362
## 4 Brazil       2000  174504898
## 5 China        1999 1272915272
## 6 China        2000 1280428583</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="데이터-랭글링.html#cb116-1" tabindex="-1"></a><span class="do">## long format 변환3</span></span>
<span id="cb116-2"><a href="데이터-랭글링.html#cb116-2" tabindex="-1"></a>relig_income <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="데이터-랭글링.html#cb116-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>religion, <span class="at">names_to =</span> <span class="st">&quot;income&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb116-4"><a href="데이터-랭글링.html#cb116-4" tabindex="-1"></a></span>
<span id="cb116-5"><a href="데이터-랭글링.html#cb116-5" tabindex="-1"></a><span class="do">## long format 변환4</span></span>
<span id="cb116-6"><a href="데이터-랭글링.html#cb116-6" tabindex="-1"></a>billboard <span class="sc">%&gt;%</span></span>
<span id="cb116-7"><a href="데이터-랭글링.html#cb116-7" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;wk&quot;</span>),              <span class="co"># dplyr::select()의 helpers 함수 사용</span></span>
<span id="cb116-8"><a href="데이터-랭글링.html#cb116-8" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb116-9"><a href="데이터-랭글링.html#cb116-9" tabindex="-1"></a>               <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb116-10"><a href="데이터-랭글링.html#cb116-10" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rank&quot;</span>,</span>
<span id="cb116-11"><a href="데이터-랭글링.html#cb116-11" tabindex="-1"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)                 <span class="co"># 결측값(NA) 제거</span></span></code></pre></div>
<p><br></p>
</div>
<div id="wide-format으로-변환" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> wide format으로 변환<a href="데이터-랭글링.html#wide-format으로-변환" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>long format을 wide format으로 변환 - <code>pivot_wider()</code> 함수(권장)
<ul>
<li>관측값이 여러 행에 흩어져 있을 때 사용</li>
<li>[참고] <code>spread()</code>, <code>reshape2::dcast()</code> 함수</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="데이터-랭글링.html#cb117-1" tabindex="-1"></a><span class="do">## wide format 변환1</span></span>
<span id="cb117-2"><a href="데이터-랭글링.html#cb117-2" tabindex="-1"></a>table2 <span class="sc">%&gt;%</span></span>
<span id="cb117-3"><a href="데이터-랭글링.html#cb117-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type,</span>
<span id="cb117-4"><a href="데이터-랭글링.html#cb117-4" tabindex="-1"></a>              <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span>                                <span class="co"># type에 대한 wide format</span></span>
<span id="cb117-5"><a href="데이터-랭글링.html#cb117-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> cases<span class="sc">/</span>population<span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span>                          <span class="co"># 인구 10만 명당 결핵 건수</span></span>
<span id="cb117-6"><a href="데이터-랭글링.html#cb117-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year,                                      <span class="co"># year에 대한 wide format</span></span>
<span id="cb117-7"><a href="데이터-랭글링.html#cb117-7" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="fu">c</span>(cases, population, rate)) <span class="sc">%&gt;%</span></span>
<span id="cb117-8"><a href="데이터-랭글링.html#cb117-8" tabindex="-1"></a>  <span class="fu">relocate</span>(country, <span class="fu">contains</span>(<span class="st">&quot;1999&quot;</span>))                                 <span class="co"># 변수 위치 변경</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 7
##   country     cases_1999 population_1999 rate_1999 cases_2000 population_2000 rate_2000
##   &lt;chr&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan        745        19987071      3.73       2666        20595360      12.9
## 2 Brazil           37737       172006362     21.9       80488       174504898      46.1
## 3 China           212258      1272915272     16.7      213766      1280428583      16.7</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="데이터-랭글링.html#cb119-1" tabindex="-1"></a><span class="do">## wide format 변환2</span></span>
<span id="cb119-2"><a href="데이터-랭글링.html#cb119-2" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb119-3"><a href="데이터-랭글링.html#cb119-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station,</span>
<span id="cb119-4"><a href="데이터-랭글링.html#cb119-4" tabindex="-1"></a>              <span class="at">values_from =</span> seen,</span>
<span id="cb119-5"><a href="데이터-랭글링.html#cb119-5" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="dv">0</span>)                                        <span class="co"># 결측값(NA)은 0으로 대체</span></span></code></pre></div>
<p><br></p>
</div>
<div id="열의-분리-및-결합" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> 열의 분리 및 결합<a href="데이터-랭글링.html#열의-분리-및-결합" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>하나의 열에 저장되어 있는 여러 개의 변수를 분리 - <code>separate()</code> 함수</li>
<li>여러 개의 열을 하나의 열로 결합 - <code>unite()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="데이터-랭글링.html#cb120-1" tabindex="-1"></a><span class="do">## 열의 분리</span></span>
<span id="cb120-2"><a href="데이터-랭글링.html#cb120-2" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="데이터-랭글링.html#cb122-1" tabindex="-1"></a><span class="do">## 열의 결합</span></span>
<span id="cb122-2"><a href="데이터-랭글링.html#cb122-2" tabindex="-1"></a>table5 <span class="sc">%&gt;%</span></span>
<span id="cb122-3"><a href="데이터-랭글링.html#cb122-3" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="at">col =</span> new_year, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb122-4"><a href="데이터-랭글링.html#cb122-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_year =</span> <span class="fu">parse_integer</span>(new_year))          <span class="co"># new_year 변수를 정수형으로 변경</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   country     new_year rate             
##   &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan     1999 745/19987071     
## 2 Afghanistan     2000 2666/20595360    
## 3 Brazil          1999 37737/172006362  
## 4 Brazil          2000 80488/174504898  
## 5 China           1999 212258/1272915272
## 6 China           2000 213766/1280428583</code></pre>
<p><br></p>
</div>
<div id="결측값missing-value-처리" class="section level3 hasAnchor" number="6.3.5">
<h3><span class="header-section-number">6.3.5</span> 결측값(missing value) 처리<a href="데이터-랭글링.html#결측값missing-value-처리" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>결측값 <code>NA</code>은 누락된 값(not available)을 나타냄</li>
<li>결측값은 알 수 없으므로, 전염성(contagious)을 가짐
<ul>
<li>결측값에 대한 산술연산, 비교연산 결과도 알 수 없음(NA)</li>
</ul></li>
<li>결측값 확인 - <code>is.na()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="데이터-랭글링.html#cb124-1" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb124-2"><a href="데이터-랭글링.html#cb124-2" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb124-3"><a href="데이터-랭글링.html#cb124-3" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">&gt;</span> <span class="dv">5</span></span>
<span id="cb124-4"><a href="데이터-랭글링.html#cb124-4" tabindex="-1"></a><span class="dv">10</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb124-5"><a href="데이터-랭글링.html#cb124-5" tabindex="-1"></a></span>
<span id="cb124-6"><a href="데이터-랭글링.html#cb124-6" tabindex="-1"></a><span class="co"># Let x be Mary&#39;s age. We don&#39;t know how old she is.</span></span>
<span id="cb124-7"><a href="데이터-랭글링.html#cb124-7" tabindex="-1"></a><span class="co"># Let y be John&#39;s age. We don&#39;t know how old he is.</span></span>
<span id="cb124-8"><a href="데이터-랭글링.html#cb124-8" tabindex="-1"></a><span class="co"># Are Mary and John the same age?</span></span>
<span id="cb124-9"><a href="데이터-랭글링.html#cb124-9" tabindex="-1"></a><span class="co"># We don&#39;t know!</span></span>
<span id="cb124-10"><a href="데이터-랭글링.html#cb124-10" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb124-11"><a href="데이터-랭글링.html#cb124-11" tabindex="-1"></a></span>
<span id="cb124-12"><a href="데이터-랭글링.html#cb124-12" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li>명시적 결측값(explicitly missing value) - <code>NA</code>로 표시된 값</li>
<li>암묵적 결측값(implicitly missing value) - 데이터셋에 존재하지 않는 값</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="데이터-랭글링.html#cb125-1" tabindex="-1"></a><span class="co"># 2015년 4분기 수익은 NA로 표시되어 있으므로, 명시적 결측값임</span></span>
<span id="cb125-2"><a href="데이터-랭글링.html#cb125-2" tabindex="-1"></a><span class="co"># 2016년 1분기 수익은 데이터셋이 존재하지 않으므로, 암묵적 결측값임</span></span>
<span id="cb125-3"><a href="데이터-랭글링.html#cb125-3" tabindex="-1"></a>stocks <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb125-4"><a href="데이터-랭글링.html#cb125-4" tabindex="-1"></a>  <span class="at">year   =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</span>
<span id="cb125-5"><a href="데이터-랭글링.html#cb125-5" tabindex="-1"></a>  <span class="at">qtr    =</span> <span class="fu">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),</span>
<span id="cb125-6"><a href="데이터-랭글링.html#cb125-6" tabindex="-1"></a>  <span class="at">return =</span> <span class="fu">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="cn">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>))</span>
<span id="cb125-7"><a href="데이터-랭글링.html#cb125-7" tabindex="-1"></a></span>
<span id="cb125-8"><a href="데이터-랭글링.html#cb125-8" tabindex="-1"></a>stocks <span class="sc">%&gt;%</span></span>
<span id="cb125-9"><a href="데이터-랭글링.html#cb125-9" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year,                      <span class="co"># year를 열로 pivot하여 명시적으로 만듬</span></span>
<span id="cb125-10"><a href="데이터-랭글링.html#cb125-10" tabindex="-1"></a>              <span class="at">values_from =</span> return) <span class="sc">%&gt;%</span></span>
<span id="cb125-11"><a href="데이터-랭글링.html#cb125-11" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">2015</span><span class="st">`</span>, <span class="st">`</span><span class="at">2016</span><span class="st">`</span>),              <span class="co"># 명시적 결측값이 중요하지 않다면</span></span>
<span id="cb125-12"><a href="데이터-랭글링.html#cb125-12" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,                     <span class="co"># 암묵적으로 만듬(NA 제거)</span></span>
<span id="cb125-13"><a href="데이터-랭글링.html#cb125-13" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;return&quot;</span>,</span>
<span id="cb125-14"><a href="데이터-랭글링.html#cb125-14" tabindex="-1"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><br></p>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">complete()</td>
<td align="left">지정한 열의 모든 고유 조합을 생성한 후, 필요한 경우 결측값을 명시적으로 추가</td>
</tr>
<tr class="even">
<td align="center">fill()</td>
<td align="left">결측값을 가장 최근에 존재하는 값(이월된 마지막 관측값)으로 대체</td>
</tr>
<tr class="odd">
<td align="center">drop_na()</td>
<td align="left">결측값이 포함된 행 제거</td>
</tr>
<tr class="even">
<td align="center">replace_na()</td>
<td align="left">결측값을 사용자가 지정한 값으로 대체</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="데이터-랭글링.html#cb126-1" tabindex="-1"></a><span class="do">## complete() 예제</span></span>
<span id="cb126-2"><a href="데이터-랭글링.html#cb126-2" tabindex="-1"></a>stocks <span class="sc">%&gt;%</span> <span class="fu">complete</span>(year, qtr)</span>
<span id="cb126-3"><a href="데이터-랭글링.html#cb126-3" tabindex="-1"></a></span>
<span id="cb126-4"><a href="데이터-랭글링.html#cb126-4" tabindex="-1"></a></span>
<span id="cb126-5"><a href="데이터-랭글링.html#cb126-5" tabindex="-1"></a><span class="do">## fill() 예제</span></span>
<span id="cb126-6"><a href="데이터-랭글링.html#cb126-6" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">&quot;Derrick Whitmore&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&quot;Katherine Burke&quot;</span>),</span>
<span id="cb126-7"><a href="데이터-랭글링.html#cb126-7" tabindex="-1"></a>       <span class="at">treatment =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="at">response =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb126-8"><a href="데이터-랭글링.html#cb126-8" tabindex="-1"></a>  <span class="fu">fill</span>(person)</span>
<span id="cb126-9"><a href="데이터-랭글링.html#cb126-9" tabindex="-1"></a></span>
<span id="cb126-10"><a href="데이터-랭글링.html#cb126-10" tabindex="-1"></a></span>
<span id="cb126-11"><a href="데이터-랭글링.html#cb126-11" tabindex="-1"></a><span class="do">## drop_na() 예제</span></span>
<span id="cb126-12"><a href="데이터-랭글링.html#cb126-12" tabindex="-1"></a>mytbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>))</span>
<span id="cb126-13"><a href="데이터-랭글링.html#cb126-13" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>(x)                                  <span class="co"># x 변수에서 결측값이 있는 행 제거</span></span>
<span id="cb126-14"><a href="데이터-랭글링.html#cb126-14" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()                                   <span class="co"># 모든 변수에 대해 결측값이 있는 행 제거</span></span>
<span id="cb126-15"><a href="데이터-랭글링.html#cb126-15" tabindex="-1"></a></span>
<span id="cb126-16"><a href="데이터-랭글링.html#cb126-16" tabindex="-1"></a></span>
<span id="cb126-17"><a href="데이터-랭글링.html#cb126-17" tabindex="-1"></a><span class="do">## replace_na() 예제</span></span>
<span id="cb126-18"><a href="데이터-랭글링.html#cb126-18" tabindex="-1"></a><span class="co"># 데이터 프레임에 있는 결측값을 대체하는 경우, 매개변수 replace는 list로 입력</span></span>
<span id="cb126-19"><a href="데이터-랭글링.html#cb126-19" tabindex="-1"></a><span class="co"># x 변수의 결측값은 0, y 변수의 결측값은 &quot;unknown&quot;으로 대체</span></span>
<span id="cb126-20"><a href="데이터-랭글링.html#cb126-20" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="st">&quot;unknown&quot;</span>))</span>
<span id="cb126-21"><a href="데이터-랭글링.html#cb126-21" tabindex="-1"></a></span>
<span id="cb126-22"><a href="데이터-랭글링.html#cb126-22" tabindex="-1"></a><span class="co"># 벡터에 있는 결측값을 대체하는 경우, 매개변수 replace는 단일 값(single value)으로 입력</span></span>
<span id="cb126-23"><a href="데이터-랭글링.html#cb126-23" tabindex="-1"></a>mytbl<span class="sc">$</span>x <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="dv">0</span>)</span>
<span id="cb126-24"><a href="데이터-랭글링.html#cb126-24" tabindex="-1"></a>mytbl<span class="sc">$</span>y <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="st">&quot;unknown&quot;</span>)</span>
<span id="cb126-25"><a href="데이터-랭글링.html#cb126-25" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">replace_na</span>(x, <span class="dv">0</span>), <span class="at">y =</span> <span class="fu">replace_na</span>(y, <span class="st">&quot;unknown&quot;</span>))</span></code></pre></div>
<p><br></p>
<hr />
</div>
</div>
<div id="stringr-패키지" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> stringr 패키지<a href="데이터-랭글링.html#stringr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="stringr-패키지-소개" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> stringr 패키지 소개<a href="데이터-랭글링.html#stringr-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>문자열(string)을 다루는 함수를 제공하는 패키지</li>
<li>모든 함수가 <code>str_</code>로 시작하여 일관성있게 설계됨</li>
</ul>
<p><br></p>
</div>
<div id="문자열-기초" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> 문자열 기초<a href="데이터-랭글링.html#문자열-기초" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="str_length-함수" class="section level4 hasAnchor" number="6.4.2.1">
<h4><span class="header-section-number">6.4.2.1</span> str_length() 함수<a href="데이터-랭글링.html#str_length-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 문자의 개수(길이) 확인</li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="데이터-랭글링.html#cb127-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb127-2"><a href="데이터-랭글링.html#cb127-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb127-3"><a href="데이터-랭글링.html#cb127-3" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;R for data science&quot;</span>, <span class="cn">NA</span>))</span>
<span id="cb127-4"><a href="데이터-랭글링.html#cb127-4" tabindex="-1"></a></span>
<span id="cb127-5"><a href="데이터-랭글링.html#cb127-5" tabindex="-1"></a></span>
<span id="cb127-6"><a href="데이터-랭글링.html#cb127-6" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb127-7"><a href="데이터-랭글링.html#cb127-7" tabindex="-1"></a><span class="co"># dplyr::count() 함수 - 변수의 고유값별로 관측값 개수를 계산</span></span>
<span id="cb127-8"><a href="데이터-랭글링.html#cb127-8" tabindex="-1"></a><span class="co">#        매개변수 wt - 기본값은 NULL로 집단별 관측값 개수(행의 개수) 산출,</span></span>
<span id="cb127-9"><a href="데이터-랭글링.html#cb127-9" tabindex="-1"></a><span class="co">#                      가중 변수를 입력하면 집단별 합계 산출(가중합)</span></span>
<span id="cb127-10"><a href="데이터-랭글링.html#cb127-10" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb127-11"><a href="데이터-랭글링.html#cb127-11" tabindex="-1"></a>babynames<span class="sc">%&gt;%</span> </span>
<span id="cb127-12"><a href="데이터-랭글링.html#cb127-12" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">length =</span> <span class="fu">str_length</span>(name), <span class="at">wt =</span> n)            <span class="co"># 이름 길이의 분포</span></span>
<span id="cb127-13"><a href="데이터-랭글링.html#cb127-13" tabindex="-1"></a></span>
<span id="cb127-14"><a href="데이터-랭글링.html#cb127-14" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb127-15"><a href="데이터-랭글링.html#cb127-15" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(name) <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span>                  <span class="co"># 가장 긴 이름 찾기</span></span>
<span id="cb127-16"><a href="데이터-랭글링.html#cb127-16" tabindex="-1"></a>  <span class="fu">count</span>(name, <span class="at">wt =</span> n, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="str_sub-함수" class="section level4 hasAnchor" number="6.4.2.2">
<h4><span class="header-section-number">6.4.2.2</span> str_sub() 함수<a href="데이터-랭글링.html#str_sub-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 특정 위치의 문자 추출</li>
<li>매개변수 <code>start</code>, <code>end</code>도 포함되기 때문에 반환되는 문자열의 길이는 end - start + 1임</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="데이터-랭글링.html#cb128-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb128-2"><a href="데이터-랭글링.html#cb128-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>)</span>
<span id="cb128-3"><a href="데이터-랭글링.html#cb128-3" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="dv">1</span>, <span class="dv">3</span>)                            <span class="co"># 1번째 문자부터 3번째 문자까지 추출</span></span>
<span id="cb128-4"><a href="데이터-랭글링.html#cb128-4" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)                          <span class="co"># 끝에서 3번째 문자부터 마지막 문자까지 추출</span></span>
<span id="cb128-5"><a href="데이터-랭글링.html#cb128-5" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">1</span>, <span class="dv">5</span>)                          <span class="co"># 문자열이 너무 짧을 때도 에러는 발생하지 않음!</span></span>
<span id="cb128-6"><a href="데이터-랭글링.html#cb128-6" tabindex="-1"></a></span>
<span id="cb128-7"><a href="데이터-랭글링.html#cb128-7" tabindex="-1"></a></span>
<span id="cb128-8"><a href="데이터-랭글링.html#cb128-8" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb128-9"><a href="데이터-랭글링.html#cb128-9" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb128-10"><a href="데이터-랭글링.html#cb128-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first =</span> <span class="fu">str_sub</span>(name, <span class="dv">1</span>, <span class="dv">1</span>),       <span class="co"># 이름의 첫번째 문자 추출</span></span>
<span id="cb128-11"><a href="데이터-랭글링.html#cb128-11" tabindex="-1"></a>         <span class="at">last =</span> <span class="fu">str_sub</span>(name, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>))      <span class="co"># 이름의 마지막 문자 추출</span></span></code></pre></div>
<p><br></p>
</div>
<div id="str_to_lower-str_to_upper-함수" class="section level4 hasAnchor" number="6.4.2.3">
<h4><span class="header-section-number">6.4.2.3</span> str_to_lower(), str_to_upper() 함수<a href="데이터-랭글링.html#str_to_lower-str_to_upper-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>대소문자 변환</li>
<li>언어마다 대소문자 변경 규칙이 다르기 때문에 주의해야 함</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="데이터-랭글링.html#cb129-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>))</span>
<span id="cb129-2"><a href="데이터-랭글링.html#cb129-2" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="데이터에서-문자열-생성" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> 데이터에서 문자열 생성<a href="데이터-랭글링.html#데이터에서-문자열-생성" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="str_c-함수" class="section level4 hasAnchor" number="6.4.3.1">
<h4><span class="header-section-number">6.4.3.1</span> str_c() 함수<a href="데이터-랭글링.html#str_c-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>두 개 이상의 문자 벡터를 원소별로 결합하여 하나의 문자형 벡터(single character vector) 생성</li>
<li>매개변수 <code>sep</code> - 각 원소를 결합할 때 사용할 구분자</li>
<li>매개변수 <code>collapse</code> - 전체 벡터를 하나의 문자열로 합칠 때 사용할 구분자</li>
<li>결측값(NA)이 포함된 경우 해당 결과도 NA로 반환됨</li>
<li><code>dplyr::mutate()</code> 함수와 함께 사용하면 열 단위 문자열 생성이 가능함</li>
</ul>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="데이터-랭글링.html#cb130-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb130-2"><a href="데이터-랭글링.html#cb130-2" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Letter: &quot;</span>, letters)</span>
<span id="cb130-3"><a href="데이터-랭글링.html#cb130-3" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Letter&quot;</span>, letters, <span class="at">sep =</span> <span class="st">&quot;: &quot;</span>)</span>
<span id="cb130-4"><a href="데이터-랭글링.html#cb130-4" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="st">&quot; is for&quot;</span>, <span class="st">&quot;...&quot;</span>)</span>
<span id="cb130-5"><a href="데이터-랭글링.html#cb130-5" tabindex="-1"></a><span class="fu">str_c</span>(letters[<span class="sc">-</span><span class="dv">26</span>], <span class="st">&quot; comes before &quot;</span>, letters[<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb130-6"><a href="데이터-랭글링.html#cb130-6" tabindex="-1"></a></span>
<span id="cb130-7"><a href="데이터-랭글링.html#cb130-7" tabindex="-1"></a></span>
<span id="cb130-8"><a href="데이터-랭글링.html#cb130-8" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb130-9"><a href="데이터-랭글링.html#cb130-9" tabindex="-1"></a><span class="co"># 단일 문자열(single string)로 결합</span></span>
<span id="cb130-10"><a href="데이터-랭글링.html#cb130-10" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb130-11"><a href="데이터-랭글링.html#cb130-11" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb130-12"><a href="데이터-랭글링.html#cb130-12" tabindex="-1"></a></span>
<span id="cb130-13"><a href="데이터-랭글링.html#cb130-13" tabindex="-1"></a></span>
<span id="cb130-14"><a href="데이터-랭글링.html#cb130-14" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb130-15"><a href="데이터-랭글링.html#cb130-15" tabindex="-1"></a><span class="co"># 결측값(NA)이 있는 경우</span></span>
<span id="cb130-16"><a href="데이터-랭글링.html#cb130-16" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb130-17"><a href="데이터-랭글링.html#cb130-17" tabindex="-1"></a><span class="fu">str_c</span>(x, <span class="st">&quot;-d&quot;</span>)</span>
<span id="cb130-18"><a href="데이터-랭글링.html#cb130-18" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">str_replace_na</span>(x), <span class="st">&quot;-d&quot;</span>)              <span class="co"># 결측값을 &quot;NA&quot; 그대로 출력</span></span>
<span id="cb130-19"><a href="데이터-랭글링.html#cb130-19" tabindex="-1"></a></span>
<span id="cb130-20"><a href="데이터-랭글링.html#cb130-20" tabindex="-1"></a></span>
<span id="cb130-21"><a href="데이터-랭글링.html#cb130-21" tabindex="-1"></a><span class="do">## Example 4</span></span>
<span id="cb130-22"><a href="데이터-랭글링.html#cb130-22" tabindex="-1"></a><span class="co"># dplyr::mutate()와 함께 사용</span></span>
<span id="cb130-23"><a href="데이터-랭글링.html#cb130-23" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>))</span>
<span id="cb130-24"><a href="데이터-랭글링.html#cb130-24" tabindex="-1"></a>info <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">greeting =</span> <span class="fu">str_c</span>(<span class="st">&quot;Hi, &quot;</span>, name, <span class="st">&quot;!&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="str_glue-함수" class="section level4 hasAnchor" number="6.4.3.2">
<h4><span class="header-section-number">6.4.3.2</span> str_glue() 함수<a href="데이터-랭글링.html#str_glue-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>고정 문자열과 변수를 직관적으로 결합할 수 있도록 지원</li>
<li>반복적인 <code>""</code> 사용 없이 가독성이 높은 코드 작성 가능</li>
<li><code>{}</code>안에 작성한 표현식은 문자열 외부처럼 평가되어 값으로 치환됨</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="데이터-랭글링.html#cb131-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb131-2"><a href="데이터-랭글링.html#cb131-2" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Park&quot;</span></span>
<span id="cb131-3"><a href="데이터-랭글링.html#cb131-3" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;Hello, {name}!&quot;</span>)</span>
<span id="cb131-4"><a href="데이터-랭글링.html#cb131-4" tabindex="-1"></a></span>
<span id="cb131-5"><a href="데이터-랭글링.html#cb131-5" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;2 + 2 = {2 + 2}&quot;</span>)</span>
<span id="cb131-6"><a href="데이터-랭글링.html#cb131-6" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;Today is {toupper(&#39;monday&#39;)}.&quot;</span>)</span>
<span id="cb131-7"><a href="데이터-랭글링.html#cb131-7" tabindex="-1"></a></span>
<span id="cb131-8"><a href="데이터-랭글링.html#cb131-8" tabindex="-1"></a></span>
<span id="cb131-9"><a href="데이터-랭글링.html#cb131-9" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb131-10"><a href="데이터-랭글링.html#cb131-10" tabindex="-1"></a><span class="co"># 특수문자 \n가 없어도 자연스럽게 줄바꿈을 포함</span></span>
<span id="cb131-11"><a href="데이터-랭글링.html#cb131-11" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">&quot;Kim&quot;</span></span>
<span id="cb131-12"><a href="데이터-랭글링.html#cb131-12" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;Hello, {name}!</span></span>
<span id="cb131-13"><a href="데이터-랭글링.html#cb131-13" tabindex="-1"></a><span class="st">          Welcome to the team.&quot;</span>)</span>
<span id="cb131-14"><a href="데이터-랭글링.html#cb131-14" tabindex="-1"></a></span>
<span id="cb131-15"><a href="데이터-랭글링.html#cb131-15" tabindex="-1"></a></span>
<span id="cb131-16"><a href="데이터-랭글링.html#cb131-16" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb131-17"><a href="데이터-랭글링.html#cb131-17" tabindex="-1"></a><span class="co"># 결측값(NA)이 있으면 지정한 문자열로 대체</span></span>
<span id="cb131-18"><a href="데이터-랭글링.html#cb131-18" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;Park&quot;</span>)</span>
<span id="cb131-19"><a href="데이터-랭글링.html#cb131-19" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">&quot;Hi, {names}!&quot;</span>, <span class="at">.na =</span> <span class="st">&quot;Friend&quot;</span>)</span>
<span id="cb131-20"><a href="데이터-랭글링.html#cb131-20" tabindex="-1"></a></span>
<span id="cb131-21"><a href="데이터-랭글링.html#cb131-21" tabindex="-1"></a></span>
<span id="cb131-22"><a href="데이터-랭글링.html#cb131-22" tabindex="-1"></a><span class="do">## Example 4</span></span>
<span id="cb131-23"><a href="데이터-랭글링.html#cb131-23" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>))</span>
<span id="cb131-24"><a href="데이터-랭글링.html#cb131-24" tabindex="-1"></a>info <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">greeting =</span> <span class="fu">str_glue</span>(<span class="st">&quot;Hi, {name}!&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="str_glue_data-함수" class="section level4 hasAnchor" number="6.4.3.3">
<h4><span class="header-section-number">6.4.3.3</span> str_glue_data() 함수<a href="데이터-랭글링.html#str_glue_data-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>str_glue()</code> 함수와 유사하지만, 데이터프레임을 명시적으로 참조하여 문자열을 생성</li>
<li><code>str_glue()</code> 함수보다 더 빠르고 메모리 효율적이며, 벡터화된 처리로 대규모 데이터 처리에 적합</li>
<li><code>dplyr::mutate()</code> 함수와 함께 사용하면 열(column) 값을 활용한 문자열 결합에 매우 유용함</li>
</ul>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="데이터-랭글링.html#cb132-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb132-2"><a href="데이터-랭글링.html#cb132-2" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>),</span>
<span id="cb132-3"><a href="데이터-랭글링.html#cb132-3" tabindex="-1"></a>               <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">42</span>),</span>
<span id="cb132-4"><a href="데이터-랭글링.html#cb132-4" tabindex="-1"></a>               <span class="at">city =</span> <span class="fu">c</span>(<span class="st">&quot;Seoul&quot;</span>, <span class="st">&quot;Jeonbuk&quot;</span>, <span class="st">&quot;Gwangju&quot;</span>))</span>
<span id="cb132-5"><a href="데이터-랭글링.html#cb132-5" tabindex="-1"></a><span class="fu">str_glue_data</span>(info, <span class="st">&quot;{name} is {age} years old and lives in {city}.&quot;</span>)</span>
<span id="cb132-6"><a href="데이터-랭글링.html#cb132-6" tabindex="-1"></a></span>
<span id="cb132-7"><a href="데이터-랭글링.html#cb132-7" tabindex="-1"></a></span>
<span id="cb132-8"><a href="데이터-랭글링.html#cb132-8" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb132-9"><a href="데이터-랭글링.html#cb132-9" tabindex="-1"></a>info2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;Park&quot;</span>),</span>
<span id="cb132-10"><a href="데이터-랭글링.html#cb132-10" tabindex="-1"></a>                <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="cn">NA</span>),</span>
<span id="cb132-11"><a href="데이터-랭글링.html#cb132-11" tabindex="-1"></a>                <span class="at">city =</span> <span class="fu">c</span>(<span class="st">&quot;Seoul&quot;</span>, <span class="st">&quot;Jeonbuk&quot;</span>, <span class="st">&quot;Gwangju&quot;</span>))</span>
<span id="cb132-12"><a href="데이터-랭글링.html#cb132-12" tabindex="-1"></a><span class="fu">str_glue_data</span>(info2, <span class="st">&quot;{name} lives in {city}.&quot;</span>, <span class="at">.na =</span> <span class="st">&quot;Unknown&quot;</span>)</span>
<span id="cb132-13"><a href="데이터-랭글링.html#cb132-13" tabindex="-1"></a></span>
<span id="cb132-14"><a href="데이터-랭글링.html#cb132-14" tabindex="-1"></a></span>
<span id="cb132-15"><a href="데이터-랭글링.html#cb132-15" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb132-16"><a href="데이터-랭글링.html#cb132-16" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>),</span>
<span id="cb132-17"><a href="데이터-랭글링.html#cb132-17" tabindex="-1"></a>               <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">42</span>),</span>
<span id="cb132-18"><a href="데이터-랭글링.html#cb132-18" tabindex="-1"></a>               <span class="at">city =</span> <span class="fu">c</span>(<span class="st">&quot;Seoul&quot;</span>, <span class="st">&quot;Jeonbuk&quot;</span>, <span class="st">&quot;Gwangju&quot;</span>))</span>
<span id="cb132-19"><a href="데이터-랭글링.html#cb132-19" tabindex="-1"></a>info <span class="sc">%&gt;%</span></span>
<span id="cb132-20"><a href="데이터-랭글링.html#cb132-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">message =</span> <span class="fu">str_glue_data</span>(info, <span class="st">&quot;{name} ({age} years old) lives in {city}.&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="str_flatten-함수" class="section level4 hasAnchor" number="6.4.3.4">
<h4><span class="header-section-number">6.4.3.4</span> str_flatten() 함수<a href="데이터-랭글링.html#str_flatten-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자 벡터의 각 원소를 하나의 문자열로 결합</li>
<li><code>dplyr::summarise()</code> 함수와 함께 사용하면 집단별 문자열 요약에 활용 가능</li>
<li>매개변수 <code>collapse</code> - 전체 벡터를 하나의 문자열로 합칠 때 사용할 구분자</li>
<li>매개변수 <code>last</code> - 마지막 원소 앞에 사용할 접속어</li>
</ul>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="데이터-랭글링.html#cb133-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb133-2"><a href="데이터-랭글링.html#cb133-2" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>))</span>
<span id="cb133-3"><a href="데이터-랭글링.html#cb133-3" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb133-4"><a href="데이터-랭글링.html#cb133-4" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>, <span class="at">last =</span> <span class="st">&quot;, and &quot;</span>)</span>
<span id="cb133-5"><a href="데이터-랭글링.html#cb133-5" tabindex="-1"></a></span>
<span id="cb133-6"><a href="데이터-랭글링.html#cb133-6" tabindex="-1"></a></span>
<span id="cb133-7"><a href="데이터-랭글링.html#cb133-7" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb133-8"><a href="데이터-랭글링.html#cb133-8" tabindex="-1"></a>mytbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Marvin&quot;</span>, <span class="st">&quot;Terence&quot;</span>, <span class="st">&quot;Terence&quot;</span>, <span class="st">&quot;Terence&quot;</span>),</span>
<span id="cb133-9"><a href="데이터-랭글링.html#cb133-9" tabindex="-1"></a>                <span class="at">fruit =</span> <span class="fu">c</span>(<span class="st">&quot;banana&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;nectarine&quot;</span>, <span class="st">&quot;cantaloupe&quot;</span>, <span class="st">&quot;papaya&quot;</span>, <span class="st">&quot;madarine&quot;</span>))</span>
<span id="cb133-10"><a href="데이터-랭글링.html#cb133-10" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span></span>
<span id="cb133-11"><a href="데이터-랭글링.html#cb133-11" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb133-12"><a href="데이터-랭글링.html#cb133-12" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fruits =</span> <span class="fu">str_flatten</span>(fruit, <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="정규-표현식을-이용한-패턴-매칭" class="section level3 hasAnchor" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> 정규 표현식을 이용한 패턴 매칭<a href="데이터-랭글링.html#정규-표현식을-이용한-패턴-매칭" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="정규-표현식regular-expression-regex-regexp" class="section level4 hasAnchor" number="6.4.4.1">
<h4><span class="header-section-number">6.4.4.1</span> 정규 표현식(regular expression; regex, regexp)<a href="데이터-랭글링.html#정규-표현식regular-expression-regex-regexp" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열의 규칙(패턴)을 표현하는 특수한 언어</li>
<li>일정한 규칙을 만족하는 문자열을 탐색하거나 추출, 변경하는 데 사용</li>
<li>특정 패턴을 나타내기 위해 사용하는 특수 기호를 <u>메타 문자(meta character)</u>라고 함</li>
<li><code>str_view()</code> 함수 - 정규 표현식이 문자 벡터에 어떻게 매칭되는지 시각적으로 보여줌</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">표현식</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">.</td>
<td align="left">어떤 문자 한 개와 일치(줄 바꿈 제외)</td>
</tr>
<tr class="even">
<td align="center">^</td>
<td align="left">^ 뒤의 표현식이 문자열의 시작과 일치</td>
</tr>
<tr class="odd">
<td align="center">$</td>
<td align="left">$ 앞의 표현식이 문자열의 끝과 일치</td>
</tr>
<tr class="even">
<td align="center">?</td>
<td align="left">? 앞의 표현식이 0번 또는 1번(0 or 1) 일치</td>
</tr>
<tr class="odd">
<td align="center">+</td>
<td align="left">+ 앞의 표현식이 1번 이상(1 or more) 반복되어 일치</td>
</tr>
<tr class="even">
<td align="center">*</td>
<td align="left">* 앞의 표현식이 0번 이상(0 or more) 반복되어 일치</td>
</tr>
<tr class="odd">
<td align="center">()</td>
<td align="left">표현식을 하나의 집단으로 묶음</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="데이터-랭글링.html#cb134-1" tabindex="-1"></a><span class="do">## 기초 매칭</span></span>
<span id="cb134-2"><a href="데이터-랭글링.html#cb134-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb134-3"><a href="데이터-랭글링.html#cb134-3" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;an&quot;</span>)                           <span class="co"># &quot;an&quot;을 포함하는 문자열</span></span>
<span id="cb134-4"><a href="데이터-랭글링.html#cb134-4" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;.a.&quot;</span>)                          <span class="co"># &quot;a&quot;가 중간에 있는 문자열</span></span></code></pre></div>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="데이터-랭글링.html#cb135-1" tabindex="-1"></a><span class="do">## 앵커(anchor) - 문자열 내 특정 위치(시작 또는 끝) 지정</span></span>
<span id="cb135-2"><a href="데이터-랭글링.html#cb135-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb135-3"><a href="데이터-랭글링.html#cb135-3" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;^a&quot;</span>)                           <span class="co"># &quot;a&quot;로 시작하는 문자열</span></span>
<span id="cb135-4"><a href="데이터-랭글링.html#cb135-4" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;a$&quot;</span>)                           <span class="co"># &quot;a&quot;로 끝나는 문자열</span></span>
<span id="cb135-5"><a href="데이터-랭글링.html#cb135-5" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;&quot;</span>), <span class="st">&quot;^$&quot;</span>)                <span class="co"># 빈 문자열</span></span></code></pre></div>
<p><br></p>
<ul>
<li><code>{}</code>을 사용하여 매칭 횟수를 정확하게 제어 가능
<ul>
<li><code>{n}</code> - 정확히 n회 매칭</li>
<li><code>{n,}</code> - n회 이상 매칭</li>
<li><code>{n,m}</code> - n회 이상 m회 이하 매칭</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="데이터-랭글링.html#cb136-1" tabindex="-1"></a><span class="do">## 반복</span></span>
<span id="cb136-2"><a href="데이터-랭글링.html#cb136-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;1888 is the longest year in Roman numerals: MDCCCLXXXVIII&quot;</span></span>
<span id="cb136-3"><a href="데이터-랭글링.html#cb136-3" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;CC?&quot;</span>)                      <span class="co"># 두번째 &quot;C&quot;가 0번 또는 1번 반복 → C, CC</span></span>
<span id="cb136-4"><a href="데이터-랭글링.html#cb136-4" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;CC+&quot;</span>)                      <span class="co"># 두번째 &quot;C&quot;가 1번 이상 반복 → CC, CCC, CCCC, ...</span></span>
<span id="cb136-5"><a href="데이터-랭글링.html#cb136-5" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;CC*&quot;</span>)                      <span class="co"># 두번째 &quot;C&quot;가 0번 이상 반복 → C, CC, CCC, CCCC, ...</span></span>
<span id="cb136-6"><a href="데이터-랭글링.html#cb136-6" tabindex="-1"></a></span>
<span id="cb136-7"><a href="데이터-랭글링.html#cb136-7" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;C{2}&quot;</span>)                     <span class="co"># &quot;C&quot;가 정확히 2번 반복 → CC</span></span>
<span id="cb136-8"><a href="데이터-랭글링.html#cb136-8" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;C{2,}&quot;</span>)                    <span class="co"># &quot;C&quot;가 2번 이상 반복 → CC, CCC, CCCC, ...</span></span>
<span id="cb136-9"><a href="데이터-랭글링.html#cb136-9" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;C{2,3}&quot;</span>)                   <span class="co"># &quot;C&quot;가 2번 이상 3번 이하 반복 → CC, CCC</span></span>
<span id="cb136-10"><a href="데이터-랭글링.html#cb136-10" tabindex="-1"></a></span>
<span id="cb136-11"><a href="데이터-랭글링.html#cb136-11" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;colour&quot;</span>), <span class="st">&quot;colou?r&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="데이터-랭글링.html#cb137-1" tabindex="-1"></a><span class="do">## 그룹화</span></span>
<span id="cb137-2"><a href="데이터-랭글링.html#cb137-2" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;gray&quot;</span>, <span class="st">&quot;grey&quot;</span>), <span class="st">&quot;gr(a|e)y&quot;</span>)</span>
<span id="cb137-3"><a href="데이터-랭글링.html#cb137-3" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;summarize&quot;</span>, <span class="st">&quot;summarise&quot;</span>), <span class="st">&quot;summari(z|s)e&quot;</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li>정규 표현식에서 특수 동작이 아닌 기호 자체로 사용하기 위해서는 그 앞에 <code>\</code> 사용
<ul>
<li>작은 따옴표 <code>\'</code></li>
<li>큰 따옴표 <code>\"</code></li>
<li>백슬래시 <code>\\\\</code></li>
<li>점(dot) <code>\\.</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="데이터-랭글링.html#cb138-1" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">&quot;a</span><span class="sc">\\</span><span class="st">b&quot;</span>)</span>
<span id="cb138-2"><a href="데이터-랭글링.html#cb138-2" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;a</span><span class="sc">\\</span><span class="st">b&quot;</span>), <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">&quot;</span>)</span>
<span id="cb138-3"><a href="데이터-랭글링.html#cb138-3" tabindex="-1"></a></span>
<span id="cb138-4"><a href="데이터-랭글링.html#cb138-4" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;a.c&quot;</span>, <span class="st">&quot;bef&quot;</span>), <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">.c&quot;</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li><code>[]</code>을 사용하여 문자 집합(character class)과 매칭
<ul>
<li><code>[abcd]</code> - “a”, “b”, “c”, “d” 중 하나 이상과 매칭</li>
<li><code>[^abcd]</code> - “a”, “b”, “c”, “d”를 제외한 문자와 매칭</li>
</ul></li>
<li>자주 사용되는 문자 클래스(character class)
<ul>
<li><code>\d</code> - 임의의 숫자와 매칭</li>
<li><code>\s</code> - 임의의 여백 문자(whitespace; 공백, 탭, 줄 바꿈)와 매칭</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="데이터-랭글링.html#cb139-1" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hadley&quot;</span>, <span class="st">&quot;Mine&quot;</span>, <span class="st">&quot;Garrett&quot;</span>)</span>
<span id="cb139-2"><a href="데이터-랭글링.html#cb139-2" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[aeiou]&quot;</span>)          <span class="co"># 모음과 매칭</span></span>
<span id="cb139-3"><a href="데이터-랭글링.html#cb139-3" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[^aeiou]&quot;</span>)         <span class="co"># 자음과 매칭</span></span>
<span id="cb139-4"><a href="데이터-랭글링.html#cb139-4" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[^aeiou]+&quot;</span>)        <span class="co"># 자음이 1개 이상 반복되는 부분과 매칭</span></span>
<span id="cb139-5"><a href="데이터-랭글링.html#cb139-5" tabindex="-1"></a>                                        <span class="co"># [^aeiou]는 각 자음 문자를 개별적으로 매칭하지만,</span></span>
<span id="cb139-6"><a href="데이터-랭글링.html#cb139-6" tabindex="-1"></a>                                        <span class="co"># [^aeiou]+는 다음이 연속되는 부분을 하나의 매칭으로 처리</span></span>
<span id="cb139-7"><a href="데이터-랭글링.html#cb139-7" tabindex="-1"></a></span>
<span id="cb139-8"><a href="데이터-랭글링.html#cb139-8" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="st">&quot;The total cost is 29 dollars</span><span class="sc">\n</span><span class="st">and 99 cents.&quot;</span></span>
<span id="cb139-9"><a href="데이터-랭글링.html#cb139-9" tabindex="-1"></a><span class="fu">writeLines</span>(text)</span>
<span id="cb139-10"><a href="데이터-랭글링.html#cb139-10" tabindex="-1"></a><span class="fu">str_view_all</span>(text, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d&quot;</span>)               <span class="co"># 숫자(0~9)와 매칭</span></span>
<span id="cb139-11"><a href="데이터-랭글링.html#cb139-11" tabindex="-1"></a><span class="fu">str_view_all</span>(text, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s&quot;</span>)               <span class="co"># 여백 문자(공백, 줄 바꿈)와 매칭</span></span></code></pre></div>
<p><br></p>
</div>
<div id="str_detect-함수" class="section level4 hasAnchor" number="6.4.4.2">
<h4><span class="header-section-number">6.4.4.2</span> str_detect() 함수<a href="데이터-랭글링.html#str_detect-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에 특정 패턴이 존재하는지 확인</li>
<li>패턴이 일치하면 TRUE 반환</li>
<li>정규 표현식을 사용하여 다양한 조건 지정 가능</li>
<li><code>str_subset()</code> - 패턴이 일치하는 문자열 벡터를 반환</li>
<li><code>dplyr::filter()</code>와 함께 사용하면 조건에 맞는 행 선택 가능</li>
</ul>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="데이터-랭글링.html#cb140-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb140-2"><a href="데이터-랭글링.html#cb140-2" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>), <span class="st">&quot;e&quot;</span>)</span>
<span id="cb140-3"><a href="데이터-랭글링.html#cb140-3" tabindex="-1"></a></span>
<span id="cb140-4"><a href="데이터-랭글링.html#cb140-4" tabindex="-1"></a></span>
<span id="cb140-5"><a href="데이터-랭글링.html#cb140-5" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb140-6"><a href="데이터-랭글링.html#cb140-6" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(words, <span class="st">&quot;^t&quot;</span>))            <span class="co"># &quot;t&quot;로 시작하는 단어의 개수</span></span>
<span id="cb140-7"><a href="데이터-랭글링.html#cb140-7" tabindex="-1"></a><span class="fu">str_subset</span>(words, <span class="st">&quot;^t&quot;</span>)                 <span class="co"># &quot;t&quot;로 시작하는 단어</span></span>
<span id="cb140-8"><a href="데이터-랭글링.html#cb140-8" tabindex="-1"></a></span>
<span id="cb140-9"><a href="데이터-랭글링.html#cb140-9" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_detect</span>(words, <span class="st">&quot;[aeiou]$&quot;</span>))     <span class="co"># 모음으로 끝나는 단어의 비율</span></span>
<span id="cb140-10"><a href="데이터-랭글링.html#cb140-10" tabindex="-1"></a></span>
<span id="cb140-11"><a href="데이터-랭글링.html#cb140-11" tabindex="-1"></a></span>
<span id="cb140-12"><a href="데이터-랭글링.html#cb140-12" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb140-13"><a href="데이터-랭글링.html#cb140-13" tabindex="-1"></a><span class="co"># &quot;x&quot;로 끝나는 이름</span></span>
<span id="cb140-14"><a href="데이터-랭글링.html#cb140-14" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;x&quot;</span>))</span>
<span id="cb140-15"><a href="데이터-랭글링.html#cb140-15" tabindex="-1"></a></span>
<span id="cb140-16"><a href="데이터-랭글링.html#cb140-16" tabindex="-1"></a><span class="co"># 연도별로 &quot;x&quot;로 끝나는 고유한 이름의 비율</span></span>
<span id="cb140-17"><a href="데이터-랭글링.html#cb140-17" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb140-18"><a href="데이터-랭글링.html#cb140-18" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb140-19"><a href="데이터-랭글링.html#cb140-19" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prop_x =</span> <span class="fu">mean</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;x$&quot;</span>)))</span></code></pre></div>
<p><br></p>
</div>
<div id="str_count-함수" class="section level4 hasAnchor" number="6.4.4.3">
<h4><span class="header-section-number">6.4.4.3</span> str_count() 함수<a href="데이터-랭글링.html#str_count-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>str_detect()</code> 함수의 변형으로, 문자열 내에서 일치하는 패턴의 개수 계산</li>
<li><code>dplyr::mutate()</code>와 함께 사용하면 열 단위로 패턴의 빈도를 구할 수 있음</li>
</ul>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="데이터-랭글링.html#cb141-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb141-2"><a href="데이터-랭글링.html#cb141-2" tabindex="-1"></a><span class="fu">str_count</span>(<span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>), <span class="st">&quot;p&quot;</span>)</span>
<span id="cb141-3"><a href="데이터-랭글링.html#cb141-3" tabindex="-1"></a></span>
<span id="cb141-4"><a href="데이터-랭글링.html#cb141-4" tabindex="-1"></a></span>
<span id="cb141-5"><a href="데이터-랭글링.html#cb141-5" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb141-6"><a href="데이터-랭글링.html#cb141-6" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb141-7"><a href="데이터-랭글링.html#cb141-7" tabindex="-1"></a>  <span class="fu">count</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb141-8"><a href="데이터-랭글링.html#cb141-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vowels =</span> <span class="fu">str_count</span>(name, <span class="st">&quot;[aeiou]&quot;</span>),         <span class="co"># 모음 개수</span></span>
<span id="cb141-9"><a href="데이터-랭글링.html#cb141-9" tabindex="-1"></a>         <span class="at">consonants =</span> <span class="fu">str_count</span>(name, <span class="st">&quot;[^aeiou]&quot;</span>))    <span class="co"># 자음 개수</span></span></code></pre></div>
<p><br></p>
</div>
<div id="str_extract-str_extract_all-함수" class="section level4 hasAnchor" number="6.4.4.4">
<h4><span class="header-section-number">6.4.4.4</span> str_extract(), str_extract_all() 함수<a href="데이터-랭글링.html#str_extract-str_extract_all-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 일치하는 텍스트를 추출</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="데이터-랭글링.html#cb142-1" tabindex="-1"></a><span class="do">## 문장 데이터에서 색상 텍스트 추출</span></span>
<span id="cb142-2"><a href="데이터-랭글링.html#cb142-2" tabindex="-1"></a><span class="fu">head</span>(sentences)</span>
<span id="cb142-3"><a href="데이터-랭글링.html#cb142-3" tabindex="-1"></a>color <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;purple&quot;</span>)</span>
<span id="cb142-4"><a href="데이터-랭글링.html#cb142-4" tabindex="-1"></a>color_match <span class="ot">&lt;-</span> <span class="fu">str_c</span>(color, <span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>)           <span class="co"># 색상 벡터를 하나의 정규 표현식으로 변환</span></span>
<span id="cb142-5"><a href="데이터-랭글링.html#cb142-5" tabindex="-1"></a></span>
<span id="cb142-6"><a href="데이터-랭글링.html#cb142-6" tabindex="-1"></a>has_color <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(sentences, color_match)       <span class="co"># 색상을 포함하는 문장 추출</span></span>
<span id="cb142-7"><a href="데이터-랭글링.html#cb142-7" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(has_color, color_match)        <span class="co"># 일치하는 텍스트 추출</span></span>
<span id="cb142-8"><a href="데이터-랭글링.html#cb142-8" tabindex="-1"></a></span>
<span id="cb142-9"><a href="데이터-랭글링.html#cb142-9" tabindex="-1"></a><span class="co"># str_extract() 함수는 처음 일치하는 패턴만 추출</span></span>
<span id="cb142-10"><a href="데이터-랭글링.html#cb142-10" tabindex="-1"></a>more <span class="ot">&lt;-</span> sentences[<span class="fu">str_count</span>(sentences, color_match) <span class="sc">&gt;</span> <span class="dv">1</span>]</span>
<span id="cb142-11"><a href="데이터-랭글링.html#cb142-11" tabindex="-1"></a><span class="fu">str_view</span>(more, color_match)</span>
<span id="cb142-12"><a href="데이터-랭글링.html#cb142-12" tabindex="-1"></a><span class="fu">str_extract</span>(more, color_match)</span>
<span id="cb142-13"><a href="데이터-랭글링.html#cb142-13" tabindex="-1"></a></span>
<span id="cb142-14"><a href="데이터-랭글링.html#cb142-14" tabindex="-1"></a><span class="co"># str_extract_all() 함수는 모든 일치하는 패턴을 추출 → 리스트 반환</span></span>
<span id="cb142-15"><a href="데이터-랭글링.html#cb142-15" tabindex="-1"></a><span class="fu">str_extract_all</span>(more, color_match)</span>
<span id="cb142-16"><a href="데이터-랭글링.html#cb142-16" tabindex="-1"></a><span class="fu">str_extract_all</span>(more, color_match, <span class="at">simplify =</span> <span class="cn">TRUE</span>)   <span class="co"># 행렬로 반환 가능</span></span></code></pre></div>
<p><br></p>
</div>
<div id="str_replace-str_replace_all-함수" class="section level4 hasAnchor" number="6.4.4.5">
<h4><span class="header-section-number">6.4.4.5</span> str_replace(), str_replace_all() 함수<a href="데이터-랭글링.html#str_replace-str_replace_all-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>일치하는 패턴을 새 문자열로 변경</li>
</ul>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="데이터-랭글링.html#cb143-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb143-2"><a href="데이터-랭글링.html#cb143-2" tabindex="-1"></a><span class="co"># 모음을 - 기호로 변경</span></span>
<span id="cb143-3"><a href="데이터-랭글링.html#cb143-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;pear&quot;</span>, <span class="st">&quot;banana&quot;</span>)</span>
<span id="cb143-4"><a href="데이터-랭글링.html#cb143-4" tabindex="-1"></a><span class="fu">str_replace</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)          <span class="co"># 처음 일치하는 패턴만 변경</span></span>
<span id="cb143-5"><a href="데이터-랭글링.html#cb143-5" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)      <span class="co"># 모든 일치하는 패턴을 변경</span></span>
<span id="cb143-6"><a href="데이터-랭글링.html#cb143-6" tabindex="-1"></a></span>
<span id="cb143-7"><a href="데이터-랭글링.html#cb143-7" tabindex="-1"></a></span>
<span id="cb143-8"><a href="데이터-랭글링.html#cb143-8" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb143-9"><a href="데이터-랭글링.html#cb143-9" tabindex="-1"></a><span class="co"># 벡터를 이용하여 여러 패턴을 한 번에 변경 가능(multiple replacement)</span></span>
<span id="cb143-10"><a href="데이터-랭글링.html#cb143-10" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1 house&quot;</span>, <span class="st">&quot;2 cars&quot;</span>, <span class="st">&quot;3 people&quot;</span>)</span>
<span id="cb143-11"><a href="데이터-랭글링.html#cb143-11" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;one&quot;</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;two&quot;</span>, <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;three&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="str_split-함수" class="section level4 hasAnchor" number="6.4.4.6">
<h4><span class="header-section-number">6.4.4.6</span> str_split() 함수<a href="데이터-랭글링.html#str_split-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열을 일정한 기준(패턴 또는 경계)으로 나누어 분할</li>
<li>각 문자열마다 조각 수가 다르므로, 결과는 리스트로 반환됨</li>
<li>매개변수 <code>simplify = TRUE</code> - 가장 긴 조각 수에 맞춰 확장하여 행렬로 반환</li>
<li><code>boundary</code> 함수를 사용하여 문자(character), 줄(line_break), 문장(sentence), 단어(word)를 경계로 분할 가능</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="데이터-랭글링.html#cb144-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb144-2"><a href="데이터-랭글링.html#cb144-2" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">&quot; &quot;</span>)</span>
<span id="cb144-3"><a href="데이터-랭글링.html#cb144-3" tabindex="-1"></a>sentences <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">&quot; &quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span>
<span id="cb144-4"><a href="데이터-랭글링.html#cb144-4" tabindex="-1"></a></span>
<span id="cb144-5"><a href="데이터-랭글링.html#cb144-5" tabindex="-1"></a></span>
<span id="cb144-6"><a href="데이터-랭글링.html#cb144-6" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb144-7"><a href="데이터-랭글링.html#cb144-7" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;This is a sentence. This is another sentence.&quot;</span></span>
<span id="cb144-8"><a href="데이터-랭글링.html#cb144-8" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;word&quot;</span>))</span>
<span id="cb144-9"><a href="데이터-랭글링.html#cb144-9" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;sentence&quot;</span>))</span>
<span id="cb144-10"><a href="데이터-랭글링.html#cb144-10" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;line_break&quot;</span>))</span>
<span id="cb144-11"><a href="데이터-랭글링.html#cb144-11" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="fu">boundary</span>(<span class="st">&quot;character&quot;</span>))</span></code></pre></div>
<p><br></p>
<hr />
</div>
</div>
</div>
<div id="forcats-패키지" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> forcats 패키지<a href="데이터-랭글링.html#forcats-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="forcats-패키지-소개" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> forcats 패키지 소개<a href="데이터-랭글링.html#forcats-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>팩터(factor)를 다루는 함수를 제공하는 패키지
<ul>
<li>팩터는 범주형 변수에 사용하는 데이터 객체로, 문자형보다 다루기 더 쉬움</li>
<li>범주형 변수는 가질 수 있는 값이 미리 고정되고 알려져 있음</li>
<li>문자형 벡터를 알파벳순이 아닌 순서로 표현하고 싶을 때 유용</li>
</ul></li>
<li>[예제] 종합사회조사(General Social Survey) 데이터셋 gss_cat
<ul>
<li>시카고 대학교 독립연구기관 NORC에서 장기간 수행한 General Social Survey의 샘플 데이터</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">변수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">year</td>
<td align="left">조사 연도, 2000~2014년(2년 주기)</td>
</tr>
<tr class="even">
<td align="center">marital</td>
<td align="left">결혼 상태</td>
</tr>
<tr class="odd">
<td align="center">age</td>
<td align="left">연령</td>
</tr>
<tr class="even">
<td align="center">race</td>
<td align="left">인종</td>
</tr>
<tr class="odd">
<td align="center">rincome</td>
<td align="left">소득</td>
</tr>
<tr class="even">
<td align="center">partyid</td>
<td align="left">정치 성향</td>
</tr>
<tr class="odd">
<td align="center">relig</td>
<td align="left">종교</td>
</tr>
<tr class="even">
<td align="center">denom</td>
<td align="left">교파</td>
</tr>
<tr class="odd">
<td align="center">tvhours</td>
<td align="left">하루 TV 시청 시간</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="데이터-랭글링.html#cb145-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb145-2"><a href="데이터-랭글링.html#cb145-2" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span> glimpse</span></code></pre></div>
<p><br></p>
</div>
<div id="팩터-수준levels-재정렬" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> 팩터 수준(levels) 재정렬<a href="데이터-랭글링.html#팩터-수준levels-재정렬" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">fct_inorder()</td>
<td align="left">데이터에 나타난 순서대로 팩터 수준을 재정렬</td>
</tr>
<tr class="even">
<td align="center">fct_infreq()</td>
<td align="left">빈도가 높은 수준부터 순서대로 재정렬</td>
</tr>
<tr class="odd">
<td align="center">fct_inseq()</td>
<td align="left">수준을 숫자로 변환 가능한 경우, 작은 수부터 재정렬</td>
</tr>
<tr class="even">
<td align="center">fct_rev()</td>
<td align="left">팩터 수준의 순서를 반대로 뒤집어 재정렬</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="데이터-랭글링.html#cb146-1" tabindex="-1"></a><span class="do">## fct_inorder(), fct_infreq() 예제</span></span>
<span id="cb146-2"><a href="데이터-랭글링.html#cb146-2" tabindex="-1"></a>fct1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>))</span>
<span id="cb146-3"><a href="데이터-랭글링.html#cb146-3" tabindex="-1"></a><span class="fu">fct_inorder</span>(fct1)                                     <span class="co"># Levels: b a c</span></span>
<span id="cb146-4"><a href="데이터-랭글링.html#cb146-4" tabindex="-1"></a><span class="fu">fct_infreq</span>(fct1)                                      <span class="co"># Levels: c b a</span></span>
<span id="cb146-5"><a href="데이터-랭글링.html#cb146-5" tabindex="-1"></a></span>
<span id="cb146-6"><a href="데이터-랭글링.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="데이터-랭글링.html#cb146-7" tabindex="-1"></a><span class="do">## inseq() 예제</span></span>
<span id="cb146-8"><a href="데이터-랭글링.html#cb146-8" tabindex="-1"></a>fct2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;1&quot;</span>))</span>
<span id="cb146-9"><a href="데이터-랭글링.html#cb146-9" tabindex="-1"></a><span class="fu">fct_inseq</span>(fct2)                                       <span class="co"># Levels : 1 2 3</span></span>
<span id="cb146-10"><a href="데이터-랭글링.html#cb146-10" tabindex="-1"></a></span>
<span id="cb146-11"><a href="데이터-랭글링.html#cb146-11" tabindex="-1"></a></span>
<span id="cb146-12"><a href="데이터-랭글링.html#cb146-12" tabindex="-1"></a><span class="do">## inrev() 예제</span></span>
<span id="cb146-13"><a href="데이터-랭글링.html#cb146-13" tabindex="-1"></a><span class="fu">fct_rev</span>(fct1)                                         <span class="co"># Levels : c b a</span></span>
<span id="cb146-14"><a href="데이터-랭글링.html#cb146-14" tabindex="-1"></a><span class="fu">fct_rev</span>(fct2)                                         <span class="co"># Levels : 1 3 2</span></span>
<span id="cb146-15"><a href="데이터-랭글링.html#cb146-15" tabindex="-1"></a></span>
<span id="cb146-16"><a href="데이터-랭글링.html#cb146-16" tabindex="-1"></a></span>
<span id="cb146-17"><a href="데이터-랭글링.html#cb146-17" tabindex="-1"></a><span class="do">## Excample</span></span>
<span id="cb146-18"><a href="데이터-랭글링.html#cb146-18" tabindex="-1"></a><span class="co"># fct_infreq(), fct_rev() 함수를 조합하여 marital 수준을 빈도 기준으로 내림차순 정렬</span></span>
<span id="cb146-19"><a href="데이터-랭글링.html#cb146-19" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb146-20"><a href="데이터-랭글링.html#cb146-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital =</span> marital <span class="sc">%&gt;%</span> <span class="fu">fct_infreq</span>() <span class="sc">%&gt;%</span> <span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb146-21"><a href="데이터-랭글링.html#cb146-21" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(marital)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><br></p>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">fct_reorder()</td>
<td align="left">특정 변수를 기준으로 팩터 수준을 재정렬</td>
</tr>
<tr class="even">
<td align="center">fct_relevel()</td>
<td align="left">지정한 수준을 앞쪽(처음)으로 이동하여 재정렬</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="데이터-랭글링.html#cb147-1" tabindex="-1"></a><span class="do">## fct_reorder() 예제</span></span>
<span id="cb147-2"><a href="데이터-랭글링.html#cb147-2" tabindex="-1"></a><span class="co"># 결혼 상태에 따른 하루 평균 TV 시청 시간</span></span>
<span id="cb147-3"><a href="데이터-랭글링.html#cb147-3" tabindex="-1"></a>summary1 <span class="ot">&lt;-</span> gss_cat <span class="sc">%&gt;%</span> </span>
<span id="cb147-4"><a href="데이터-랭글링.html#cb147-4" tabindex="-1"></a>              <span class="fu">group_by</span>(marital) <span class="sc">%&gt;%</span> </span>
<span id="cb147-5"><a href="데이터-랭글링.html#cb147-5" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">tvhours =</span> <span class="fu">mean</span>(tvhours, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb147-6"><a href="데이터-랭글링.html#cb147-6" tabindex="-1"></a>                        <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb147-7"><a href="데이터-랭글링.html#cb147-7" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">marital =</span> <span class="fu">fct_reorder</span>(marital, tvhours))</span>
<span id="cb147-8"><a href="데이터-랭글링.html#cb147-8" tabindex="-1"></a></span>
<span id="cb147-9"><a href="데이터-랭글링.html#cb147-9" tabindex="-1"></a><span class="do">## [그래프를 통한 확인]</span></span>
<span id="cb147-10"><a href="데이터-랭글링.html#cb147-10" tabindex="-1"></a><span class="co"># 하루 평균 TV 시청 시간을 기준으로 marital 수준이 재정렬됨</span></span>
<span id="cb147-11"><a href="데이터-랭글링.html#cb147-11" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb147-12"><a href="데이터-랭글링.html#cb147-12" tabindex="-1"></a><span class="fu">ggplot</span>(summary1, <span class="fu">aes</span>(tvhours, marital)) <span class="sc">+</span></span>
<span id="cb147-13"><a href="데이터-랭글링.html#cb147-13" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-115-1.png" width="672" /></p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="데이터-랭글링.html#cb148-1" tabindex="-1"></a><span class="do">## fct_relevel() 예제</span></span>
<span id="cb148-2"><a href="데이터-랭글링.html#cb148-2" tabindex="-1"></a><span class="co"># 소득에 따른 평균 연령</span></span>
<span id="cb148-3"><a href="데이터-랭글링.html#cb148-3" tabindex="-1"></a>summary2 <span class="ot">&lt;-</span> gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb148-4"><a href="데이터-랭글링.html#cb148-4" tabindex="-1"></a>              <span class="fu">group_by</span>(rincome) <span class="sc">%&gt;%</span></span>
<span id="cb148-5"><a href="데이터-랭글링.html#cb148-5" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb148-6"><a href="데이터-랭글링.html#cb148-6" tabindex="-1"></a></span>
<span id="cb148-7"><a href="데이터-랭글링.html#cb148-7" tabindex="-1"></a><span class="do">## [그래프를 통한 확인]</span></span>
<span id="cb148-8"><a href="데이터-랭글링.html#cb148-8" tabindex="-1"></a><span class="co"># reorder() 함수를 사용하면 어떤 소득 집단이 평균 연령이 가장 높고 낮은지 파악하기 쉬우나,</span></span>
<span id="cb148-9"><a href="데이터-랭글링.html#cb148-9" tabindex="-1"></a><span class="co"># rincome 변수는 순서형 변수(ordinal variable)이기 때문에 이는 바람직하지 않음</span></span>
<span id="cb148-10"><a href="데이터-랭글링.html#cb148-10" tabindex="-1"></a><span class="co"># relevel() 함수를 사용하여 &quot;Not applicable&quot; 수준을 앞쪽(처음)으로 이동할 수 있음</span></span>
<span id="cb148-11"><a href="데이터-랭글링.html#cb148-11" tabindex="-1"></a><span class="co">#ggplot(summary2, aes(age, fct_reorder(rincome, age))) + geom_point()</span></span>
<span id="cb148-12"><a href="데이터-랭글링.html#cb148-12" tabindex="-1"></a><span class="fu">ggplot</span>(summary2, <span class="fu">aes</span>(age, <span class="fu">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>))) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-116-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="팩터-수준levels-변경" class="section level3 hasAnchor" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> 팩터 수준(levels) 변경<a href="데이터-랭글링.html#팩터-수준levels-변경" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">fct_recode()</td>
<td align="left">- 명시적으로 언급되지 않은 수준은 그대로 유지됨 <br>- 여러 수준을 하나로 묶으려면 동일한 새 수준에 할당 <br>※ 주의: 서로 다른 범주를 잘못 묶으면 결과가 왜곡될 수 있음</td>
</tr>
<tr class="even">
<td align="center">fct_collapse()</td>
<td align="left">- 여러 수준을 하나의 집단으로 병합 <br>- 새 수준에 대해 기존 수준들의 벡터를 지정</td>
</tr>
<tr class="odd">
<td align="center">fct_lump()</td>
<td align="left">- 상대적으로 빈도가 낮은 수준을 묶어 <code>"Other"</code>로 병합 <br>- 매개변수 <code>n</code> - <code>"Other"</code>를 제외한 수준의 개수 설정 <br>- 매개변수 <code>prop</code> - <code>"Other"</code>로 묶을 수준의 전체 비중 기준을 설정</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="데이터-랭글링.html#cb149-1" tabindex="-1"></a><span class="do">## fct_recode() 예제1</span></span>
<span id="cb149-2"><a href="데이터-랭글링.html#cb149-2" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-3"><a href="데이터-랭글링.html#cb149-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb149-4"><a href="데이터-랭글링.html#cb149-4" tabindex="-1"></a>                              <span class="st">&quot;Republican, strong&quot;</span>    <span class="ot">=</span> <span class="st">&quot;Strong republican&quot;</span>,</span>
<span id="cb149-5"><a href="데이터-랭글링.html#cb149-5" tabindex="-1"></a>                              <span class="st">&quot;Republican, weak&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Not str republican&quot;</span>,</span>
<span id="cb149-6"><a href="데이터-랭글링.html#cb149-6" tabindex="-1"></a>                              <span class="st">&quot;Independent, near rep&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near rep&quot;</span>,</span>
<span id="cb149-7"><a href="데이터-랭글링.html#cb149-7" tabindex="-1"></a>                              <span class="st">&quot;Independent, near dem&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near dem&quot;</span>,</span>
<span id="cb149-8"><a href="데이터-랭글링.html#cb149-8" tabindex="-1"></a>                              <span class="st">&quot;Democrat, weak&quot;</span>        <span class="ot">=</span> <span class="st">&quot;Not str democrat&quot;</span>,</span>
<span id="cb149-9"><a href="데이터-랭글링.html#cb149-9" tabindex="-1"></a>                              <span class="st">&quot;Democrat, strong&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Strong democrat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb149-10"><a href="데이터-랭글링.html#cb149-10" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb149-11"><a href="데이터-랭글링.html#cb149-11" tabindex="-1"></a></span>
<span id="cb149-12"><a href="데이터-랭글링.html#cb149-12" tabindex="-1"></a></span>
<span id="cb149-13"><a href="데이터-랭글링.html#cb149-13" tabindex="-1"></a><span class="do">## fct_recode() 예제2</span></span>
<span id="cb149-14"><a href="데이터-랭글링.html#cb149-14" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-15"><a href="데이터-랭글링.html#cb149-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb149-16"><a href="데이터-랭글링.html#cb149-16" tabindex="-1"></a>                              <span class="st">&quot;Republican, strong&quot;</span>    <span class="ot">=</span> <span class="st">&quot;Strong republican&quot;</span>,</span>
<span id="cb149-17"><a href="데이터-랭글링.html#cb149-17" tabindex="-1"></a>                              <span class="st">&quot;Republican, weak&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Not str republican&quot;</span>,</span>
<span id="cb149-18"><a href="데이터-랭글링.html#cb149-18" tabindex="-1"></a>                              <span class="st">&quot;Independent, near rep&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near rep&quot;</span>,</span>
<span id="cb149-19"><a href="데이터-랭글링.html#cb149-19" tabindex="-1"></a>                              <span class="st">&quot;Independent, near dem&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near dem&quot;</span>,</span>
<span id="cb149-20"><a href="데이터-랭글링.html#cb149-20" tabindex="-1"></a>                              <span class="st">&quot;Democrat, weak&quot;</span>        <span class="ot">=</span> <span class="st">&quot;Not str democrat&quot;</span>,</span>
<span id="cb149-21"><a href="데이터-랭글링.html#cb149-21" tabindex="-1"></a>                              <span class="st">&quot;Democrat, strong&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Strong democrat&quot;</span>,</span>
<span id="cb149-22"><a href="데이터-랭글링.html#cb149-22" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;No answer&quot;</span>,</span>
<span id="cb149-23"><a href="데이터-랭글링.html#cb149-23" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;Don&#39;t know&quot;</span>,</span>
<span id="cb149-24"><a href="데이터-랭글링.html#cb149-24" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;Other party&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb149-25"><a href="데이터-랭글링.html#cb149-25" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb149-26"><a href="데이터-랭글링.html#cb149-26" tabindex="-1"></a></span>
<span id="cb149-27"><a href="데이터-랭글링.html#cb149-27" tabindex="-1"></a></span>
<span id="cb149-28"><a href="데이터-랭글링.html#cb149-28" tabindex="-1"></a><span class="do">## fct_collapse() 예제1</span></span>
<span id="cb149-29"><a href="데이터-랭글링.html#cb149-29" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-30"><a href="데이터-랭글링.html#cb149-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_collapse</span>(partyid,</span>
<span id="cb149-31"><a href="데이터-랭글링.html#cb149-31" tabindex="-1"></a>                                <span class="at">other =</span> <span class="fu">c</span>(<span class="st">&quot;No answer&quot;</span>, <span class="st">&quot;Don&#39;t know&quot;</span>, <span class="st">&quot;Other party&quot;</span>),</span>
<span id="cb149-32"><a href="데이터-랭글링.html#cb149-32" tabindex="-1"></a>                                <span class="at">rep =</span> <span class="fu">c</span>(<span class="st">&quot;Strong republican&quot;</span>, <span class="st">&quot;Not str republican&quot;</span>),</span>
<span id="cb149-33"><a href="데이터-랭글링.html#cb149-33" tabindex="-1"></a>                                <span class="at">ind =</span> <span class="fu">c</span>(<span class="st">&quot;Ind,near rep&quot;</span>, <span class="st">&quot;Independent&quot;</span>, <span class="st">&quot;Ind,near dem&quot;</span>),</span>
<span id="cb149-34"><a href="데이터-랭글링.html#cb149-34" tabindex="-1"></a>                                <span class="at">dem =</span> <span class="fu">c</span>(<span class="st">&quot;Not str democrat&quot;</span>, <span class="st">&quot;Strong democrat&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb149-35"><a href="데이터-랭글링.html#cb149-35" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb149-36"><a href="데이터-랭글링.html#cb149-36" tabindex="-1"></a></span>
<span id="cb149-37"><a href="데이터-랭글링.html#cb149-37" tabindex="-1"></a></span>
<span id="cb149-38"><a href="데이터-랭글링.html#cb149-38" tabindex="-1"></a><span class="do">## fct_lump() 예제1</span></span>
<span id="cb149-39"><a href="데이터-랭글링.html#cb149-39" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-40"><a href="데이터-랭글링.html#cb149-40" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_lump</span>(relig)) <span class="sc">%&gt;%</span></span>
<span id="cb149-41"><a href="데이터-랭글링.html#cb149-41" tabindex="-1"></a>  <span class="fu">count</span>(relig)</span>
<span id="cb149-42"><a href="데이터-랭글링.html#cb149-42" tabindex="-1"></a></span>
<span id="cb149-43"><a href="데이터-랭글링.html#cb149-43" tabindex="-1"></a></span>
<span id="cb149-44"><a href="데이터-랭글링.html#cb149-44" tabindex="-1"></a><span class="do">## fct_lump() 예제2</span></span>
<span id="cb149-45"><a href="데이터-랭글링.html#cb149-45" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-46"><a href="데이터-랭글링.html#cb149-46" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_lump</span>(relig, <span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb149-47"><a href="데이터-랭글링.html#cb149-47" tabindex="-1"></a>  <span class="fu">count</span>(relig, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb149-48"><a href="데이터-랭글링.html#cb149-48" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span>
<span id="cb149-49"><a href="데이터-랭글링.html#cb149-49" tabindex="-1"></a></span>
<span id="cb149-50"><a href="데이터-랭글링.html#cb149-50" tabindex="-1"></a></span>
<span id="cb149-51"><a href="데이터-랭글링.html#cb149-51" tabindex="-1"></a><span class="do">## fct_lump() 예제3</span></span>
<span id="cb149-52"><a href="데이터-랭글링.html#cb149-52" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb149-53"><a href="데이터-랭글링.html#cb149-53" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_lump</span>(relig, <span class="at">prop =</span> <span class="fl">0.05</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb149-54"><a href="데이터-랭글링.html#cb149-54" tabindex="-1"></a>  <span class="fu">count</span>(relig, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb149-55"><a href="데이터-랭글링.html#cb149-55" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<p><br></p>
<hr />
</div>
</div>
<div id="lubridate-패키지" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> lubridate 패키지<a href="데이터-랭글링.html#lubridate-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lubridate-패키지-소개" class="section level3 hasAnchor" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> lubridate 패키지 소개<a href="데이터-랭글링.html#lubridate-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>날짜, 시간을 다루는 함수를 제공하는 패키지</li>
<li>핵심 <code>tidyverse</code>에 포함되지 않으므로 별도로 불러와야 함</li>
<li>시간 정보만 다루고 싶을 때는 <code>hms</code> 패키지를 사용</li>
</ul>
<p><br></p>
</div>
<div id="날짜시간-생성" class="section level3 hasAnchor" number="6.6.2">
<h3><span class="header-section-number">6.6.2</span> 날짜/시간 생성<a href="데이터-랭글링.html#날짜시간-생성" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="날짜시간-유형" class="section level4 hasAnchor" number="6.6.2.1">
<h4><span class="header-section-number">6.6.2.1</span> 날짜/시간 유형<a href="데이터-랭글링.html#날짜시간-유형" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">유형</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">date</td>
<td align="left">- 날짜를 나타내며, tibble에서 &lt;date&gt;로 출력</td>
</tr>
<tr class="even">
<td align="center">time</td>
<td align="left">- 하루 중 시간을 나타내며, tibble에서 &lt;time&gt;로 출력</td>
</tr>
<tr class="odd">
<td align="center">date-time</td>
<td align="left">- 날짜와 시간을 나타내며, tibble에서 &lt;dttm&gt;로 출력 <br>- 시점을 고유하게 식별</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="데이터-랭글링.html#cb150-1" tabindex="-1"></a><span class="fu">today</span>()                                 <span class="co"># 오늘 날짜(date)</span></span>
<span id="cb150-2"><a href="데이터-랭글링.html#cb150-2" tabindex="-1"></a><span class="fu">now</span>()                                   <span class="co"># 현재 날짜 및 시간(date-time)</span></span></code></pre></div>
<p><br></p>
</div>
<div id="문자열string로부터-생성" class="section level4 hasAnchor" number="6.6.2.2">
<h4><span class="header-section-number">6.6.2.2</span> 문자열(string)로부터 생성<a href="데이터-랭글링.html#문자열string로부터-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 연(year), 월(month), 일(day)의 순서를 파악한 후, “y”, “m”, “d”를 그 순서대로 함수 이름에 사용</li>
<li><code>date-time</code>을 생성하려면 함수 이름에 <code>_</code>와 “h”, “m”, “s” 중 하나 이상을 추가함</li>
</ul>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="데이터-랭글링.html#cb151-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb151-2"><a href="데이터-랭글링.html#cb151-2" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2025-03-02&quot;</span>)</span>
<span id="cb151-3"><a href="데이터-랭글링.html#cb151-3" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">&quot;March 2nd, 2025&quot;</span>)</span>
<span id="cb151-4"><a href="데이터-랭글링.html#cb151-4" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&quot;02-Mar-2025&quot;</span>)</span>
<span id="cb151-5"><a href="데이터-랭글링.html#cb151-5" tabindex="-1"></a></span>
<span id="cb151-6"><a href="데이터-랭글링.html#cb151-6" tabindex="-1"></a><span class="fu">ymd_hms</span>(<span class="st">&quot;2025-03-02 12:34:59&quot;</span>)</span>
<span id="cb151-7"><a href="데이터-랭글링.html#cb151-7" tabindex="-1"></a><span class="fu">mdy_hm</span>(<span class="st">&quot;03/31/2025 18:30&quot;</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="개별-구성요소로부터-생성" class="section level4 hasAnchor" number="6.6.2.3">
<h4><span class="header-section-number">6.6.2.3</span> 개별 구성요소로부터 생성<a href="데이터-랭글링.html#개별-구성요소로부터-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>날짜/시간의 개별 구성요소들이 여러 열(변수)에 저장되어 있는 경우 <code>make_date()</code>, <code>make_datetime()</code> 함수 사용</li>
</ul>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="데이터-랭글링.html#cb152-1" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb152-2"><a href="데이터-랭글링.html#cb152-2" tabindex="-1"></a></span>
<span id="cb152-3"><a href="데이터-랭글링.html#cb152-3" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb152-4"><a href="데이터-랭글링.html#cb152-4" tabindex="-1"></a><span class="co"># 예정된 출발 일시를 date-time 형식으로 생성</span></span>
<span id="cb152-5"><a href="데이터-랭글링.html#cb152-5" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb152-6"><a href="데이터-랭글링.html#cb152-6" tabindex="-1"></a>  <span class="fu">select</span>(year, month, day, hour, minute) <span class="sc">%&gt;%</span> </span>
<span id="cb152-7"><a href="데이터-랭글링.html#cb152-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">departure =</span> <span class="fu">make_datetime</span>(year, month, day, hour, minute))</span>
<span id="cb152-8"><a href="데이터-랭글링.html#cb152-8" tabindex="-1"></a></span>
<span id="cb152-9"><a href="데이터-랭글링.html#cb152-9" tabindex="-1"></a></span>
<span id="cb152-10"><a href="데이터-랭글링.html#cb152-10" tabindex="-1"></a><span class="do">## Example2</span></span>
<span id="cb152-11"><a href="데이터-랭글링.html#cb152-11" tabindex="-1"></a><span class="co"># 예정된 도착 일시, 실제 출발 일시, 실제 도착 일시를 date-time 형식으로 생성</span></span>
<span id="cb152-12"><a href="데이터-랭글링.html#cb152-12" tabindex="-1"></a><span class="co"># → sched_arr_time, dep_time, arr_time은 HHMM 또는 HMM 형식으로 되어 있어,</span></span>
<span id="cb152-13"><a href="데이터-랭글링.html#cb152-13" tabindex="-1"></a><span class="co">#   시(hour)와 분(minute)을 각각 분리하여 추출해야 함</span></span>
<span id="cb152-14"><a href="데이터-랭글링.html#cb152-14" tabindex="-1"></a>make_datetime_100 <span class="ot">&lt;-</span> <span class="cf">function</span>(year, month, day, time) {</span>
<span id="cb152-15"><a href="데이터-랭글링.html#cb152-15" tabindex="-1"></a>  <span class="fu">make_datetime</span>(year, month, day, time <span class="sc">%/%</span> <span class="dv">100</span>, time <span class="sc">%%</span> <span class="dv">100</span>)</span>
<span id="cb152-16"><a href="데이터-랭글링.html#cb152-16" tabindex="-1"></a>}</span>
<span id="cb152-17"><a href="데이터-랭글링.html#cb152-17" tabindex="-1"></a></span>
<span id="cb152-18"><a href="데이터-랭글링.html#cb152-18" tabindex="-1"></a>flights_dt <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb152-19"><a href="데이터-랭글링.html#cb152-19" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_time), <span class="sc">!</span><span class="fu">is.na</span>(arr_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb152-20"><a href="데이터-랭글링.html#cb152-20" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, dep_time),</span>
<span id="cb152-21"><a href="데이터-랭글링.html#cb152-21" tabindex="-1"></a>         <span class="at">arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, arr_time),</span>
<span id="cb152-22"><a href="데이터-랭글링.html#cb152-22" tabindex="-1"></a>         <span class="at">sched_dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_dep_time),</span>
<span id="cb152-23"><a href="데이터-랭글링.html#cb152-23" tabindex="-1"></a>         <span class="at">sched_arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_arr_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb152-24"><a href="데이터-랭글링.html#cb152-24" tabindex="-1"></a>  <span class="fu">select</span>(origin, dest, <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>), <span class="fu">ends_with</span>(<span class="st">&quot;time&quot;</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="기존의-날짜시간로부터-생성" class="section level4 hasAnchor" number="6.6.2.4">
<h4><span class="header-section-number">6.6.2.4</span> 기존의 날짜/시간로부터 생성<a href="데이터-랭글링.html#기존의-날짜시간로부터-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>date</code>와 <code>date-time</code> 간 상호 전환이 필요한 경우 <code>as_datetime()</code>, <code>as_date()</code> 함수 사용</li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="데이터-랭글링.html#cb153-1" tabindex="-1"></a><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span>
<span id="cb153-2"><a href="데이터-랭글링.html#cb153-2" tabindex="-1"></a><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
<p><br></p>
</div>
</div>
<div id="날짜시간-구성요소" class="section level3 hasAnchor" number="6.6.3">
<h3><span class="header-section-number">6.6.3</span> 날짜/시간 구성요소<a href="데이터-랭글링.html#날짜시간-구성요소" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<thead>
<tr class="header">
<th align="center">함수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">year()</td>
<td align="left">연도(year) 추출</td>
</tr>
<tr class="even">
<td align="center">month()</td>
<td align="left">월(month) 추출</td>
</tr>
<tr class="odd">
<td align="center">week()</td>
<td align="left">주(week) 추출</td>
</tr>
<tr class="even">
<td align="center">day()</td>
<td align="left">일(day) 추출</td>
</tr>
<tr class="odd">
<td align="center">hour()</td>
<td align="left">시(hour) 추출</td>
</tr>
<tr class="even">
<td align="center">minute()</td>
<td align="left">분(minute) 추출</td>
</tr>
<tr class="odd">
<td align="center">second()</td>
<td align="left">초(second) 추출</td>
</tr>
<tr class="even">
<td align="center">yday()</td>
<td align="left">해당 연도의 몇 번째 일(day)인지 반환</td>
</tr>
<tr class="odd">
<td align="center">mday()</td>
<td align="left">해당 월의 몇 번째 일(day)인지 반환</td>
</tr>
<tr class="even">
<td align="center">wday()</td>
<td align="left">해당 주의 무슨 요일(1=일요일, 7=토요일)인지 반환</td>
</tr>
</tbody>
</table>
<p><br></p>
<ul>
<li><code>month()</code>, <code>wday()</code> 함수 관련 매개변수
<ul>
<li>매개변수 <code>label</code> - TRUE이면 문자열, FALSE이면 숫자로 표시</li>
<li>매개변수 <code>abbr</code> - FALSE이면 이름 전체 반환(label이 FALSE인 경우 무시)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="데이터-랭글링.html#cb154-1" tabindex="-1"></a>datetime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2025-05-19 12:34:56&quot;</span>)</span>
<span id="cb154-2"><a href="데이터-랭글링.html#cb154-2" tabindex="-1"></a></span>
<span id="cb154-3"><a href="데이터-랭글링.html#cb154-3" tabindex="-1"></a><span class="fu">year</span>(datetime)</span>
<span id="cb154-4"><a href="데이터-랭글링.html#cb154-4" tabindex="-1"></a><span class="fu">month</span>(datetime)</span>
<span id="cb154-5"><a href="데이터-랭글링.html#cb154-5" tabindex="-1"></a><span class="fu">month</span>(datetime, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb154-6"><a href="데이터-랭글링.html#cb154-6" tabindex="-1"></a><span class="fu">day</span>(datetime)</span>
<span id="cb154-7"><a href="데이터-랭글링.html#cb154-7" tabindex="-1"></a><span class="fu">hour</span>(datetime)</span>
<span id="cb154-8"><a href="데이터-랭글링.html#cb154-8" tabindex="-1"></a><span class="fu">minute</span>(datetime)</span>
<span id="cb154-9"><a href="데이터-랭글링.html#cb154-9" tabindex="-1"></a><span class="fu">second</span>(datetime)</span>
<span id="cb154-10"><a href="데이터-랭글링.html#cb154-10" tabindex="-1"></a></span>
<span id="cb154-11"><a href="데이터-랭글링.html#cb154-11" tabindex="-1"></a><span class="fu">yday</span>(datetime)</span>
<span id="cb154-12"><a href="데이터-랭글링.html#cb154-12" tabindex="-1"></a><span class="fu">mday</span>(datetime)</span>
<span id="cb154-13"><a href="데이터-랭글링.html#cb154-13" tabindex="-1"></a><span class="fu">wday</span>(datetime)</span>
<span id="cb154-14"><a href="데이터-랭글링.html#cb154-14" tabindex="-1"></a><span class="fu">wday</span>(datetime, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="시간-범위time-spans" class="section level3 hasAnchor" number="6.6.4">
<h3><span class="header-section-number">6.6.4</span> 시간 범위(time spans)<a href="데이터-랭글링.html#시간-범위time-spans" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="시간-범위-유형" class="section level4 hasAnchor" number="6.6.4.1">
<h4><span class="header-section-number">6.6.4.1</span> 시간 범위 유형<a href="데이터-랭글링.html#시간-범위-유형" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th align="center">유형</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">duration</td>
<td align="left">초(second) 단위의 정확한 시간 길이를 나타냄</td>
</tr>
<tr class="even">
<td align="center">period</td>
<td align="left">주(week), 월(month) 등 사람의 단위(human units)로 표현함</td>
</tr>
<tr class="odd">
<td align="center">interval</td>
<td align="left">시작 시점과 종료 시점을 나타냄</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="duration" class="section level4 hasAnchor" number="6.6.4.2">
<h4><span class="header-section-number">6.6.4.2</span> duration<a href="데이터-랭글링.html#duration" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>date</code>에 뺄셈을 적용하면 <code>difftime</code>이 생성되며, 이는 초(second), 분(minute), 시(hour), 일(day) 또는 주(week) 단위로 시간 범위를 기록하므로 작업이 어려움</li>
<li>이를 보완하기 위한 <code>duration</code>은 항상 <strong>초(second) 단위</strong>를 사용하여 시간 범위를 나타냄
<ul>
<li>1분 = 60초, 1시간 = 3600초(60분), 1일 = 86400초(24시간), 1주일 = 604800초(7일)</li>
</ul></li>
<li><code>duration</code>은 덧셈, 뺄셈, 곱셈 연산이 가능함
<ul>
<li>윤년, 일광 절약 시간제(daylight saving time) 같은 규칙의 영향을 받기 때문에 시간(hour), 월(month), 연(year)과 같은 큰 시간 단위로 측정한 값에 대해 연산 결과가 실제와 항상 일치하지 않을 수 있음</li>
<li>[참고] 일광 절약 시간제 - 하절기에 표준시를 원래 시간보다 한 시간 앞당긴 시간을 쓰는 제도로, 미국과 캐나다에서는 각 시간대의 지역 시간을 기준으로 3월 두 번째 주 일요일 오전 2시부터 11월 첫 번째 주 일요일 오전 2시까지에 적용됨</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="데이터-랭글링.html#cb155-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb155-2"><a href="데이터-랭글링.html#cb155-2" tabindex="-1"></a><span class="co"># duration 생성</span></span>
<span id="cb155-3"><a href="데이터-랭글링.html#cb155-3" tabindex="-1"></a>dday <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">-</span> <span class="fu">ymd</span>(<span class="dv">20250302</span>)</span>
<span id="cb155-4"><a href="데이터-랭글링.html#cb155-4" tabindex="-1"></a><span class="fu">as.duration</span>(dday)</span>
<span id="cb155-5"><a href="데이터-랭글링.html#cb155-5" tabindex="-1"></a></span>
<span id="cb155-6"><a href="데이터-랭글링.html#cb155-6" tabindex="-1"></a><span class="fu">dseconds</span>(<span class="dv">15</span>)</span>
<span id="cb155-7"><a href="데이터-랭글링.html#cb155-7" tabindex="-1"></a><span class="fu">dminutes</span>(<span class="dv">10</span>)</span>
<span id="cb155-8"><a href="데이터-랭글링.html#cb155-8" tabindex="-1"></a><span class="fu">dhours</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">24</span>))</span>
<span id="cb155-9"><a href="데이터-랭글링.html#cb155-9" tabindex="-1"></a><span class="fu">ddays</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb155-10"><a href="데이터-랭글링.html#cb155-10" tabindex="-1"></a><span class="fu">dweeks</span>(<span class="dv">3</span>)</span>
<span id="cb155-11"><a href="데이터-랭글링.html#cb155-11" tabindex="-1"></a><span class="fu">dmonths</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb155-12"><a href="데이터-랭글링.html#cb155-12" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb155-13"><a href="데이터-랭글링.html#cb155-13" tabindex="-1"></a></span>
<span id="cb155-14"><a href="데이터-랭글링.html#cb155-14" tabindex="-1"></a></span>
<span id="cb155-15"><a href="데이터-랭글링.html#cb155-15" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb155-16"><a href="데이터-랭글링.html#cb155-16" tabindex="-1"></a><span class="co"># 덧셈, 뺄셈, 곱셈 연산</span></span>
<span id="cb155-17"><a href="데이터-랭글링.html#cb155-17" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">dweeks</span>(<span class="dv">12</span>) <span class="sc">+</span> <span class="fu">dhours</span>(<span class="dv">15</span>)</span>
<span id="cb155-18"><a href="데이터-랭글링.html#cb155-18" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb155-19"><a href="데이터-랭글링.html#cb155-19" tabindex="-1"></a></span>
<span id="cb155-20"><a href="데이터-랭글링.html#cb155-20" tabindex="-1"></a>tomorrow <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">1</span>)</span>
<span id="cb155-21"><a href="데이터-랭글링.html#cb155-21" tabindex="-1"></a>last_year <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">-</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb155-22"><a href="데이터-랭글링.html#cb155-22" tabindex="-1"></a></span>
<span id="cb155-23"><a href="데이터-랭글링.html#cb155-23" tabindex="-1"></a></span>
<span id="cb155-24"><a href="데이터-랭글링.html#cb155-24" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb155-25"><a href="데이터-랭글링.html#cb155-25" tabindex="-1"></a><span class="co"># 일광 절약 시간제</span></span>
<span id="cb155-26"><a href="데이터-랭글링.html#cb155-26" tabindex="-1"></a>one_pm <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2025-03-08 13:00:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/New_York&quot;</span>)</span>
<span id="cb155-27"><a href="데이터-랭글링.html#cb155-27" tabindex="-1"></a>one_pm                                  <span class="co"># &quot;2025-03-08 13:00:00 EST&quot;</span></span>
<span id="cb155-28"><a href="데이터-랭글링.html#cb155-28" tabindex="-1"></a>one_pm <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">1</span>)                       <span class="co"># &quot;2025-03-09 14:00:00 EDT&quot;</span></span></code></pre></div>
<p><br></p>
</div>
<div id="period" class="section level4 hasAnchor" number="6.6.4.3">
<h4><span class="header-section-number">6.6.4.3</span> period<a href="데이터-랭글링.html#period" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>지정된 시간 단위로 <code>period</code> 생성</li>
<li>사람이 인식하는 단위를 사용하므로, 작동 방식이 더 직관적임</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="데이터-랭글링.html#cb156-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb156-2"><a href="데이터-랭글링.html#cb156-2" tabindex="-1"></a><span class="co"># period 생성</span></span>
<span id="cb156-3"><a href="데이터-랭글링.html#cb156-3" tabindex="-1"></a><span class="fu">seconds</span>(<span class="dv">15</span>)</span>
<span id="cb156-4"><a href="데이터-랭글링.html#cb156-4" tabindex="-1"></a><span class="fu">minutes</span>(<span class="dv">10</span>)</span>
<span id="cb156-5"><a href="데이터-랭글링.html#cb156-5" tabindex="-1"></a><span class="fu">hours</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">24</span>))</span>
<span id="cb156-6"><a href="데이터-랭글링.html#cb156-6" tabindex="-1"></a><span class="fu">days</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb156-7"><a href="데이터-랭글링.html#cb156-7" tabindex="-1"></a><span class="fu">weeks</span>(<span class="dv">3</span>)</span>
<span id="cb156-8"><a href="데이터-랭글링.html#cb156-8" tabindex="-1"></a><span class="fu">months</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb156-9"><a href="데이터-랭글링.html#cb156-9" tabindex="-1"></a><span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb156-10"><a href="데이터-랭글링.html#cb156-10" tabindex="-1"></a></span>
<span id="cb156-11"><a href="데이터-랭글링.html#cb156-11" tabindex="-1"></a></span>
<span id="cb156-12"><a href="데이터-랭글링.html#cb156-12" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb156-13"><a href="데이터-랭글링.html#cb156-13" tabindex="-1"></a><span class="co"># 덧셈, 뺄셈, 곱셈 연산</span></span>
<span id="cb156-14"><a href="데이터-랭글링.html#cb156-14" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> (<span class="fu">months</span>(<span class="dv">6</span>) <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">1</span>))</span>
<span id="cb156-15"><a href="데이터-랭글링.html#cb156-15" tabindex="-1"></a><span class="fu">days</span>(<span class="dv">50</span>) <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">25</span>) <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">2</span>)</span>
<span id="cb156-16"><a href="데이터-랭글링.html#cb156-16" tabindex="-1"></a></span>
<span id="cb156-17"><a href="데이터-랭글링.html#cb156-17" tabindex="-1"></a></span>
<span id="cb156-18"><a href="데이터-랭글링.html#cb156-18" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb156-19"><a href="데이터-랭글링.html#cb156-19" tabindex="-1"></a><span class="co"># 윤년</span></span>
<span id="cb156-20"><a href="데이터-랭글링.html#cb156-20" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2024-01-01&quot;</span>) <span class="sc">+</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb156-21"><a href="데이터-랭글링.html#cb156-21" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2024-01-01&quot;</span>) <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb156-22"><a href="데이터-랭글링.html#cb156-22" tabindex="-1"></a></span>
<span id="cb156-23"><a href="데이터-랭글링.html#cb156-23" tabindex="-1"></a></span>
<span id="cb156-24"><a href="데이터-랭글링.html#cb156-24" tabindex="-1"></a><span class="do">## Example 4</span></span>
<span id="cb156-25"><a href="데이터-랭글링.html#cb156-25" tabindex="-1"></a><span class="co"># 일광 절약 시간제</span></span>
<span id="cb156-26"><a href="데이터-랭글링.html#cb156-26" tabindex="-1"></a>one_pm <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2025-03-08 13:00:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/New_York&quot;</span>)</span>
<span id="cb156-27"><a href="데이터-랭글링.html#cb156-27" tabindex="-1"></a>one_pm                                  <span class="co"># &quot;2025-03-08 13:00:00 EST&quot;</span></span>
<span id="cb156-28"><a href="데이터-랭글링.html#cb156-28" tabindex="-1"></a>one_pm <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">1</span>)                        <span class="co"># &quot;2025-03-09 13:00:00 EDT&quot;</span></span>
<span id="cb156-29"><a href="데이터-랭글링.html#cb156-29" tabindex="-1"></a></span>
<span id="cb156-30"><a href="데이터-랭글링.html#cb156-30" tabindex="-1"></a></span>
<span id="cb156-31"><a href="데이터-랭글링.html#cb156-31" tabindex="-1"></a><span class="do">## Example 5</span></span>
<span id="cb156-32"><a href="데이터-랭글링.html#cb156-32" tabindex="-1"></a><span class="co"># 자정 이후 도착한 항공편(심야 항공편)의 도착 일시에 하루(days(1))를 더해 정확한 시점을 보정</span></span>
<span id="cb156-33"><a href="데이터-랭글링.html#cb156-33" tabindex="-1"></a>flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb156-34"><a href="데이터-랭글링.html#cb156-34" tabindex="-1"></a>  <span class="fu">filter</span>(arr_time <span class="sc">&lt;</span> dep_time)</span>
<span id="cb156-35"><a href="데이터-랭글링.html#cb156-35" tabindex="-1"></a></span>
<span id="cb156-36"><a href="데이터-랭글링.html#cb156-36" tabindex="-1"></a>flights_dt <span class="ot">&lt;-</span> flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb156-37"><a href="데이터-랭글링.html#cb156-37" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overnight =</span> arr_time <span class="sc">&lt;</span> dep_time,</span>
<span id="cb156-38"><a href="데이터-랭글링.html#cb156-38" tabindex="-1"></a>         <span class="at">arr_time =</span> arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>),</span>
<span id="cb156-39"><a href="데이터-랭글링.html#cb156-39" tabindex="-1"></a>         <span class="at">sched_arr_time =</span> sched_arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>))</span>
<span id="cb156-40"><a href="데이터-랭글링.html#cb156-40" tabindex="-1"></a></span>
<span id="cb156-41"><a href="데이터-랭글링.html#cb156-41" tabindex="-1"></a>flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb156-42"><a href="데이터-랭글링.html#cb156-42" tabindex="-1"></a>  <span class="fu">filter</span>(overnight, arr_time <span class="sc">&lt;</span> dep_time)</span></code></pre></div>
<p><br></p>
</div>
<div id="interval" class="section level4 hasAnchor" number="6.6.4.4">
<h4><span class="header-section-number">6.6.4.4</span> interval<a href="데이터-랭글링.html#interval" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>interval</code>은 시작 시점과 종료 시점을 나타내며, 정확한 시간 범위를 확인할 수 있음</li>
<li><code>interval</code> 생성 - <code>ineterval()</code> 함수, <code>%--%</code> 연산자</li>
<li><code>duration</code>과의 나눗셈 연산을 통해 <code>interval</code> 기간을 확인할 수 있음</li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="데이터-랭글링.html#cb157-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb157-2"><a href="데이터-랭글링.html#cb157-2" tabindex="-1"></a><span class="co"># interval 생성</span></span>
<span id="cb157-3"><a href="데이터-랭글링.html#cb157-3" tabindex="-1"></a>next_year <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb157-4"><a href="데이터-랭글링.html#cb157-4" tabindex="-1"></a><span class="fu">interval</span>(<span class="at">start =</span> <span class="fu">today</span>(), <span class="at">end =</span> next_year)            <span class="co"># today() %--% next_year</span></span>
<span id="cb157-5"><a href="데이터-랭글링.html#cb157-5" tabindex="-1"></a></span>
<span id="cb157-6"><a href="데이터-랭글링.html#cb157-6" tabindex="-1"></a></span>
<span id="cb157-7"><a href="데이터-랭글링.html#cb157-7" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb157-8"><a href="데이터-랭글링.html#cb157-8" tabindex="-1"></a><span class="co"># interval 기간 확인</span></span>
<span id="cb157-9"><a href="데이터-랭글링.html#cb157-9" tabindex="-1"></a><span class="fu">years</span>(<span class="dv">1</span>) <span class="sc">/</span> <span class="fu">days</span>(<span class="dv">1</span>)                                    <span class="co"># 365.25</span></span>
<span id="cb157-10"><a href="데이터-랭글링.html#cb157-10" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>) <span class="sc">/</span> <span class="fu">ddays</span>(<span class="dv">1</span>)                                  <span class="co"># 365</span></span>
<span id="cb157-11"><a href="데이터-랭글링.html#cb157-11" tabindex="-1"></a></span>
<span id="cb157-12"><a href="데이터-랭글링.html#cb157-12" tabindex="-1"></a>(<span class="fu">today</span>() <span class="sc">%--%</span> next_year) <span class="sc">/</span> <span class="fu">ddays</span>(<span class="dv">1</span>)                   <span class="co"># 365</span></span>
<span id="cb157-13"><a href="데이터-랭글링.html#cb157-13" tabindex="-1"></a>(<span class="fu">ymd</span>(<span class="st">&quot;2024-01-01&quot;</span>) <span class="sc">%--%</span> <span class="fu">ymd</span>(<span class="st">&quot;2025-01-01&quot;</span>)) <span class="sc">/</span> <span class="fu">ddays</span>(<span class="dv">1</span>) <span class="co"># 366(윤년)</span></span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyverse-통합-패키지.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="데이터-시각화.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
