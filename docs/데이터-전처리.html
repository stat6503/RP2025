<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 데이터 전처리 | R 프로그래밍</title>
  <meta name="description" content="Chapter 6 데이터 전처리 | R 프로그래밍" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 데이터 전처리 | R 프로그래밍" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 데이터 전처리 | R 프로그래밍" />
  
  
  

<meta name="author" content="Park Sejin" />


<meta name="date" content="2025-03-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyverse-통합-패키지.html"/>
<link rel="next" href="데이터-시각화.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">R 프로그래밍</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>강의 소개</a></li>
<li class="chapter" data-level="1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html"><i class="fa fa-check"></i><b>1</b> 데이터 분석과 R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터의-이해"><i class="fa fa-check"></i><b>1.1</b> 데이터의 이해</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터의-시대"><i class="fa fa-check"></i><b>1.1.1</b> 데이터의 시대</a></li>
<li class="chapter" data-level="1.1.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#데이터-과학"><i class="fa fa-check"></i><b>1.1.2</b> 데이터 과학</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-및-r-studio-설치"><i class="fa fa-check"></i><b>1.2</b> R 및 R Studio 설치</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r"><i class="fa fa-check"></i><b>1.2.1</b> R</a></li>
<li class="chapter" data-level="1.2.2" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-studio"><i class="fa fa-check"></i><b>1.2.2</b> R Studio</a></li>
<li class="chapter" data-level="1.2.3" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#프로그램-설치"><i class="fa fa-check"></i><b>1.2.3</b> 프로그램 설치</a></li>
<li class="chapter" data-level="1.2.4" data-path="데이터-분석과-r.html"><a href="데이터-분석과-r.html#r-studio-화면-구성"><i class="fa fa-check"></i><b>1.2.4</b> R Studio 화면 구성</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-기초.html"><a href="r-기초.html"><i class="fa fa-check"></i><b>2</b> R 기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-기초.html"><a href="r-기초.html#산술연산"><i class="fa fa-check"></i><b>2.1</b> 산술연산</a></li>
<li class="chapter" data-level="2.2" data-path="r-기초.html"><a href="r-기초.html#산술연산-함수"><i class="fa fa-check"></i><b>2.2</b> 산술연산 함수</a></li>
<li class="chapter" data-level="2.3" data-path="r-기초.html"><a href="r-기초.html#주석comment"><i class="fa fa-check"></i><b>2.3</b> 주석(comment)</a></li>
<li class="chapter" data-level="2.4" data-path="r-기초.html"><a href="r-기초.html#자료형data-type"><i class="fa fa-check"></i><b>2.4</b> 자료형(data type)</a></li>
<li class="chapter" data-level="2.5" data-path="r-기초.html"><a href="r-기초.html#논리연산"><i class="fa fa-check"></i><b>2.5</b> 논리연산</a></li>
<li class="chapter" data-level="2.6" data-path="r-기초.html"><a href="r-기초.html#함수function"><i class="fa fa-check"></i><b>2.6</b> 함수(function)</a></li>
<li class="chapter" data-level="2.7" data-path="r-기초.html"><a href="r-기초.html#변수"><i class="fa fa-check"></i><b>2.7</b> 변수</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="r-기초.html"><a href="r-기초.html#변수-값-할당"><i class="fa fa-check"></i><b>2.7.1</b> 변수 값 할당</a></li>
<li class="chapter" data-level="2.7.2" data-path="r-기초.html"><a href="r-기초.html#변수-값-변경"><i class="fa fa-check"></i><b>2.7.2</b> 변수 값 변경</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html"><i class="fa fa-check"></i><b>3</b> 데이터와 자료구조</a>
<ul>
<li class="chapter" data-level="3.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터-이해"><i class="fa fa-check"></i><b>3.1</b> 데이터 이해</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터-구조화"><i class="fa fa-check"></i><b>3.1.1</b> 데이터 구조화</a></li>
<li class="chapter" data-level="3.1.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#테이블table"><i class="fa fa-check"></i><b>3.1.2</b> 테이블(table)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터vector"><i class="fa fa-check"></i><b>3.2</b> 벡터(vector)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-이해"><i class="fa fa-check"></i><b>3.2.1</b> 벡터 이해</a></li>
<li class="chapter" data-level="3.2.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#인덱스index"><i class="fa fa-check"></i><b>3.2.2</b> 인덱스(index)</a></li>
<li class="chapter" data-level="3.2.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#원소값-추출"><i class="fa fa-check"></i><b>3.2.3</b> 원소값 추출</a></li>
<li class="chapter" data-level="3.2.4" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#벡터-산술연산"><i class="fa fa-check"></i><b>3.2.4</b> 벡터 산술연산</a></li>
<li class="chapter" data-level="3.2.5" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#논리연산자"><i class="fa fa-check"></i><b>3.2.5</b> 논리연산자</a></li>
<li class="chapter" data-level="3.2.6" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#리스트list"><i class="fa fa-check"></i><b>3.2.6</b> 리스트(list)</a></li>
<li class="chapter" data-level="3.2.7" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#팩터factor"><i class="fa fa-check"></i><b>3.2.7</b> 팩터(factor)</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬matrix과-데이터프레임data-frame"><i class="fa fa-check"></i><b>3.3</b> 행렬(matrix)과 데이터프레임(data frame)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬-이해"><i class="fa fa-check"></i><b>3.3.1</b> 행렬 이해</a></li>
<li class="chapter" data-level="3.3.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#데이터프레임-이해"><i class="fa fa-check"></i><b>3.3.2</b> 데이터프레임 이해</a></li>
<li class="chapter" data-level="3.3.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#행렬과-데이터프레임-다루기"><i class="fa fa-check"></i><b>3.3.3</b> 행렬과 데이터프레임 다루기</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#외부-파일-읽기-및-쓰기"><i class="fa fa-check"></i><b>3.4</b> 외부 파일 읽기 및 쓰기</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#작업폴더-설정"><i class="fa fa-check"></i><b>3.4.1</b> 작업폴더 설정</a></li>
<li class="chapter" data-level="3.4.2" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#외부-파일-읽기"><i class="fa fa-check"></i><b>3.4.2</b> 외부 파일 읽기</a></li>
<li class="chapter" data-level="3.4.3" data-path="데이터와-자료구조.html"><a href="데이터와-자료구조.html#외부-파일-쓰기"><i class="fa fa-check"></i><b>3.4.3</b> 외부 파일 쓰기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html"><i class="fa fa-check"></i><b>4</b> 프로그래밍 구조</a>
<ul>
<li class="chapter" data-level="4.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#조건문conditional-statement"><i class="fa fa-check"></i><b>4.1</b> 조건문(conditional statement)</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#if-else-문"><i class="fa fa-check"></i><b>4.1.1</b> if-else 문</a></li>
<li class="chapter" data-level="4.1.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#다중-if-else-문"><i class="fa fa-check"></i><b>4.1.2</b> 다중 if-else 문</a></li>
<li class="chapter" data-level="4.1.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#조건문에서-논리연산자-사용"><i class="fa fa-check"></i><b>4.1.3</b> 조건문에서 논리연산자 사용</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#반복문repetitive-statement"><i class="fa fa-check"></i><b>4.2</b> 반복문(repetitive statement)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#for-문"><i class="fa fa-check"></i><b>4.2.1</b> for 문</a></li>
<li class="chapter" data-level="4.2.2" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#while-문"><i class="fa fa-check"></i><b>4.2.2</b> while 문</a></li>
<li class="chapter" data-level="4.2.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#break와-next"><i class="fa fa-check"></i><b>4.2.3</b> break와 next</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#사용자-정의-함수"><i class="fa fa-check"></i><b>4.3</b> 사용자 정의 함수</a></li>
<li class="chapter" data-level="4.4" data-path="프로그래밍-구조.html"><a href="프로그래밍-구조.html#r-패키지r-package"><i class="fa fa-check"></i><b>4.4</b> R 패키지(R package)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html"><i class="fa fa-check"></i><b>5</b> tidyverse 통합 패키지</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tidyverse-이해"><i class="fa fa-check"></i><b>5.1</b> tidyverse 이해</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tidyverse-작업-흐름"><i class="fa fa-check"></i><b>5.2</b> tidyverse 작업 흐름</a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#타이디-데이터tidy-data"><i class="fa fa-check"></i><b>5.3</b> 타이디 데이터(tidy data)</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#파이프pipe-연산자"><i class="fa fa-check"></i><b>5.4</b> 파이프(pipe) 연산자</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble-패키지"><i class="fa fa-check"></i><b>5.5</b> tibble 패키지</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble-object"><i class="fa fa-check"></i><b>5.5.1</b> tibble object</a></li>
<li class="chapter" data-level="5.5.2" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#tibble-이해"><i class="fa fa-check"></i><b>5.5.2</b> tibble 이해</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#readr-패키지"><i class="fa fa-check"></i><b>5.6</b> readr 패키지</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#readr-패키지-소개"><i class="fa fa-check"></i><b>5.6.1</b> readr 패키지 소개</a></li>
<li class="chapter" data-level="5.6.2" data-path="tidyverse-통합-패키지.html"><a href="tidyverse-통합-패키지.html#read_csv-함수"><i class="fa fa-check"></i><b>5.6.2</b> read_csv() 함수</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="데이터-전처리.html"><a href="데이터-전처리.html"><i class="fa fa-check"></i><b>6</b> 데이터 전처리</a>
<ul>
<li class="chapter" data-level="6.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#dplyr-패키지"><i class="fa fa-check"></i><b>6.1</b> dplyr 패키지</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#dplyr-패키지-소개"><i class="fa fa-check"></i><b>6.1.1</b> dplyr 패키지 소개</a></li>
<li class="chapter" data-level="6.1.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#행-관련-함수"><i class="fa fa-check"></i><b>6.1.2</b> 행 관련 함수</a></li>
<li class="chapter" data-level="6.1.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#열-관련-함수"><i class="fa fa-check"></i><b>6.1.3</b> 열 관련 함수</a></li>
<li class="chapter" data-level="6.1.4" data-path="데이터-전처리.html"><a href="데이터-전처리.html#그룹-관련-함수"><i class="fa fa-check"></i><b>6.1.4</b> 그룹 관련 함수</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#tidyr-패키지"><i class="fa fa-check"></i><b>6.2</b> tidyr 패키지</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#wide-format과-long-format"><i class="fa fa-check"></i><b>6.2.1</b> wide format과 long format</a></li>
<li class="chapter" data-level="6.2.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#long-format으로-변환"><i class="fa fa-check"></i><b>6.2.2</b> long format으로 변환</a></li>
<li class="chapter" data-level="6.2.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#wide-format으로-변환"><i class="fa fa-check"></i><b>6.2.3</b> wide format으로 변환</a></li>
<li class="chapter" data-level="6.2.4" data-path="데이터-전처리.html"><a href="데이터-전처리.html#열의-분리-및-결합"><i class="fa fa-check"></i><b>6.2.4</b> 열의 분리 및 결합</a></li>
<li class="chapter" data-level="6.2.5" data-path="데이터-전처리.html"><a href="데이터-전처리.html#결측값missing-value-처리"><i class="fa fa-check"></i><b>6.2.5</b> 결측값(missing value) 처리</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#stringr-패키지"><i class="fa fa-check"></i><b>6.3</b> stringr 패키지</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#stringr-패키지-소개"><i class="fa fa-check"></i><b>6.3.1</b> stringr 패키지 소개</a></li>
<li class="chapter" data-level="6.3.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#문자열-기초"><i class="fa fa-check"></i><b>6.3.2</b> 문자열 기초</a></li>
<li class="chapter" data-level="6.3.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#데이터에서-문자열-생성"><i class="fa fa-check"></i><b>6.3.3</b> 데이터에서 문자열 생성</a></li>
<li class="chapter" data-level="6.3.4" data-path="데이터-전처리.html"><a href="데이터-전처리.html#정규-표현식을-이용한-패턴-매칭"><i class="fa fa-check"></i><b>6.3.4</b> 정규 표현식을 이용한 패턴 매칭</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="데이터-전처리.html"><a href="데이터-전처리.html#forcats-패키지"><i class="fa fa-check"></i><b>6.4</b> forcats 패키지</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#forcats-패키지-소개"><i class="fa fa-check"></i><b>6.4.1</b> forcats 패키지 소개</a></li>
<li class="chapter" data-level="6.4.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#팩터-수준levels-재정렬"><i class="fa fa-check"></i><b>6.4.2</b> 팩터 수준(levels) 재정렬</a></li>
<li class="chapter" data-level="6.4.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#팩터-수준levels-변경"><i class="fa fa-check"></i><b>6.4.3</b> 팩터 수준(levels) 변경</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="데이터-전처리.html"><a href="데이터-전처리.html#lubridate-패키지"><i class="fa fa-check"></i><b>6.5</b> lubridate 패키지</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="데이터-전처리.html"><a href="데이터-전처리.html#lubridate-패키지-소개"><i class="fa fa-check"></i><b>6.5.1</b> lubridate 패키지 소개</a></li>
<li class="chapter" data-level="6.5.2" data-path="데이터-전처리.html"><a href="데이터-전처리.html#날짜시간-object"><i class="fa fa-check"></i><b>6.5.2</b> 날짜/시간 object</a></li>
<li class="chapter" data-level="6.5.3" data-path="데이터-전처리.html"><a href="데이터-전처리.html#날짜시간-구성요소"><i class="fa fa-check"></i><b>6.5.3</b> 날짜/시간 구성요소</a></li>
<li class="chapter" data-level="6.5.4" data-path="데이터-전처리.html"><a href="데이터-전처리.html#시간-범위time-spans-object"><i class="fa fa-check"></i><b>6.5.4</b> 시간 범위(time spans) object</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="데이터-시각화.html"><a href="데이터-시각화.html"><i class="fa fa-check"></i><b>7</b> 데이터 시각화</a>
<ul>
<li class="chapter" data-level="7.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-시각화-이해"><i class="fa fa-check"></i><b>7.1</b> 데이터 시각화 이해</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-시각화data-visualization"><i class="fa fa-check"></i><b>7.1.1</b> 데이터 시각화(data visualization)</a></li>
<li class="chapter" data-level="7.1.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#데이터-유형에-따른-시각화-방법"><i class="fa fa-check"></i><b>7.1.2</b> 데이터 유형에 따른 시각화 방법</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#r-base-graphics"><i class="fa fa-check"></i><b>7.2</b> R base graphics</a></li>
<li class="chapter" data-level="7.3" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-패키지"><i class="fa fa-check"></i><b>7.3</b> ggplot2 패키지</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-패키지-소개"><i class="fa fa-check"></i><b>7.3.1</b> ggplot2 패키지 소개</a></li>
<li class="chapter" data-level="7.3.2" data-path="데이터-시각화.html"><a href="데이터-시각화.html#ggplot2-기본-구조"><i class="fa fa-check"></i><b>7.3.2</b> ggplot2 기본 구조</a></li>
<li class="chapter" data-level="7.3.3" data-path="데이터-시각화.html"><a href="데이터-시각화.html#막대-그래프bar-chart"><i class="fa fa-check"></i><b>7.3.3</b> 막대 그래프(bar chart)</a></li>
<li class="chapter" data-level="7.3.4" data-path="데이터-시각화.html"><a href="데이터-시각화.html#히스토그램histogram"><i class="fa fa-check"></i><b>7.3.4</b> 히스토그램(histogram)</a></li>
<li class="chapter" data-level="7.3.5" data-path="데이터-시각화.html"><a href="데이터-시각화.html#상자-그림box-plot"><i class="fa fa-check"></i><b>7.3.5</b> 상자 그림(box plot)</a></li>
<li class="chapter" data-level="7.3.6" data-path="데이터-시각화.html"><a href="데이터-시각화.html#산점도scatter-plot"><i class="fa fa-check"></i><b>7.3.6</b> 산점도(scatter plot)</a></li>
<li class="chapter" data-level="7.3.7" data-path="데이터-시각화.html"><a href="데이터-시각화.html#선-그래프line-plot"><i class="fa fa-check"></i><b>7.3.7</b> 선 그래프(line plot)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-이해"><i class="fa fa-check"></i><b>8.1</b> R Markdown 이해</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="r-markdown.html"><a href="r-markdown.html#markdown과-r-markdown"><i class="fa fa-check"></i><b>8.1.1</b> Markdown과 R Markdown</a></li>
<li class="chapter" data-level="8.1.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-시작하기"><i class="fa fa-check"></i><b>8.1.2</b> R Markdown 시작하기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>8.2</b> YAML Header</a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#markdown-문법"><i class="fa fa-check"></i><b>8.3</b> Markdown 문법</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="r-markdown.html"><a href="r-markdown.html#인라인-서식inline-formatting"><i class="fa fa-check"></i><b>8.3.1</b> 인라인 서식(inline formatting)</a></li>
<li class="chapter" data-level="8.3.2" data-path="r-markdown.html"><a href="r-markdown.html#블록-요소block-level-elements"><i class="fa fa-check"></i><b>8.3.2</b> 블록 요소(block-level elements)</a></li>
<li class="chapter" data-level="8.3.3" data-path="r-markdown.html"><a href="r-markdown.html#수학-표현식math-expressions"><i class="fa fa-check"></i><b>8.3.3</b> 수학 표현식(math expressions)</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#r-코드-청크code-chunk"><i class="fa fa-check"></i><b>8.4</b> R 코드 청크(code chunk)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="r-markdown.html"><a href="r-markdown.html#r-코드-청크-이해"><i class="fa fa-check"></i><b>8.4.1</b> R 코드 청크 이해</a></li>
<li class="chapter" data-level="8.4.2" data-path="r-markdown.html"><a href="r-markdown.html#청크-이름chunk-name"><i class="fa fa-check"></i><b>8.4.2</b> 청크 이름(chunk name)</a></li>
<li class="chapter" data-level="8.4.3" data-path="r-markdown.html"><a href="r-markdown.html#청크-옵션chunk-options"><i class="fa fa-check"></i><b>8.4.3</b> 청크 옵션(chunk options)</a></li>
<li class="chapter" data-level="8.4.4" data-path="r-markdown.html"><a href="r-markdown.html#표table-삽입"><i class="fa fa-check"></i><b>8.4.4</b> 표(table) 삽입</a></li>
<li class="chapter" data-level="8.4.5" data-path="r-markdown.html"><a href="r-markdown.html#전역-옵션global-option"><i class="fa fa-check"></i><b>8.4.5</b> 전역 옵션(global option)</a></li>
<li class="chapter" data-level="8.4.6" data-path="r-markdown.html"><a href="r-markdown.html#인라인-코드inline-code"><i class="fa fa-check"></i><b>8.4.6</b> 인라인 코드(inline code)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="데이터-전처리" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> 데이터 전처리<a href="데이터-전처리.html#데이터-전처리" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="dplyr-패키지" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> dplyr 패키지<a href="데이터-전처리.html#dplyr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="dplyr-패키지-소개" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> dplyr 패키지 소개<a href="데이터-전처리.html#dplyr-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>탐색적 자료분석, 데이터 가공에 매우 유용하고 편리한 함수 제공</li>
<li>적용 대상에 따른 dplyr 함수
<ul>
<li><strong>행</strong>: filter(), arrange()</li>
<li><strong>열</strong>: select(), rename(), mutate(), relocate()</li>
<li><strong>그룹</strong>: summarise(), group_by()</li>
<li><strong>테이블</strong></li>
</ul></li>
<li>[예제] 2013년 뉴욕시 출발 항공편 데이터셋 flights</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">변수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">year</td>
<td align="left">출발 연도</td>
</tr>
<tr class="even">
<td align="center">month</td>
<td align="left">출발 월</td>
</tr>
<tr class="odd">
<td align="center">day</td>
<td align="left">출발 일</td>
</tr>
<tr class="even">
<td align="center">dep_time</td>
<td align="left">실제 출발 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="odd">
<td align="center">arr_time</td>
<td align="left">실제 도착 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="even">
<td align="center">sched_dep_time</td>
<td align="left">예정된 출발 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="odd">
<td align="center">sched_arr_time</td>
<td align="left">예정된 도착 시간(HHMM 또는 HMM)</td>
</tr>
<tr class="even">
<td align="center">dep_delay</td>
<td align="left">출발 지연 시간(분)</td>
</tr>
<tr class="odd">
<td align="center">arr_delay</td>
<td align="left">도착 지연 시간(분)</td>
</tr>
<tr class="even">
<td align="center">carrier</td>
<td align="left">항공사 약어</td>
</tr>
<tr class="odd">
<td align="center">flight</td>
<td align="left">항공편 번호</td>
</tr>
<tr class="even">
<td align="center">tailnum</td>
<td align="left">비행기 식별 번호</td>
</tr>
<tr class="odd">
<td align="center">origin</td>
<td align="left">출발지</td>
</tr>
<tr class="even">
<td align="center">dest</td>
<td align="left">목적지</td>
</tr>
<tr class="odd">
<td align="center">air_time</td>
<td align="left">비행 시간(분)</td>
</tr>
<tr class="even">
<td align="center">distance</td>
<td align="left">비행 거리(miles)</td>
</tr>
<tr class="odd">
<td align="center">hour</td>
<td align="left">예정된 출발 시간; 시</td>
</tr>
<tr class="even">
<td align="center">minute</td>
<td align="left">예정된 출발 시간; 분</td>
</tr>
<tr class="odd">
<td align="center">time_hour</td>
<td align="left">예정된 비행 날짜 및 시간(POSIXct date)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="데이터-전처리.html#cb71-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb71-2"><a href="데이터-전처리.html#cb71-2" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb71-3"><a href="데이터-전처리.html#cb71-3" tabindex="-1"></a><span class="fu">glimpse</span>(flights)</span></code></pre></div>
</div>
<div id="행-관련-함수" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> 행 관련 함수<a href="데이터-전처리.html#행-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="filter-함수" class="section level4 hasAnchor" number="6.1.2.1">
<h4><span class="header-section-number">6.1.2.1</span> filter() 함수<a href="데이터-전처리.html#filter-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>조건에 맞는 행 추출</li>
<li><code>%in%</code> 연산자 - 왼쪽의 값이 오른쪽에 있는 값들 중 어느 하나와 같으면 TRUE</li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="데이터-전처리.html#cb72-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)                    <span class="co"># 120분 이상 연착한 항공편</span></span>
<span id="cb72-2"><a href="데이터-전처리.html#cb72-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> day <span class="sc">==</span> <span class="dv">1</span>)               <span class="co"># 1월 1일에 출발한 항공편</span></span>
<span id="cb72-3"><a href="데이터-전처리.html#cb72-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">8</span>))                 <span class="co"># 3,5,8월에 출발한 항공편</span></span></code></pre></div>
</div>
<div id="arrange-함수" class="section level4 hasAnchor" number="6.1.2.2">
<h4><span class="header-section-number">6.1.2.2</span> arrange() 함수<a href="데이터-전처리.html#arrange-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수를 기준으로 행 정렬, 기본값(default)은 오름차순</li>
<li>정렬 기준 변수가 여러 개인 경우 순차적으로 적용</li>
<li><code>desc()</code> 함수 - 내림차순 정렬</li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="데이터-전처리.html#cb73-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(year, month, day, dep_time)</span>
<span id="cb73-2"><a href="데이터-전처리.html#cb73-2" tabindex="-1"></a>filghts <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))                    <span class="co"># 가장 늦게 출발한 항공편 확인</span></span>
<span id="cb73-3"><a href="데이터-전처리.html#cb73-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb73-4"><a href="데이터-전처리.html#cb73-4" tabindex="-1"></a>  <span class="fu">filter</span>(dep_delay <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> dep_dalay <span class="sc">&gt;=</span> <span class="sc">-</span><span class="dv">10</span>) <span class="sc">%&gt;%</span>        <span class="co"># 대략 정시에 출발한 항공편 중에서 </span></span>
<span id="cb73-5"><a href="데이터-전처리.html#cb73-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(arr_delay))                              <span class="co"># 가장 늦게 도착한 항공편 확인</span></span></code></pre></div>
</div>
</div>
<div id="열-관련-함수" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> 열 관련 함수<a href="데이터-전처리.html#열-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="select-함수" class="section level4 hasAnchor" number="6.1.3.1">
<h4><span class="header-section-number">6.1.3.1</span> select() 함수<a href="데이터-전처리.html#select-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수 추출</li>
<li>추출한 변수명을 바꿀 수 있음</li>
<li>도우미(helpers) 함수
<ul>
<li><code>starts_with()</code> 함수 - 특정 문자열로 시작하는 이름 매칭</li>
<li><code>ends_with()</code> 함수 - 특정 문자열로 끝나는 이름 매칭</li>
<li><code>contains()</code> 함수 - 특정 문자열을 포함하는 이름 매칭</li>
<li><code>num_range("x", 1:3)</code> 함수 - x1, x2, x3 매칭</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="데이터-전처리.html#cb74-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year, month, day)                  <span class="co"># 출발 연월일 변수 추출</span></span>
<span id="cb74-2"><a href="데이터-전처리.html#cb74-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>day)</span>
<span id="cb74-3"><a href="데이터-전처리.html#cb74-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(year<span class="sc">:</span>day))                       <span class="co"># 출발 연월일 변수 제외</span></span>
<span id="cb74-4"><a href="데이터-전처리.html#cb74-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb74-5"><a href="데이터-전처리.html#cb74-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">dep.time =</span> dep_time, <span class="at">arr.time =</span> arr_time)    <span class="co"># 변수명 변경</span></span>
<span id="cb74-6"><a href="데이터-전처리.html#cb74-6" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;sched&quot;</span>))              <span class="co"># 변수명 &quot;sched&quot;로 시작하는 경우</span></span>
<span id="cb74-7"><a href="데이터-전처리.html#cb74-7" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;time&quot;</span>))                 <span class="co"># 변수명 &quot;time&quot;으로 끝나는 경우</span></span>
<span id="cb74-8"><a href="데이터-전처리.html#cb74-8" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;arr&quot;</span>))                   <span class="co"># 변수명 &quot;arr&quot;를 포함하는 경우</span></span></code></pre></div>
</div>
<div id="rename-함수" class="section level4 hasAnchor" number="6.1.3.2">
<h4><span class="header-section-number">6.1.3.2</span> rename() 함수<a href="데이터-전처리.html#rename-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수명 변경</li>
<li>명시적으로 언급하지 않은 모든 변수를 유지함</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="데이터-전처리.html#cb75-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">dep.time =</span> dep_time, <span class="at">arr.time =</span> arr_time)</span></code></pre></div>
</div>
<div id="mutate-함수" class="section level4 hasAnchor" number="6.1.3.3">
<h4><span class="header-section-number">6.1.3.3</span> mutate() 함수<a href="데이터-전처리.html#mutate-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>데이터셋에 존재하는 변수로부터 새로운 변수 생성</li>
<li>새로운 변수는 항상 데이터셋 마지막 열에 추가됨
<ul>
<li>매개변수 <code>.before</code> - 새로운 변수를 특정 위치의 앞에 추가</li>
<li>매개변수 <code>.after</code> - 새로운 변수를 특정 위치의 뒤에 추가</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="데이터-전처리.html#cb76-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">gain =</span> dep_delay <span class="sc">-</span> arr_delay)                      <span class="co"># 출발 지연 - 도착 지연(분)</span></span>
<span id="cb76-2"><a href="데이터-전처리.html#cb76-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">speed =</span> distance <span class="sc">/</span> (air_time<span class="sc">/</span><span class="dv">60</span>), <span class="at">.before =</span> <span class="dv">1</span>)     <span class="co"># 첫번째 변수 앞에 추가</span></span>
<span id="cb76-3"><a href="데이터-전처리.html#cb76-3" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">hour =</span> air_time <span class="sc">/</span> <span class="dv">60</span>, <span class="at">.after =</span> air_time)           <span class="co"># air_time 변수 뒤에 추가</span></span></code></pre></div>
</div>
<div id="relocate-함수" class="section level4 hasAnchor" number="6.1.3.4">
<h4><span class="header-section-number">6.1.3.4</span> relocate() 함수<a href="데이터-전처리.html#relocate-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>변수 위치 변경, 기본값(default)은 첫번째 열</li>
<li><code>mutate()</code> 함수와 같이 매개변수 <code>.before</code>, <code>.after</code>를 이용하여 위치 지정</li>
</ul>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="데이터-전처리.html#cb77-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(air_time, distance)</span>
<span id="cb77-2"><a href="데이터-전처리.html#cb77-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(carrier<span class="sc">:</span>tailnum, <span class="at">.before =</span> day)</span></code></pre></div>
</div>
</div>
<div id="그룹-관련-함수" class="section level3 hasAnchor" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> 그룹 관련 함수<a href="데이터-전처리.html#그룹-관련-함수" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="summarise-함수" class="section level4 hasAnchor" number="6.1.4.1">
<h4><span class="header-section-number">6.1.4.1</span> summarise() 함수<a href="데이터-전처리.html#summarise-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>통계량 계산하여 하나의 행으로 요약</li>
<li>여러 개의 다양한 요약함수 사용 가능</li>
<li><code>n()</code> 함수 - 그룹별 크기 계산</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="데이터-전처리.html#cb78-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),           <span class="co"># 평균</span></span>
<span id="cb78-2"><a href="데이터-전처리.html#cb78-2" tabindex="-1"></a>                      <span class="at">std_dev =</span> <span class="fu">sd</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),          <span class="co"># 표준편차</span></span>
<span id="cb78-3"><a href="데이터-전처리.html#cb78-3" tabindex="-1"></a>                      <span class="at">n =</span> <span class="fu">n</span>())                                       <span class="co"># 데이터 개수</span></span></code></pre></div>
</div>
<div id="group_by-함수" class="section level4 hasAnchor" number="6.1.4.2">
<h4><span class="header-section-number">6.1.4.2</span> group_by() 함수<a href="데이터-전처리.html#group_by-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>특정 변수를 기준으로 그룹화</li>
<li>일반적으로 summarise()와 함께 사용</li>
<li>여러 변수를 기준으로 그룹화 가능</li>
<li><code>ungroup()</code> 함수 - 그룹화 제거</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="데이터-전처리.html#cb79-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month)                           <span class="co"># 데이터 변화 x, 그룹화되어 있음</span></span>
<span id="cb79-2"><a href="데이터-전처리.html#cb79-2" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span>                       <span class="co"># 월별 평균 출발 지연 시간, 그룹 크기</span></span>
<span id="cb79-3"><a href="데이터-전처리.html#cb79-3" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb79-4"><a href="데이터-전처리.html#cb79-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(year, month, day) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb79-5"><a href="데이터-전처리.html#cb79-5" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())     <span class="co"># 그룹화 제거</span></span></code></pre></div>
<hr />
</div>
</div>
</div>
<div id="tidyr-패키지" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> tidyr 패키지<a href="데이터-전처리.html#tidyr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="wide-format과-long-format" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> wide format과 long format<a href="데이터-전처리.html#wide-format과-long-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>wide format
<ul>
<li>사람이 읽기 좋은 데이터 구조</li>
<li>통계학에서 다루는 데이터 테이블 구조와 동일한 개념</li>
<li>각 행은 관측 단위(사람, 가구 등)를 나타내며, 각 열은 관측 단위에 대한 측정값(키, 몸무게 등)으로 표현된 형태</li>
</ul></li>
<li>long format
<ul>
<li>컴퓨터가 이해하기 편한 데이터 구조</li>
<li>각 행은 wide format에서 특정 셀의 정보를 반영하며, 각 열은 요인(factor)으로 표현된 형태</li>
<li>wide format보다 유연하여 데이터 추가 및 삭제 용이</li>
</ul></li>
</ul>
<p><img src="img/fig5-1.png" /></p>
<p><br></p>
<ul>
<li>[예제] WHO에서 발표한 1999~2000년 3개 국가(아프가니스탄, 브라질, 중국)의 결핵 사례 수
<ul>
<li>동일한 데이터셋을 다양한 format으로 보여줌</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="데이터-전처리.html#cb80-1" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb80-2"><a href="데이터-전처리.html#cb80-2" tabindex="-1"></a>table1</span>
<span id="cb80-3"><a href="데이터-전처리.html#cb80-3" tabindex="-1"></a>table2</span>
<span id="cb80-4"><a href="데이터-전처리.html#cb80-4" tabindex="-1"></a>table3</span>
<span id="cb80-5"><a href="데이터-전처리.html#cb80-5" tabindex="-1"></a>table4a</span>
<span id="cb80-6"><a href="데이터-전처리.html#cb80-6" tabindex="-1"></a>table4b</span></code></pre></div>
</div>
<div id="long-format으로-변환" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> long format으로 변환<a href="데이터-전처리.html#long-format으로-변환" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>wide format을 long format으로 변환 - <code>pivot_longer()</code> 함수(권장)
<ul>
<li>행의 개수를 늘리고 열의 개수를 줄여서 데이터셋을 길게 만듬</li>
<li>long format으로 변환하고자 하는 열을 지정하는 방법은 <code>dplyr::select()</code> 함수와 동일</li>
<li>[참고] <code>gather()</code>, <code>reshape2::melt()</code> 함수</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="데이터-전처리.html#cb81-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb81-2"><a href="데이터-전처리.html#cb81-2" tabindex="-1"></a>table4a <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="데이터-전처리.html#cb81-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="데이터-전처리.html#cb81-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">parse_integer</span>(year))                 <span class="co"># year 변수를 정수형으로 변경</span></span>
<span id="cb81-5"><a href="데이터-전처리.html#cb81-5" tabindex="-1"></a></span>
<span id="cb81-6"><a href="데이터-전처리.html#cb81-6" tabindex="-1"></a>table4b <span class="sc">%&gt;%</span> </span>
<span id="cb81-7"><a href="데이터-전처리.html#cb81-7" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;population&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-8"><a href="데이터-전처리.html#cb81-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">parse_integer</span>(year))                 <span class="co"># year 변수를 정수형으로 변경</span></span>
<span id="cb81-9"><a href="데이터-전처리.html#cb81-9" tabindex="-1"></a></span>
<span id="cb81-10"><a href="데이터-전처리.html#cb81-10" tabindex="-1"></a></span>
<span id="cb81-11"><a href="데이터-전처리.html#cb81-11" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb81-12"><a href="데이터-전처리.html#cb81-12" tabindex="-1"></a>relig_income <span class="sc">%&gt;%</span></span>
<span id="cb81-13"><a href="데이터-전처리.html#cb81-13" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>religion, <span class="at">names_to =</span> <span class="st">&quot;income&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb81-14"><a href="데이터-전처리.html#cb81-14" tabindex="-1"></a></span>
<span id="cb81-15"><a href="데이터-전처리.html#cb81-15" tabindex="-1"></a></span>
<span id="cb81-16"><a href="데이터-전처리.html#cb81-16" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb81-17"><a href="데이터-전처리.html#cb81-17" tabindex="-1"></a>billboard <span class="sc">%&gt;%</span></span>
<span id="cb81-18"><a href="데이터-전처리.html#cb81-18" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;wk&quot;</span>),             <span class="co"># dplyr::select()의 helpers 함수 사용</span></span>
<span id="cb81-19"><a href="데이터-전처리.html#cb81-19" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;week&quot;</span>,</span>
<span id="cb81-20"><a href="데이터-전처리.html#cb81-20" tabindex="-1"></a>               <span class="at">names_prefix =</span> <span class="st">&quot;wk&quot;</span>,</span>
<span id="cb81-21"><a href="데이터-전처리.html#cb81-21" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;rank&quot;</span>,</span>
<span id="cb81-22"><a href="데이터-전처리.html#cb81-22" tabindex="-1"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)                <span class="co"># 결측값(NA) 제거</span></span></code></pre></div>
</div>
<div id="wide-format으로-변환" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> wide format으로 변환<a href="데이터-전처리.html#wide-format으로-변환" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>long format을 wide format으로 변환 - <code>pivot_wider()</code> 함수(권장)
<ul>
<li>관측값이 여러 행에 흩어져 있을 때 사용</li>
<li>[참고] <code>spread()</code>, <code>reshape2::dcast()</code> 함수</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="데이터-전처리.html#cb82-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb82-2"><a href="데이터-전처리.html#cb82-2" tabindex="-1"></a>table2 <span class="sc">%&gt;%</span></span>
<span id="cb82-3"><a href="데이터-전처리.html#cb82-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type,</span>
<span id="cb82-4"><a href="데이터-전처리.html#cb82-4" tabindex="-1"></a>              <span class="at">values_from =</span> count) <span class="sc">%&gt;%</span>                            <span class="co"># type에 대한 wide format</span></span>
<span id="cb82-5"><a href="데이터-전처리.html#cb82-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> cases<span class="sc">/</span>population<span class="sc">*</span><span class="dv">100000</span>) <span class="sc">%&gt;%</span>                      <span class="co"># 인구 10만 명당 결핵 건수</span></span>
<span id="cb82-6"><a href="데이터-전처리.html#cb82-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year,                                  <span class="co"># year에 대한 wide format</span></span>
<span id="cb82-7"><a href="데이터-전처리.html#cb82-7" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="fu">c</span>(cases, population, rate)) <span class="sc">%&gt;%</span></span>
<span id="cb82-8"><a href="데이터-전처리.html#cb82-8" tabindex="-1"></a>  <span class="fu">relocate</span>(country, <span class="fu">contains</span>(<span class="st">&quot;1999&quot;</span>))                             <span class="co"># 변수 위치 변경</span></span>
<span id="cb82-9"><a href="데이터-전처리.html#cb82-9" tabindex="-1"></a></span>
<span id="cb82-10"><a href="데이터-전처리.html#cb82-10" tabindex="-1"></a></span>
<span id="cb82-11"><a href="데이터-전처리.html#cb82-11" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb82-12"><a href="데이터-전처리.html#cb82-12" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb82-13"><a href="데이터-전처리.html#cb82-13" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> station,</span>
<span id="cb82-14"><a href="데이터-전처리.html#cb82-14" tabindex="-1"></a>              <span class="at">values_from =</span> seen,</span>
<span id="cb82-15"><a href="데이터-전처리.html#cb82-15" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="dv">0</span>)                                    <span class="co"># 결측값(NA)은 0으로 대체</span></span></code></pre></div>
</div>
<div id="열의-분리-및-결합" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> 열의 분리 및 결합<a href="데이터-전처리.html#열의-분리-및-결합" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>하나의 열에 저장되어 있는 여러 개의 변수를 분리 - <code>separate()</code> 함수</li>
<li>여러 개의 열을 하나의 열로 결합 - <code>unite()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="데이터-전처리.html#cb83-1" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="at">col =</span> rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span>
<span id="cb83-2"><a href="데이터-전처리.html#cb83-2" tabindex="-1"></a>table5 <span class="sc">%&gt;%</span> <span class="fu">unite</span>(<span class="at">col =</span> new_year, century, year)</span></code></pre></div>
</div>
<div id="결측값missing-value-처리" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> 결측값(missing value) 처리<a href="데이터-전처리.html#결측값missing-value-처리" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>결측값 <code>NA</code>은 누락된 값(not availables)을 나타냄</li>
<li>결측값은 알 수 없으므로, 전염성(contagious)을 가짐
<ul>
<li>결측값에 대한 산술연산, 비교연산 결과도 알 수 없음(NA)</li>
</ul></li>
<li>결측값 확인 - <code>is.na()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="데이터-전처리.html#cb84-1" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb84-2"><a href="데이터-전처리.html#cb84-2" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb84-3"><a href="데이터-전처리.html#cb84-3" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">&gt;</span> <span class="dv">5</span></span>
<span id="cb84-4"><a href="데이터-전처리.html#cb84-4" tabindex="-1"></a><span class="dv">10</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb84-5"><a href="데이터-전처리.html#cb84-5" tabindex="-1"></a></span>
<span id="cb84-6"><a href="데이터-전처리.html#cb84-6" tabindex="-1"></a><span class="co"># Let x be Mary&#39;s age. We don&#39;t know how old she is.</span></span>
<span id="cb84-7"><a href="데이터-전처리.html#cb84-7" tabindex="-1"></a><span class="co"># Let y be John&#39;s age. We don&#39;t know how old he is.</span></span>
<span id="cb84-8"><a href="데이터-전처리.html#cb84-8" tabindex="-1"></a><span class="co"># Are Mary and John the same age?</span></span>
<span id="cb84-9"><a href="데이터-전처리.html#cb84-9" tabindex="-1"></a><span class="co"># We don&#39;t know!</span></span>
<span id="cb84-10"><a href="데이터-전처리.html#cb84-10" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span>
<span id="cb84-11"><a href="데이터-전처리.html#cb84-11" tabindex="-1"></a></span>
<span id="cb84-12"><a href="데이터-전처리.html#cb84-12" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li>명시적 결측값(explicitly missing value) - <code>NA</code>로 표시된 값</li>
<li>암묵적 결측값(implicitly missing value) - 데이터셋에 존재하지 않는 값</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="데이터-전처리.html#cb85-1" tabindex="-1"></a><span class="co"># 2015년 4분기 수익은 NA로 표시되어 있으므로, 명시적 결측값임</span></span>
<span id="cb85-2"><a href="데이터-전처리.html#cb85-2" tabindex="-1"></a><span class="co"># 2016년 1분기 수익은 데이터셋이 존재하지 않으므로, 암묵적 결측값임</span></span>
<span id="cb85-3"><a href="데이터-전처리.html#cb85-3" tabindex="-1"></a>stocks <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb85-4"><a href="데이터-전처리.html#cb85-4" tabindex="-1"></a>  <span class="at">year   =</span> <span class="fu">c</span>(<span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2015</span>, <span class="dv">2016</span>, <span class="dv">2016</span>, <span class="dv">2016</span>),</span>
<span id="cb85-5"><a href="데이터-전처리.html#cb85-5" tabindex="-1"></a>  <span class="at">qtr    =</span> <span class="fu">c</span>(   <span class="dv">1</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>,    <span class="dv">2</span>,    <span class="dv">3</span>,    <span class="dv">4</span>),</span>
<span id="cb85-6"><a href="데이터-전처리.html#cb85-6" tabindex="-1"></a>  <span class="at">return =</span> <span class="fu">c</span>(<span class="fl">1.88</span>, <span class="fl">0.59</span>, <span class="fl">0.35</span>,   <span class="cn">NA</span>, <span class="fl">0.92</span>, <span class="fl">0.17</span>, <span class="fl">2.66</span>))</span>
<span id="cb85-7"><a href="데이터-전처리.html#cb85-7" tabindex="-1"></a></span>
<span id="cb85-8"><a href="데이터-전처리.html#cb85-8" tabindex="-1"></a>stocks <span class="sc">%&gt;%</span></span>
<span id="cb85-9"><a href="데이터-전처리.html#cb85-9" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year,                     <span class="co"># year를 열로 pivot하여 명시적으로 만듬</span></span>
<span id="cb85-10"><a href="데이터-전처리.html#cb85-10" tabindex="-1"></a>              <span class="at">values_from =</span> return) <span class="sc">%&gt;%</span></span>
<span id="cb85-11"><a href="데이터-전처리.html#cb85-11" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">2015</span><span class="st">`</span>, <span class="st">`</span><span class="at">2016</span><span class="st">`</span>),             <span class="co"># 명시적 결측값이 중요하지 않다면</span></span>
<span id="cb85-12"><a href="데이터-전처리.html#cb85-12" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,                    <span class="co"># 암묵적으로 만듬(NA 제거)</span></span>
<span id="cb85-13"><a href="데이터-전처리.html#cb85-13" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;return&quot;</span>,</span>
<span id="cb85-14"><a href="데이터-전처리.html#cb85-14" tabindex="-1"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li>입력한 열의 고유한 모든 조합을 찾은 후, 필요한 경우 명시적 결측값을 채움 - <code>complete()</code> 함수</li>
<li>결측값을 가장 최근에 존재하는 값(이월된 마지막 관측값)으로 대체 - <code>fill()</code> 함수</li>
<li>결측값이 존재하는 행 제거 - <code>drop_na()</code> 함수</li>
<li>결측값을 특정 값으로 대체 - <code>replace_na()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="데이터-전처리.html#cb86-1" tabindex="-1"></a><span class="do">## Example for complete()</span></span>
<span id="cb86-2"><a href="데이터-전처리.html#cb86-2" tabindex="-1"></a>stocks <span class="sc">%&gt;%</span> <span class="fu">complete</span>(year, qtr)</span>
<span id="cb86-3"><a href="데이터-전처리.html#cb86-3" tabindex="-1"></a></span>
<span id="cb86-4"><a href="데이터-전처리.html#cb86-4" tabindex="-1"></a></span>
<span id="cb86-5"><a href="데이터-전처리.html#cb86-5" tabindex="-1"></a><span class="do">## Example for fill()</span></span>
<span id="cb86-6"><a href="데이터-전처리.html#cb86-6" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">&quot;Derrick Whitmore&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">&quot;Katherine Burke&quot;</span>),</span>
<span id="cb86-7"><a href="데이터-전처리.html#cb86-7" tabindex="-1"></a>       <span class="at">treatment =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="at">response =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">4</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-8"><a href="데이터-전처리.html#cb86-8" tabindex="-1"></a>  <span class="fu">fill</span>(person)</span>
<span id="cb86-9"><a href="데이터-전처리.html#cb86-9" tabindex="-1"></a></span>
<span id="cb86-10"><a href="데이터-전처리.html#cb86-10" tabindex="-1"></a></span>
<span id="cb86-11"><a href="데이터-전처리.html#cb86-11" tabindex="-1"></a><span class="do">## Example for drop_na()</span></span>
<span id="cb86-12"><a href="데이터-전처리.html#cb86-12" tabindex="-1"></a>mytbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>))</span>
<span id="cb86-13"><a href="데이터-전처리.html#cb86-13" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>(x)                                <span class="co"># x 변수에서 결측값이 있는 행 제거</span></span>
<span id="cb86-14"><a href="데이터-전처리.html#cb86-14" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()                                 <span class="co"># 모든 변수에 대해 결측값이 있는 행 제거</span></span>
<span id="cb86-15"><a href="데이터-전처리.html#cb86-15" tabindex="-1"></a></span>
<span id="cb86-16"><a href="데이터-전처리.html#cb86-16" tabindex="-1"></a></span>
<span id="cb86-17"><a href="데이터-전처리.html#cb86-17" tabindex="-1"></a><span class="do">## Example 1 for replace_na()</span></span>
<span id="cb86-18"><a href="데이터-전처리.html#cb86-18" tabindex="-1"></a><span class="co"># 데이터 프레임에 있는 결측값을 대체하는 경우, 매개변수 replace는 list로 입력</span></span>
<span id="cb86-19"><a href="데이터-전처리.html#cb86-19" tabindex="-1"></a><span class="co"># x 변수의 결측값은 0, y 변수의 결측값은 &quot;unknown&quot;으로 대체</span></span>
<span id="cb86-20"><a href="데이터-전처리.html#cb86-20" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="fu">list</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="st">&quot;unknown&quot;</span>))</span>
<span id="cb86-21"><a href="데이터-전처리.html#cb86-21" tabindex="-1"></a></span>
<span id="cb86-22"><a href="데이터-전처리.html#cb86-22" tabindex="-1"></a><span class="co"># 벡터에 있는 결측값을 대체하는 경우, 매개변수 replace는 단일 값(single value)으로 입력</span></span>
<span id="cb86-23"><a href="데이터-전처리.html#cb86-23" tabindex="-1"></a>mytbl<span class="sc">$</span>x <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="dv">0</span>)</span>
<span id="cb86-24"><a href="데이터-전처리.html#cb86-24" tabindex="-1"></a>mytbl<span class="sc">$</span>y <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="st">&quot;unknown&quot;</span>)</span>
<span id="cb86-25"><a href="데이터-전처리.html#cb86-25" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">replace_na</span>(x, <span class="dv">0</span>), <span class="at">y =</span> <span class="fu">replace_na</span>(y, <span class="st">&quot;unknown&quot;</span>))</span></code></pre></div>
<hr />
</div>
</div>
<div id="stringr-패키지" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> stringr 패키지<a href="데이터-전처리.html#stringr-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="stringr-패키지-소개" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> stringr 패키지 소개<a href="데이터-전처리.html#stringr-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>문자열(string)을 다루는 함수 제공</li>
<li>모든 함수가 <code>str_</code>로 시작하여 일관성있게 설계됨</li>
</ul>
</div>
<div id="문자열-기초" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> 문자열 기초<a href="데이터-전처리.html#문자열-기초" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="str_length-함수" class="section level4 hasAnchor" number="6.3.2.1">
<h4><span class="header-section-number">6.3.2.1</span> str_length() 함수<a href="데이터-전처리.html#str_length-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 문자의 개수(길이) 확인</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="데이터-전처리.html#cb87-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb87-2"><a href="데이터-전처리.html#cb87-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb87-3"><a href="데이터-전처리.html#cb87-3" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;R for data science&quot;</span>, <span class="cn">NA</span>))</span>
<span id="cb87-4"><a href="데이터-전처리.html#cb87-4" tabindex="-1"></a></span>
<span id="cb87-5"><a href="데이터-전처리.html#cb87-5" tabindex="-1"></a></span>
<span id="cb87-6"><a href="데이터-전처리.html#cb87-6" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb87-7"><a href="데이터-전처리.html#cb87-7" tabindex="-1"></a><span class="co"># dplyr::count() 함수 - 그룹별 빈도 값 산출</span></span>
<span id="cb87-8"><a href="데이터-전처리.html#cb87-8" tabindex="-1"></a><span class="co">#        매개변수 wt - 기본값은 NULL로 각 그룹의 행 개수 계산,</span></span>
<span id="cb87-9"><a href="데이터-전처리.html#cb87-9" tabindex="-1"></a><span class="co">#                      변수를 입력하면 각 그룹에 대한 합계 계산</span></span>
<span id="cb87-10"><a href="데이터-전처리.html#cb87-10" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb87-11"><a href="데이터-전처리.html#cb87-11" tabindex="-1"></a>babynames<span class="sc">%&gt;%</span> </span>
<span id="cb87-12"><a href="데이터-전처리.html#cb87-12" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">length =</span> <span class="fu">str_length</span>(name), <span class="at">wt =</span> n)          <span class="co"># 이름 길이의 분포</span></span>
<span id="cb87-13"><a href="데이터-전처리.html#cb87-13" tabindex="-1"></a></span>
<span id="cb87-14"><a href="데이터-전처리.html#cb87-14" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb87-15"><a href="데이터-전처리.html#cb87-15" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(name) <span class="sc">==</span> <span class="dv">15</span>) <span class="sc">%&gt;%</span>                <span class="co"># 가장 긴 이름 찾기</span></span>
<span id="cb87-16"><a href="데이터-전처리.html#cb87-16" tabindex="-1"></a>  <span class="fu">count</span>(name, <span class="at">wt =</span> n, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="str_sub-함수" class="section level4 hasAnchor" number="6.3.2.2">
<h4><span class="header-section-number">6.3.2.2</span> str_sub() 함수<a href="데이터-전처리.html#str_sub-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 특정 위치의 문자 추출</li>
<li>매개변수 <code>start</code>, <code>end</code>도 포함되기 때문에 반환되는 문자열의 길이는 end - start + 1임</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="데이터-전처리.html#cb88-1" tabindex="-1"></a><span class="co"># Example 1</span></span>
<span id="cb88-2"><a href="데이터-전처리.html#cb88-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>)</span>
<span id="cb88-3"><a href="데이터-전처리.html#cb88-3" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="dv">1</span>, <span class="dv">3</span>)                         <span class="co"># 문자열의 1번째 문자부터 3번째 문자까지 추출</span></span>
<span id="cb88-4"><a href="데이터-전처리.html#cb88-4" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)                       <span class="co"># 문자열의 마지막에서 3번째 문자부터 마지막 문자까지 추출</span></span>
<span id="cb88-5"><a href="데이터-전처리.html#cb88-5" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">1</span>, <span class="dv">5</span>)                       <span class="co"># 문자열이 너무 짧을 때도 에러는 발생하지 않음!</span></span>
<span id="cb88-6"><a href="데이터-전처리.html#cb88-6" tabindex="-1"></a></span>
<span id="cb88-7"><a href="데이터-전처리.html#cb88-7" tabindex="-1"></a></span>
<span id="cb88-8"><a href="데이터-전처리.html#cb88-8" tabindex="-1"></a><span class="co"># Example 2</span></span>
<span id="cb88-9"><a href="데이터-전처리.html#cb88-9" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb88-10"><a href="데이터-전처리.html#cb88-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">first =</span> <span class="fu">str_sub</span>(name, <span class="dv">1</span>, <span class="dv">1</span>),    <span class="co"># 이름의 첫번째 문자 추출</span></span>
<span id="cb88-11"><a href="데이터-전처리.html#cb88-11" tabindex="-1"></a>         <span class="at">last =</span> <span class="fu">str_sub</span>(name, <span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>))   <span class="co"># 이름의 마지막 문자 추출</span></span></code></pre></div>
</div>
<div id="str_to_lower-str_to_upper-함수" class="section level4 hasAnchor" number="6.3.2.3">
<h4><span class="header-section-number">6.3.2.3</span> str_to_lower(), str_to_upper() 함수<a href="데이터-전처리.html#str_to_lower-str_to_upper-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>대소문자 변환</li>
<li>언어마다 대소문자 변경 규칙이 다르기 때문에 주의해야 함</li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="데이터-전처리.html#cb89-1" tabindex="-1"></a><span class="fu">str_to_lower</span>(<span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>))</span>
<span id="cb89-2"><a href="데이터-전처리.html#cb89-2" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="fu">c</span>(<span class="st">&quot;Apple&quot;</span>, <span class="st">&quot;Banana&quot;</span>, <span class="st">&quot;Pear&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="데이터에서-문자열-생성" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> 데이터에서 문자열 생성<a href="데이터-전처리.html#데이터에서-문자열-생성" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="str_c-함수" class="section level4 hasAnchor" number="6.3.3.1">
<h4><span class="header-section-number">6.3.3.1</span> str_c() 함수<a href="데이터-전처리.html#str_c-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>두 개 이상의 벡터에 대해 원소별로 결합하여 단일 문자형 벡터(single character vector)로 만듬</li>
<li>매개변수 <code>sep</code> - 입력된 벡터 결합할 때 사용하는 문자</li>
<li>매개변수 <code>collapse</code> - 입력된 벡터를 단일 문자열(single string)로 결합할 때 사용하는 문자</li>
<li>결측값(NA)에 대한 결과는 결측값임</li>
<li><code>dplyr::mutate()</code> 함수와 함께 사용</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="데이터-전처리.html#cb90-1" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Letter: &quot;</span>, letters)</span>
<span id="cb90-2"><a href="데이터-전처리.html#cb90-2" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;Letter&quot;</span>, letters, <span class="at">sep =</span> <span class="st">&quot;: &quot;</span>)</span>
<span id="cb90-3"><a href="데이터-전처리.html#cb90-3" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="st">&quot; is for&quot;</span>, <span class="st">&quot;...&quot;</span>)</span>
<span id="cb90-4"><a href="데이터-전처리.html#cb90-4" tabindex="-1"></a><span class="fu">str_c</span>(letters[<span class="sc">-</span><span class="dv">26</span>], <span class="st">&quot; comes before &quot;</span>, letters[<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb90-5"><a href="데이터-전처리.html#cb90-5" tabindex="-1"></a></span>
<span id="cb90-6"><a href="데이터-전처리.html#cb90-6" tabindex="-1"></a><span class="co"># 단일 문자열(single string)로 결합</span></span>
<span id="cb90-7"><a href="데이터-전처리.html#cb90-7" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb90-8"><a href="데이터-전처리.html#cb90-8" tabindex="-1"></a><span class="fu">str_c</span>(letters, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb90-9"><a href="데이터-전처리.html#cb90-9" tabindex="-1"></a></span>
<span id="cb90-10"><a href="데이터-전처리.html#cb90-10" tabindex="-1"></a><span class="co"># 결측값(NA)이 있는 경우</span></span>
<span id="cb90-11"><a href="데이터-전처리.html#cb90-11" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;b&quot;</span>), <span class="st">&quot;-d&quot;</span>)</span>
<span id="cb90-12"><a href="데이터-전처리.html#cb90-12" tabindex="-1"></a></span>
<span id="cb90-13"><a href="데이터-전처리.html#cb90-13" tabindex="-1"></a><span class="co"># dplyr::mutate()와 함께 사용</span></span>
<span id="cb90-14"><a href="데이터-전처리.html#cb90-14" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>))</span>
<span id="cb90-15"><a href="데이터-전처리.html#cb90-15" tabindex="-1"></a>info <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">greeting =</span> <span class="fu">str_c</span>(<span class="st">&quot;Hi, &quot;</span>, name, <span class="st">&quot;!&quot;</span>))</span></code></pre></div>
</div>
<div id="str_glue-함수" class="section level4 hasAnchor" number="6.3.3.2">
<h4><span class="header-section-number">6.3.3.2</span> str_glue() 함수<a href="데이터-전처리.html#str_glue-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>고정 문자열과 변수 문자열을 결합할 때 <code>""</code>를 반복적으로 타이핑하는 것을 방지하여 가독성을 높임</li>
<li><code>{}</code>안에 작성된 코드는 문자열 외부에 있는 것처럼 실행</li>
</ul>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="데이터-전처리.html#cb91-1" tabindex="-1"></a>info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kim&quot;</span>, <span class="st">&quot;Lee&quot;</span>, <span class="st">&quot;Park&quot;</span>))</span>
<span id="cb91-2"><a href="데이터-전처리.html#cb91-2" tabindex="-1"></a>info <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">greeting =</span> <span class="fu">str_glue</span>(<span class="st">&quot;Hi, {name}!&quot;</span>))</span></code></pre></div>
</div>
<div id="str_flatten-함수" class="section level4 hasAnchor" number="6.3.3.3">
<h4><span class="header-section-number">6.3.3.3</span> str_flatten() 함수<a href="데이터-전처리.html#str_flatten-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>벡터의 각 요소를 하나의 문자열로 결합</li>
<li><code>dplyr::summarise()</code> 함수와 함께 사용</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="데이터-전처리.html#cb92-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb92-2"><a href="데이터-전처리.html#cb92-2" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>))</span>
<span id="cb92-3"><a href="데이터-전처리.html#cb92-3" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span>
<span id="cb92-4"><a href="데이터-전처리.html#cb92-4" tabindex="-1"></a><span class="fu">str_flatten</span>(<span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>, <span class="at">last =</span> <span class="st">&quot;, and &quot;</span>)</span>
<span id="cb92-5"><a href="데이터-전처리.html#cb92-5" tabindex="-1"></a></span>
<span id="cb92-6"><a href="데이터-전처리.html#cb92-6" tabindex="-1"></a></span>
<span id="cb92-7"><a href="데이터-전처리.html#cb92-7" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb92-8"><a href="데이터-전처리.html#cb92-8" tabindex="-1"></a>mytbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Marvin&quot;</span>, <span class="st">&quot;Terence&quot;</span>, <span class="st">&quot;Terence&quot;</span>, <span class="st">&quot;Terence&quot;</span>),</span>
<span id="cb92-9"><a href="데이터-전처리.html#cb92-9" tabindex="-1"></a>                <span class="at">fruit =</span> <span class="fu">c</span>(<span class="st">&quot;banana&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="st">&quot;nectarine&quot;</span>, <span class="st">&quot;cantaloupe&quot;</span>, <span class="st">&quot;papaya&quot;</span>, <span class="st">&quot;madarine&quot;</span>))</span>
<span id="cb92-10"><a href="데이터-전처리.html#cb92-10" tabindex="-1"></a>mytbl <span class="sc">%&gt;%</span></span>
<span id="cb92-11"><a href="데이터-전처리.html#cb92-11" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb92-12"><a href="데이터-전처리.html#cb92-12" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fruits =</span> <span class="fu">str_flatten</span>(fruit, <span class="st">&quot;, &quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="정규-표현식을-이용한-패턴-매칭" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> 정규 표현식을 이용한 패턴 매칭<a href="데이터-전처리.html#정규-표현식을-이용한-패턴-매칭" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="정규-표현식regular-expression-regex-regexp" class="section level4 hasAnchor" number="6.3.4.1">
<h4><span class="header-section-number">6.3.4.1</span> 정규 표현식(regular expression; regex, regexp)<a href="데이터-전처리.html#정규-표현식regular-expression-regex-regexp" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>주어진 문자열에 특정한 패턴이 있는 경우, 해당 패턴을 일반화(수식화)한 문자열</li>
<li>특정 패턴을 표현한 문자열을 메타 문자(meta character)라 함</li>
<li>일반적으로 특정 패턴을 가지는 문자열을 찾고, 다른 값으로 대체하기 위해 사용</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">표현식</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">.</td>
<td align="left">무엇이든 한 글자를 의미</td>
</tr>
<tr class="even">
<td align="center">^</td>
<td align="left">^ 뒤에 오는 표현식으로 시작하는 경우</td>
</tr>
<tr class="odd">
<td align="center">$</td>
<td align="left">$ 앞에 오는 표현식으로 끝나는 경우</td>
</tr>
<tr class="even">
<td align="center">?</td>
<td align="left">? 앞에 오는 표현식이 0 또는 1번(0 or 1) 일치하는 경우</td>
</tr>
<tr class="odd">
<td align="center">+</td>
<td align="left">+ 앞에 오는 표현식이 1번 또는 그 이상(1 or more) 일치하는 경우</td>
</tr>
<tr class="even">
<td align="center">*</td>
<td align="left">* 앞에 오는 표현식이 0번 또는 그 이상(0 or more) 포함하는 경우</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="데이터-전처리.html#cb93-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb93-2"><a href="데이터-전처리.html#cb93-2" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;an&quot;</span>)                        <span class="co"># matching exact strings</span></span>
<span id="cb93-3"><a href="데이터-전처리.html#cb93-3" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;.a.&quot;</span>)                       <span class="co"># matching any character(except a newline)</span></span>
<span id="cb93-4"><a href="데이터-전처리.html#cb93-4" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;^a&quot;</span>)                        <span class="co"># matching the start of the string</span></span>
<span id="cb93-5"><a href="데이터-전처리.html#cb93-5" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;a$&quot;</span>)                        <span class="co"># matching the end of the string</span></span>
<span id="cb93-6"><a href="데이터-전처리.html#cb93-6" tabindex="-1"></a></span>
<span id="cb93-7"><a href="데이터-전처리.html#cb93-7" tabindex="-1"></a><span class="do">## how many times a pattern mathces?</span></span>
<span id="cb93-8"><a href="데이터-전처리.html#cb93-8" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;1888 is the longest year in Roman numerals: MDCCCLXXXVIII&quot;</span></span>
<span id="cb93-9"><a href="데이터-전처리.html#cb93-9" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="st">&quot;CC?&quot;</span>)</span>
<span id="cb93-10"><a href="데이터-전처리.html#cb93-10" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="st">&quot;CC+&quot;</span>)</span>
<span id="cb93-11"><a href="데이터-전처리.html#cb93-11" tabindex="-1"></a><span class="fu">str_view_all</span>(x, <span class="st">&quot;CC*&quot;</span>)</span></code></pre></div>
<p><br></p>
<ul>
<li><code>[]</code>을 사용하여 문자 집합을 매칭함
<ul>
<li><code>[abcd]</code> - “a”,“b”,“c”,“d” 중 하나 이상과 매칭</li>
<li><code>[^abcd]</code> - “a”,“b”,“c”,“d”를 제외한 어느 것과도 매칭</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="데이터-전처리.html#cb94-1" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hadley&quot;</span>, <span class="st">&quot;Mine&quot;</span>, <span class="st">&quot;Garrett&quot;</span>)</span>
<span id="cb94-2"><a href="데이터-전처리.html#cb94-2" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[aeiou]&quot;</span>)</span>
<span id="cb94-3"><a href="데이터-전처리.html#cb94-3" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[^aeiou]&quot;</span>)</span>
<span id="cb94-4"><a href="데이터-전처리.html#cb94-4" tabindex="-1"></a><span class="fu">str_view_all</span>(names, <span class="st">&quot;[^aeiou]+&quot;</span>)         <span class="co"># 같은 문자가 매칭되었지만 매칭 개수가 다름</span></span></code></pre></div>
<p><br></p>
<ul>
<li>정규 표현식에서 특수 동작이 아닌 기호 자체로 사용하기 위해서는 그 앞에 <code>\</code> 사용
<ul>
<li>작은 따옴표 <code>'\''</code></li>
<li>큰 따옴표 <code>"\""</code></li>
<li>백슬래시 <code>"\\\\"</code></li>
<li>점(dot) <code>\\.</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="데이터-전처리.html#cb95-1" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;a</span><span class="sc">\\</span><span class="st">b&quot;</span>), <span class="st">&quot;</span><span class="sc">\\\\</span><span class="st">&quot;</span>)</span>
<span id="cb95-2"><a href="데이터-전처리.html#cb95-2" tabindex="-1"></a><span class="fu">str_view</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;a.c&quot;</span>, <span class="st">&quot;bef&quot;</span>), <span class="st">&quot;a</span><span class="sc">\\</span><span class="st">.c&quot;</span>)</span></code></pre></div>
</div>
<div id="str_detect-함수" class="section level4 hasAnchor" number="6.3.4.2">
<h4><span class="header-section-number">6.3.4.2</span> str_detect() 함수<a href="데이터-전처리.html#str_detect-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>패턴이 일치하면 TRUE 반환</li>
<li>정규 표현식을 적절하게 사용하면 매우 유용함</li>
<li><code>dplyr::filter()</code>와 함께 사용</li>
</ul>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="데이터-전처리.html#cb96-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb96-2"><a href="데이터-전처리.html#cb96-2" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>), <span class="st">&quot;e&quot;</span>)</span>
<span id="cb96-3"><a href="데이터-전처리.html#cb96-3" tabindex="-1"></a></span>
<span id="cb96-4"><a href="데이터-전처리.html#cb96-4" tabindex="-1"></a></span>
<span id="cb96-5"><a href="데이터-전처리.html#cb96-5" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb96-6"><a href="데이터-전처리.html#cb96-6" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_detect</span>(words, <span class="st">&quot;^t&quot;</span>))             <span class="co"># t로 시작하는 단어의 개수</span></span>
<span id="cb96-7"><a href="데이터-전처리.html#cb96-7" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">str_detect</span>(words, <span class="st">&quot;[aeiou]$&quot;</span>))      <span class="co"># 모음으로 끝나는 단어의 비율</span></span>
<span id="cb96-8"><a href="데이터-전처리.html#cb96-8" tabindex="-1"></a></span>
<span id="cb96-9"><a href="데이터-전처리.html#cb96-9" tabindex="-1"></a></span>
<span id="cb96-10"><a href="데이터-전처리.html#cb96-10" tabindex="-1"></a><span class="do">## Example 3</span></span>
<span id="cb96-11"><a href="데이터-전처리.html#cb96-11" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;x&quot;</span>))</span>
<span id="cb96-12"><a href="데이터-전처리.html#cb96-12" tabindex="-1"></a></span>
<span id="cb96-13"><a href="데이터-전처리.html#cb96-13" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb96-14"><a href="데이터-전처리.html#cb96-14" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb96-15"><a href="데이터-전처리.html#cb96-15" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prop_x =</span> <span class="fu">mean</span>(<span class="fu">str_detect</span>(name, <span class="st">&quot;x&quot;</span>)))</span></code></pre></div>
</div>
<div id="str_count-함수" class="section level4 hasAnchor" number="6.3.4.3">
<h4><span class="header-section-number">6.3.4.3</span> str_count() 함수<a href="데이터-전처리.html#str_count-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>str_detect()</code> 함수의 변형으로, 일치하는 패턴의 개수 반환</li>
<li><code>dplyr::mutate()</code>와 함께 사용</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="데이터-전처리.html#cb97-1" tabindex="-1"></a><span class="fu">str_count</span>(<span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>), <span class="st">&quot;p&quot;</span>)</span>
<span id="cb97-2"><a href="데이터-전처리.html#cb97-2" tabindex="-1"></a></span>
<span id="cb97-3"><a href="데이터-전처리.html#cb97-3" tabindex="-1"></a>babynames <span class="sc">%&gt;%</span> </span>
<span id="cb97-4"><a href="데이터-전처리.html#cb97-4" tabindex="-1"></a>  <span class="fu">count</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb97-5"><a href="데이터-전처리.html#cb97-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vowels =</span> <span class="fu">str_count</span>(name, <span class="st">&quot;[aeiou]&quot;</span>),                     <span class="co"># 모음 개수 확인</span></span>
<span id="cb97-6"><a href="데이터-전처리.html#cb97-6" tabindex="-1"></a>         <span class="at">consonants =</span> <span class="fu">str_count</span>(name, <span class="st">&quot;[^aeiou]&quot;</span>))                <span class="co"># 자음 개수 확인</span></span></code></pre></div>
</div>
<div id="str_replace-str_replace_all-함수" class="section level4 hasAnchor" number="6.3.4.4">
<h4><span class="header-section-number">6.3.4.4</span> str_replace(), str_replace_all() 함수<a href="데이터-전처리.html#str_replace-str_replace_all-함수" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>일치하는 패턴을 새 문자열로 변경</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="데이터-전처리.html#cb98-1" tabindex="-1"></a><span class="do">## Example 1</span></span>
<span id="cb98-2"><a href="데이터-전처리.html#cb98-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;pear&quot;</span>, <span class="st">&quot;banana&quot;</span>)</span>
<span id="cb98-3"><a href="데이터-전처리.html#cb98-3" tabindex="-1"></a><span class="fu">str_replace</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)           <span class="co"># 처음으로 일치하는 패턴만 변경</span></span>
<span id="cb98-4"><a href="데이터-전처리.html#cb98-4" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="st">&quot;[aeiou]&quot;</span>, <span class="st">&quot;-&quot;</span>)       <span class="co"># 일치하는 모든 패턴을 변경</span></span>
<span id="cb98-5"><a href="데이터-전처리.html#cb98-5" tabindex="-1"></a></span>
<span id="cb98-6"><a href="데이터-전처리.html#cb98-6" tabindex="-1"></a></span>
<span id="cb98-7"><a href="데이터-전처리.html#cb98-7" tabindex="-1"></a><span class="do">## Example 2</span></span>
<span id="cb98-8"><a href="데이터-전처리.html#cb98-8" tabindex="-1"></a><span class="co"># 벡터를 이용하여 다중 대체(multiple replacement)할 수 있음</span></span>
<span id="cb98-9"><a href="데이터-전처리.html#cb98-9" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1 house&quot;</span>, <span class="st">&quot;2 cars&quot;</span>, <span class="st">&quot;3 people&quot;</span>)</span>
<span id="cb98-10"><a href="데이터-전처리.html#cb98-10" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="fu">c</span>(<span class="st">&quot;1&quot;</span> <span class="ot">=</span> <span class="st">&quot;one&quot;</span>, <span class="st">&quot;2&quot;</span> <span class="ot">=</span> <span class="st">&quot;two&quot;</span>, <span class="st">&quot;3&quot;</span> <span class="ot">=</span> <span class="st">&quot;three&quot;</span>))</span></code></pre></div>
<hr />
</div>
</div>
</div>
<div id="forcats-패키지" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> forcats 패키지<a href="데이터-전처리.html#forcats-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="forcats-패키지-소개" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> forcats 패키지 소개<a href="데이터-전처리.html#forcats-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>팩터(factor)를 다루는 함수 제공
<ul>
<li>팩터는 범주형 변수에 사용하는 데이터 객체로, 문자형보다 다루기 더 쉬움</li>
<li>범주형 변수는 가질 수 있는 값이 미리 고정되고 알려져 있음</li>
<li>문자형 벡터를 알파벳순이 아닌 순서로 표현하고 싶을 때 유용</li>
</ul></li>
<li>[예제] General Social Survey
<ul>
<li>시카고 대학교의 독립연구기관 NORC에서 장기간 수행한 General Social Survey의 샘플 테이터</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">변수</th>
<th align="left">설명</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">year</td>
<td align="left">조사 연도, 2000~2014년(2년 주기)</td>
</tr>
<tr class="even">
<td align="center">marital</td>
<td align="left">결혼 상태</td>
</tr>
<tr class="odd">
<td align="center">age</td>
<td align="left">연령</td>
</tr>
<tr class="even">
<td align="center">race</td>
<td align="left">인종</td>
</tr>
<tr class="odd">
<td align="center">rincome</td>
<td align="left">소득</td>
</tr>
<tr class="even">
<td align="center">partyid</td>
<td align="left">정치 성향</td>
</tr>
<tr class="odd">
<td align="center">relig</td>
<td align="left">종교</td>
</tr>
<tr class="even">
<td align="center">denom</td>
<td align="left">교파</td>
</tr>
<tr class="odd">
<td align="center">tvhours</td>
<td align="left">하루 TV 시청 시간</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="데이터-전처리.html#cb99-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb99-2"><a href="데이터-전처리.html#cb99-2" tabindex="-1"></a>gss_cat</span></code></pre></div>
</div>
<div id="팩터-수준levels-재정렬" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> 팩터 수준(levels) 재정렬<a href="데이터-전처리.html#팩터-수준levels-재정렬" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>처음 나타나는 순서대로 재정렬 - <code>fct_inorder()</code> 함수</li>
<li>각 수준의 빈도가 큰 순서대로 재정렬 - <code>fct_infreq()</code> 함수</li>
<li>수준의 수치 값(numeric value) 순서대로 재정렬 - <code>fct_inseq()</code> 함수</li>
<li>팩터 수준을 반대로 재정렬 - <code>fct_rev()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="데이터-전처리.html#cb100-1" tabindex="-1"></a>fct1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;c&quot;</span>))</span>
<span id="cb100-2"><a href="데이터-전처리.html#cb100-2" tabindex="-1"></a><span class="fu">fct_inorder</span>(fct1)                                    <span class="co"># Levels: b a c</span></span>
<span id="cb100-3"><a href="데이터-전처리.html#cb100-3" tabindex="-1"></a><span class="fu">fct_infreq</span>(fct2)                                     <span class="co"># Levels: c b a</span></span>
<span id="cb100-4"><a href="데이터-전처리.html#cb100-4" tabindex="-1"></a></span>
<span id="cb100-5"><a href="데이터-전처리.html#cb100-5" tabindex="-1"></a></span>
<span id="cb100-6"><a href="데이터-전처리.html#cb100-6" tabindex="-1"></a>fct2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span>, <span class="st">&quot;1&quot;</span>))</span>
<span id="cb100-7"><a href="데이터-전처리.html#cb100-7" tabindex="-1"></a><span class="fu">fct_inseq</span>(fct2)                                      <span class="co"># Levels : 1 2 3</span></span>
<span id="cb100-8"><a href="데이터-전처리.html#cb100-8" tabindex="-1"></a></span>
<span id="cb100-9"><a href="데이터-전처리.html#cb100-9" tabindex="-1"></a><span class="fu">fct_rev</span>(fct1)</span>
<span id="cb100-10"><a href="데이터-전처리.html#cb100-10" tabindex="-1"></a><span class="fu">fct_rev</span>(fct2)</span>
<span id="cb100-11"><a href="데이터-전처리.html#cb100-11" tabindex="-1"></a></span>
<span id="cb100-12"><a href="데이터-전처리.html#cb100-12" tabindex="-1"></a><span class="co"># fct_infreq(), fct_rev()는 조합해서 사용 가능</span></span>
<span id="cb100-13"><a href="데이터-전처리.html#cb100-13" tabindex="-1"></a><span class="co"># marital 수준은 각 수준의 빈도에 대해 오름차순으로 재정렬됨</span></span>
<span id="cb100-14"><a href="데이터-전처리.html#cb100-14" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb100-15"><a href="데이터-전처리.html#cb100-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marital =</span> marital <span class="sc">%&gt;%</span> <span class="fu">fct_infreq</span>() <span class="sc">%&gt;%</span> <span class="fu">fct_rev</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb100-16"><a href="데이터-전처리.html#cb100-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(marital)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><br></p>
<ul>
<li>특정 변수를 기준으로 재정렬 - <code>fct_reorder()</code> 함수</li>
<li>특정 수준을 맨 앞으로 배치 - <code>fct_relevel()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="데이터-전처리.html#cb101-1" tabindex="-1"></a><span class="do">## Example for fct_reorder()</span></span>
<span id="cb101-2"><a href="데이터-전처리.html#cb101-2" tabindex="-1"></a><span class="co"># 결혼 상태에 따른 하루 평균 TV 시청 시간</span></span>
<span id="cb101-3"><a href="데이터-전처리.html#cb101-3" tabindex="-1"></a>summary1 <span class="ot">&lt;-</span> gss_cat <span class="sc">%&gt;%</span> </span>
<span id="cb101-4"><a href="데이터-전처리.html#cb101-4" tabindex="-1"></a>              <span class="fu">group_by</span>(marital) <span class="sc">%&gt;%</span> </span>
<span id="cb101-5"><a href="데이터-전처리.html#cb101-5" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">tvhours =</span> <span class="fu">mean</span>(tvhours, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb101-6"><a href="데이터-전처리.html#cb101-6" tabindex="-1"></a>                        <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb101-7"><a href="데이터-전처리.html#cb101-7" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">marital =</span> <span class="fu">fct_reorder</span>(marital, tvhours))</span>
<span id="cb101-8"><a href="데이터-전처리.html#cb101-8" tabindex="-1"></a></span>
<span id="cb101-9"><a href="데이터-전처리.html#cb101-9" tabindex="-1"></a><span class="do">## [그래프를 통한 확인]</span></span>
<span id="cb101-10"><a href="데이터-전처리.html#cb101-10" tabindex="-1"></a><span class="co"># 하루 평균 TV 시청 시간을 기준으로 marital 수준이 재정렬됨</span></span>
<span id="cb101-11"><a href="데이터-전처리.html#cb101-11" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb101-12"><a href="데이터-전처리.html#cb101-12" tabindex="-1"></a><span class="fu">ggplot</span>(summary1, <span class="fu">aes</span>(tvhours, marital)) <span class="sc">+</span></span>
<span id="cb101-13"><a href="데이터-전처리.html#cb101-13" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb101-14"><a href="데이터-전처리.html#cb101-14" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb101-15"><a href="데이터-전처리.html#cb101-15" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>))</span>
<span id="cb101-16"><a href="데이터-전처리.html#cb101-16" tabindex="-1"></a></span>
<span id="cb101-17"><a href="데이터-전처리.html#cb101-17" tabindex="-1"></a></span>
<span id="cb101-18"><a href="데이터-전처리.html#cb101-18" tabindex="-1"></a><span class="do">## Example for fct_relevel()</span></span>
<span id="cb101-19"><a href="데이터-전처리.html#cb101-19" tabindex="-1"></a><span class="co"># 소득에 따른 평균 연령</span></span>
<span id="cb101-20"><a href="데이터-전처리.html#cb101-20" tabindex="-1"></a>summary2 <span class="ot">&lt;-</span> gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb101-21"><a href="데이터-전처리.html#cb101-21" tabindex="-1"></a>              <span class="fu">group_by</span>(rincome) <span class="sc">%&gt;%</span></span>
<span id="cb101-22"><a href="데이터-전처리.html#cb101-22" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb101-23"><a href="데이터-전처리.html#cb101-23" tabindex="-1"></a></span>
<span id="cb101-24"><a href="데이터-전처리.html#cb101-24" tabindex="-1"></a><span class="do">## [그래프를 통한 확인]</span></span>
<span id="cb101-25"><a href="데이터-전처리.html#cb101-25" tabindex="-1"></a><span class="co"># reorder() 함수를 사용하면 어떤 소득 집단이 평균 연령이 가장 높고 낮은지 파악하기 쉬우나,</span></span>
<span id="cb101-26"><a href="데이터-전처리.html#cb101-26" tabindex="-1"></a><span class="co"># rincome 변수는 순서형 변수(ordinal variable)이기 때문에 이는 바람직하지 않음</span></span>
<span id="cb101-27"><a href="데이터-전처리.html#cb101-27" tabindex="-1"></a><span class="co"># relevel() 함수를 사용하여 &quot;Not applicable&quot; 수준을 맨 앞으로 배치할 수 있음</span></span>
<span id="cb101-28"><a href="데이터-전처리.html#cb101-28" tabindex="-1"></a><span class="fu">ggplot</span>(summary2, <span class="fu">aes</span>(age, <span class="fu">fct_reorder</span>(rincome, age))) <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb101-29"><a href="데이터-전처리.html#cb101-29" tabindex="-1"></a><span class="fu">ggplot</span>(summary2, <span class="fu">aes</span>(age, <span class="fu">fct_relevel</span>(rincome, <span class="st">&quot;Not applicable&quot;</span>))) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
</div>
<div id="팩터-수준levels-변경" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> 팩터 수준(levels) 변경<a href="데이터-전처리.html#팩터-수준levels-변경" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>fct_recode()</code> 함수
<ul>
<li>명시적으로 언급되지 않은 수준은 그대로 유지함</li>
<li>그룹으로 결합하려면 이전 수준을 동일한 새로운 수준에 할당</li>
<li>※ 주의 : 서로 같지 않은 범주를 함께 묶는다면 잘못된 결과를 도출할 수 있음</li>
</ul></li>
<li><code>fct_collapse()</code> 함수
<ul>
<li>여러 개의 수준을 하나로 병합</li>
<li>새로운 수준에 대해 이전 수준으로 이루어진 벡터를 제공</li>
</ul></li>
<li><code>fct_lump()</code> 함수
<ul>
<li>상대적으로 빈도가 낮은 소규모 그룹을 하나로 병합</li>
<li>매개변수 <code>n</code> - Other를 제외한 그룹 개수 지정</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="데이터-전처리.html#cb102-1" tabindex="-1"></a><span class="do">## Example 1 for fct_recode()</span></span>
<span id="cb102-2"><a href="데이터-전처리.html#cb102-2" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb102-3"><a href="데이터-전처리.html#cb102-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb102-4"><a href="데이터-전처리.html#cb102-4" tabindex="-1"></a>                              <span class="st">&quot;Republican, strong&quot;</span>    <span class="ot">=</span> <span class="st">&quot;Strong republican&quot;</span>,</span>
<span id="cb102-5"><a href="데이터-전처리.html#cb102-5" tabindex="-1"></a>                              <span class="st">&quot;Republican, weak&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Not str republican&quot;</span>,</span>
<span id="cb102-6"><a href="데이터-전처리.html#cb102-6" tabindex="-1"></a>                              <span class="st">&quot;Independent, near rep&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near rep&quot;</span>,</span>
<span id="cb102-7"><a href="데이터-전처리.html#cb102-7" tabindex="-1"></a>                              <span class="st">&quot;Independent, near dem&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near dem&quot;</span>,</span>
<span id="cb102-8"><a href="데이터-전처리.html#cb102-8" tabindex="-1"></a>                              <span class="st">&quot;Democrat, weak&quot;</span>        <span class="ot">=</span> <span class="st">&quot;Not str democrat&quot;</span>,</span>
<span id="cb102-9"><a href="데이터-전처리.html#cb102-9" tabindex="-1"></a>                              <span class="st">&quot;Democrat, strong&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Strong democrat&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-10"><a href="데이터-전처리.html#cb102-10" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb102-11"><a href="데이터-전처리.html#cb102-11" tabindex="-1"></a></span>
<span id="cb102-12"><a href="데이터-전처리.html#cb102-12" tabindex="-1"></a></span>
<span id="cb102-13"><a href="데이터-전처리.html#cb102-13" tabindex="-1"></a><span class="do">## Example 2 for fct_recode()</span></span>
<span id="cb102-14"><a href="데이터-전처리.html#cb102-14" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb102-15"><a href="데이터-전처리.html#cb102-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb102-16"><a href="데이터-전처리.html#cb102-16" tabindex="-1"></a>                              <span class="st">&quot;Republican, strong&quot;</span>    <span class="ot">=</span> <span class="st">&quot;Strong republican&quot;</span>,</span>
<span id="cb102-17"><a href="데이터-전처리.html#cb102-17" tabindex="-1"></a>                              <span class="st">&quot;Republican, weak&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Not str republican&quot;</span>,</span>
<span id="cb102-18"><a href="데이터-전처리.html#cb102-18" tabindex="-1"></a>                              <span class="st">&quot;Independent, near rep&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near rep&quot;</span>,</span>
<span id="cb102-19"><a href="데이터-전처리.html#cb102-19" tabindex="-1"></a>                              <span class="st">&quot;Independent, near dem&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near dem&quot;</span>,</span>
<span id="cb102-20"><a href="데이터-전처리.html#cb102-20" tabindex="-1"></a>                              <span class="st">&quot;Democrat, weak&quot;</span>        <span class="ot">=</span> <span class="st">&quot;Not str democrat&quot;</span>,</span>
<span id="cb102-21"><a href="데이터-전처리.html#cb102-21" tabindex="-1"></a>                              <span class="st">&quot;Democrat, strong&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Strong democrat&quot;</span>,</span>
<span id="cb102-22"><a href="데이터-전처리.html#cb102-22" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;No answer&quot;</span>,</span>
<span id="cb102-23"><a href="데이터-전처리.html#cb102-23" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;Don&#39;t know&quot;</span>,</span>
<span id="cb102-24"><a href="데이터-전처리.html#cb102-24" tabindex="-1"></a>                              <span class="st">&quot;Other&quot;</span>                 <span class="ot">=</span> <span class="st">&quot;Other party&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-25"><a href="데이터-전처리.html#cb102-25" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb102-26"><a href="데이터-전처리.html#cb102-26" tabindex="-1"></a></span>
<span id="cb102-27"><a href="데이터-전처리.html#cb102-27" tabindex="-1"></a></span>
<span id="cb102-28"><a href="데이터-전처리.html#cb102-28" tabindex="-1"></a><span class="do">## Example for fct_collapse()</span></span>
<span id="cb102-29"><a href="데이터-전처리.html#cb102-29" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb102-30"><a href="데이터-전처리.html#cb102-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partyid =</span> <span class="fu">fct_collapse</span>(partyid,</span>
<span id="cb102-31"><a href="데이터-전처리.html#cb102-31" tabindex="-1"></a>                                <span class="at">other =</span> <span class="fu">c</span>(<span class="st">&quot;No answer&quot;</span>, <span class="st">&quot;Don&#39;t know&quot;</span>, <span class="st">&quot;Other party&quot;</span>),</span>
<span id="cb102-32"><a href="데이터-전처리.html#cb102-32" tabindex="-1"></a>                                <span class="at">rep =</span> <span class="fu">c</span>(<span class="st">&quot;Strong republican&quot;</span>, <span class="st">&quot;Not str republican&quot;</span>),</span>
<span id="cb102-33"><a href="데이터-전처리.html#cb102-33" tabindex="-1"></a>                                <span class="at">ind =</span> <span class="fu">c</span>(<span class="st">&quot;Ind,near rep&quot;</span>, <span class="st">&quot;Independent&quot;</span>, <span class="st">&quot;Ind,near dem&quot;</span>),</span>
<span id="cb102-34"><a href="데이터-전처리.html#cb102-34" tabindex="-1"></a>                                <span class="at">dem =</span> <span class="fu">c</span>(<span class="st">&quot;Not str democrat&quot;</span>, <span class="st">&quot;Strong democrat&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb102-35"><a href="데이터-전처리.html#cb102-35" tabindex="-1"></a>  <span class="fu">count</span>(partyid)</span>
<span id="cb102-36"><a href="데이터-전처리.html#cb102-36" tabindex="-1"></a></span>
<span id="cb102-37"><a href="데이터-전처리.html#cb102-37" tabindex="-1"></a></span>
<span id="cb102-38"><a href="데이터-전처리.html#cb102-38" tabindex="-1"></a><span class="do">## Example 1 for fct_lump()</span></span>
<span id="cb102-39"><a href="데이터-전처리.html#cb102-39" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb102-40"><a href="데이터-전처리.html#cb102-40" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_lump</span>(relig)) <span class="sc">%&gt;%</span></span>
<span id="cb102-41"><a href="데이터-전처리.html#cb102-41" tabindex="-1"></a>  <span class="fu">count</span>(relig)</span>
<span id="cb102-42"><a href="데이터-전처리.html#cb102-42" tabindex="-1"></a></span>
<span id="cb102-43"><a href="데이터-전처리.html#cb102-43" tabindex="-1"></a></span>
<span id="cb102-44"><a href="데이터-전처리.html#cb102-44" tabindex="-1"></a><span class="do">## Example 2 for fct_lump()</span></span>
<span id="cb102-45"><a href="데이터-전처리.html#cb102-45" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span></span>
<span id="cb102-46"><a href="데이터-전처리.html#cb102-46" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relig =</span> <span class="fu">fct_lump</span>(relig, <span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-47"><a href="데이터-전처리.html#cb102-47" tabindex="-1"></a>  <span class="fu">count</span>(relig, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-48"><a href="데이터-전처리.html#cb102-48" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<hr />
</div>
</div>
<div id="lubridate-패키지" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> lubridate 패키지<a href="데이터-전처리.html#lubridate-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lubridate-패키지-소개" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> lubridate 패키지 소개<a href="데이터-전처리.html#lubridate-패키지-소개" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>날짜, 시간을 다루는 함수 제공</li>
<li>핵심 tidyverse에 포함되지 않으므로 별도로 불러와야 함</li>
</ul>
</div>
<div id="날짜시간-object" class="section level3 hasAnchor" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> 날짜/시간 object<a href="데이터-전처리.html#날짜시간-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="날짜시간-object-유형" class="section level4 hasAnchor" number="6.5.2.1">
<h4><span class="header-section-number">6.5.2.1</span> 날짜/시간 object 유형<a href="데이터-전처리.html#날짜시간-object-유형" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>date</strong> object - 날짜를 나타내며, tibble에서 &lt;date&gt;로 출력</li>
<li><strong>time</strong> object - 하루 중 시간을 나타내며, tibble에서 &lt;time&gt;로 출력</li>
<li><strong>date-time</strong> object - 날짜와 시간을 나타내므로 시점을 고유하게 식별함, tibble에서 &lt;dttm&gt;로 출력</li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="데이터-전처리.html#cb103-1" tabindex="-1"></a><span class="fu">today</span>()                                  <span class="co"># 오늘 날짜(date object)</span></span>
<span id="cb103-2"><a href="데이터-전처리.html#cb103-2" tabindex="-1"></a><span class="fu">now</span>()                                    <span class="co"># 현재 날짜 및 시간(date-time object)</span></span></code></pre></div>
</div>
<div id="문자열string로부터-날짜시간-object-생성" class="section level4 hasAnchor" number="6.5.2.2">
<h4><span class="header-section-number">6.5.2.2</span> 문자열(string)로부터 날짜/시간 object 생성<a href="데이터-전처리.html#문자열string로부터-날짜시간-object-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>문자열에서 연(year), 월(month), 일(day)의 순서를 확인한 후, 함수명 “y”, “m”, “d”를 같은 순서로 배치</li>
<li>date-time object를 생성하려면 <code>_</code>와 “h”, “m”, “s” 중 하나 이상을 추가</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="데이터-전처리.html#cb104-1" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb104-2"><a href="데이터-전처리.html#cb104-2" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2017-01-31&quot;</span>)</span>
<span id="cb104-3"><a href="데이터-전처리.html#cb104-3" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">&quot;January 31st, 2017&quot;</span>)</span>
<span id="cb104-4"><a href="데이터-전처리.html#cb104-4" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&quot;31-Jan-2017&quot;</span>)</span>
<span id="cb104-5"><a href="데이터-전처리.html#cb104-5" tabindex="-1"></a></span>
<span id="cb104-6"><a href="데이터-전처리.html#cb104-6" tabindex="-1"></a><span class="fu">ymd_hms</span>(<span class="st">&quot;2017-01-31 20:11:59&quot;</span>)</span>
<span id="cb104-7"><a href="데이터-전처리.html#cb104-7" tabindex="-1"></a><span class="fu">mdy_hm</span>(<span class="st">&quot;01/31/2017 08:01&quot;</span>)</span></code></pre></div>
</div>
<div id="개별-구성요소로부터-날짜시간-object-생성" class="section level4 hasAnchor" number="6.5.2.3">
<h4><span class="header-section-number">6.5.2.3</span> 개별 구성요소로부터 날짜/시간 object 생성<a href="데이터-전처리.html#개별-구성요소로부터-날짜시간-object-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>날짜/시간과 관련된 개별 구성요소들이 여러 열(변수)에 저장되어 있는 경우</li>
<li>date object - <code>make_date()</code> 함수</li>
<li>date-time object - <code>make_datetime()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="데이터-전처리.html#cb105-1" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb105-2"><a href="데이터-전처리.html#cb105-2" tabindex="-1"></a></span>
<span id="cb105-3"><a href="데이터-전처리.html#cb105-3" tabindex="-1"></a><span class="co"># 예정된 출발 일시</span></span>
<span id="cb105-4"><a href="데이터-전처리.html#cb105-4" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="데이터-전처리.html#cb105-5" tabindex="-1"></a>  <span class="fu">select</span>(year, month, day, hour, minute) <span class="sc">%&gt;%</span> </span>
<span id="cb105-6"><a href="데이터-전처리.html#cb105-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">departure =</span> <span class="fu">make_datetime</span>(year, month, day, hour, minute))</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="데이터-전처리.html#cb106-1" tabindex="-1"></a><span class="co"># 시간에 대해 HHMM 또는 HMM으로 저장된 값은 시(hour)와 분(minute)으로 나누는 사용자 정의 함수</span></span>
<span id="cb106-2"><a href="데이터-전처리.html#cb106-2" tabindex="-1"></a><span class="co"># [참고] %/% 나눗셈의 몫, %% 나눗셈의 나머지</span></span>
<span id="cb106-3"><a href="데이터-전처리.html#cb106-3" tabindex="-1"></a>make_datetime_100 <span class="ot">&lt;-</span> <span class="cf">function</span>(year, month, day, time) {</span>
<span id="cb106-4"><a href="데이터-전처리.html#cb106-4" tabindex="-1"></a>  <span class="fu">make_datetime</span>(year, month, day, time <span class="sc">%/%</span> <span class="dv">100</span>, time <span class="sc">%%</span> <span class="dv">100</span>)</span>
<span id="cb106-5"><a href="데이터-전처리.html#cb106-5" tabindex="-1"></a>}</span>
<span id="cb106-6"><a href="데이터-전처리.html#cb106-6" tabindex="-1"></a></span>
<span id="cb106-7"><a href="데이터-전처리.html#cb106-7" tabindex="-1"></a><span class="co"># 실제 출발 일시, 실제 도착 일시, 예정된 출발 일시, 예정된 도착 일시 생성</span></span>
<span id="cb106-8"><a href="데이터-전처리.html#cb106-8" tabindex="-1"></a>flights_dt <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb106-9"><a href="데이터-전처리.html#cb106-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_time), <span class="sc">!</span><span class="fu">is.na</span>(arr_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb106-10"><a href="데이터-전처리.html#cb106-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, dep_time),</span>
<span id="cb106-11"><a href="데이터-전처리.html#cb106-11" tabindex="-1"></a>         <span class="at">arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, arr_time),</span>
<span id="cb106-12"><a href="데이터-전처리.html#cb106-12" tabindex="-1"></a>         <span class="at">sched_dep_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_dep_time),</span>
<span id="cb106-13"><a href="데이터-전처리.html#cb106-13" tabindex="-1"></a>         <span class="at">sched_arr_time =</span> <span class="fu">make_datetime_100</span>(year, month, day, sched_arr_time)) <span class="sc">%&gt;%</span> </span>
<span id="cb106-14"><a href="데이터-전처리.html#cb106-14" tabindex="-1"></a>  <span class="fu">select</span>(origin, dest, <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>), <span class="fu">ends_with</span>(<span class="st">&quot;time&quot;</span>))</span></code></pre></div>
</div>
<div id="기존의-날짜시간-object로부터-날짜시간-object-생성" class="section level4 hasAnchor" number="6.5.2.4">
<h4><span class="header-section-number">6.5.2.4</span> 기존의 날짜/시간 object로부터 날짜/시간 object 생성<a href="데이터-전처리.html#기존의-날짜시간-object로부터-날짜시간-object-생성" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>date object와 date-time object의 상호 전환 - <code>as_datetime()</code>, <code>as_date()</code> 함수</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="데이터-전처리.html#cb107-1" tabindex="-1"></a><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span>
<span id="cb107-2"><a href="데이터-전처리.html#cb107-2" tabindex="-1"></a><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
</div>
</div>
<div id="날짜시간-구성요소" class="section level3 hasAnchor" number="6.5.3">
<h3><span class="header-section-number">6.5.3</span> 날짜/시간 구성요소<a href="데이터-전처리.html#날짜시간-구성요소" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>개별 구성요소 가져오기 - <code>year()</code>, <code>month()</code>, <code>week()</code>, <code>day()</code>, <code>hour()</code>, <code>minute()</code>, <code>second()</code> 함수</li>
<li>해당 연(year)을 기준으로 몇 번째 일(day)인지 반환 - <code>yday()</code></li>
<li>해당 월(month)을 기준으로 몇 번째 일(day)인지 반환 - <code>mday()</code></li>
<li>해당 주(week)에서 무슨 요일인지 반환 - <code>wday()</code>
<ul>
<li>1은 일요일, 7은 토요일을 의미</li>
</ul></li>
<li><code>month()</code>, <code>wday()</code> 함수 관련 매개변수
<ul>
<li>매개변수 <code>label</code> - TRUE이면 문자열, FALSE이면 숫자로 표시</li>
<li>매개변수 <code>abbr</code> - FALSE이면 이름 전체 반환(label이 FALSE인 경우 무시)</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="데이터-전처리.html#cb108-1" tabindex="-1"></a>datetime <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2016-07-08 12:34:56&quot;</span>)</span>
<span id="cb108-2"><a href="데이터-전처리.html#cb108-2" tabindex="-1"></a></span>
<span id="cb108-3"><a href="데이터-전처리.html#cb108-3" tabindex="-1"></a><span class="fu">year</span>(datetime)</span>
<span id="cb108-4"><a href="데이터-전처리.html#cb108-4" tabindex="-1"></a><span class="fu">month</span>(datetime)</span>
<span id="cb108-5"><a href="데이터-전처리.html#cb108-5" tabindex="-1"></a><span class="fu">month</span>(datetime, <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb108-6"><a href="데이터-전처리.html#cb108-6" tabindex="-1"></a><span class="fu">day</span>(datetime)</span>
<span id="cb108-7"><a href="데이터-전처리.html#cb108-7" tabindex="-1"></a><span class="fu">hour</span>(datetime)</span>
<span id="cb108-8"><a href="데이터-전처리.html#cb108-8" tabindex="-1"></a><span class="fu">minute</span>(datetime)</span>
<span id="cb108-9"><a href="데이터-전처리.html#cb108-9" tabindex="-1"></a><span class="fu">second</span>(datetime)</span>
<span id="cb108-10"><a href="데이터-전처리.html#cb108-10" tabindex="-1"></a></span>
<span id="cb108-11"><a href="데이터-전처리.html#cb108-11" tabindex="-1"></a><span class="fu">yday</span>(datetime)</span>
<span id="cb108-12"><a href="데이터-전처리.html#cb108-12" tabindex="-1"></a><span class="fu">mday</span>(datetime)</span>
<span id="cb108-13"><a href="데이터-전처리.html#cb108-13" tabindex="-1"></a><span class="fu">wday</span>(datetime)</span>
<span id="cb108-14"><a href="데이터-전처리.html#cb108-14" tabindex="-1"></a><span class="fu">wday</span>(datetime, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="시간-범위time-spans-object" class="section level3 hasAnchor" number="6.5.4">
<h3><span class="header-section-number">6.5.4</span> 시간 범위(time spans) object<a href="데이터-전처리.html#시간-범위time-spans-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="시간-범위-object-유형" class="section level4 hasAnchor" number="6.5.4.1">
<h4><span class="header-section-number">6.5.4.1</span> 시간 범위 object 유형<a href="데이터-전처리.html#시간-범위-object-유형" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>duration</strong> object : 정확한 초(second)를 나타냄</li>
<li><strong>period</strong> object : 주(week)와 월(month)과 같이 사람의 단위(human units)로 표현함</li>
<li><strong>interval</strong> object : 시작 시점과 종료 시점을 나타냄</li>
</ul>
</div>
<div id="duration-object" class="section level4 hasAnchor" number="6.5.4.2">
<h4><span class="header-section-number">6.5.4.2</span> duration object<a href="데이터-전처리.html#duration-object" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>date object에 뺄셈을 적용하면 difftime object가 생성되며, 이는 초(second), 분(minute), 시(hour), 일(day) 또는 주(week) 단위로 시간 범위를 기록하므로 작업이 어려움</li>
<li>이를 보완하기 위한 duration object는 항상 <strong>초(second) 단위</strong>를 사용하여 시간 범위를 나타냄
<ul>
<li>1분 = 60초, 1시간 = 3600초(60분), 1일 = 86400초(24시간), 1주일 = 604800초(7일)</li>
</ul></li>
<li>duration object는 덧셈, 뺄셈, 곱셈을 적용할 수 있음
<ul>
<li>윤년, 일광 절약 시간제(daylight saving time) 같은 규칙의 영향을 받기 때문에 시간(hour), 월(month), 연(year)과 같은 큰 시간 단위로 측정한 값에 대해 연산 결과가 실제와 항상 일치하지 않음</li>
<li>[참고] 일광 절약 시간제 - 하절기에 표준시를 원래 시간보다 한 시간 앞당긴 시간을 쓰는 것으로, 미국과 캐나다는 각 시간대의 지역 시간을 기준으로 3월 두 번째주 일요일 오전 2시부터 11월 첫 번째주 일요일 오전 2시까지에 적용함</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="데이터-전처리.html#cb109-1" tabindex="-1"></a><span class="do">## duration object 생성</span></span>
<span id="cb109-2"><a href="데이터-전처리.html#cb109-2" tabindex="-1"></a>dday <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">-</span> <span class="fu">ymd</span>(<span class="dv">19990113</span>)</span>
<span id="cb109-3"><a href="데이터-전처리.html#cb109-3" tabindex="-1"></a><span class="fu">as.duration</span>(dday)</span>
<span id="cb109-4"><a href="데이터-전처리.html#cb109-4" tabindex="-1"></a></span>
<span id="cb109-5"><a href="데이터-전처리.html#cb109-5" tabindex="-1"></a><span class="fu">dseconds</span>(<span class="dv">15</span>)</span>
<span id="cb109-6"><a href="데이터-전처리.html#cb109-6" tabindex="-1"></a><span class="fu">dminutes</span>(<span class="dv">10</span>)</span>
<span id="cb109-7"><a href="데이터-전처리.html#cb109-7" tabindex="-1"></a><span class="fu">dhours</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">24</span>))</span>
<span id="cb109-8"><a href="데이터-전처리.html#cb109-8" tabindex="-1"></a><span class="fu">ddays</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb109-9"><a href="데이터-전처리.html#cb109-9" tabindex="-1"></a><span class="fu">dweeks</span>(<span class="dv">3</span>)</span>
<span id="cb109-10"><a href="데이터-전처리.html#cb109-10" tabindex="-1"></a><span class="fu">dmonths</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb109-11"><a href="데이터-전처리.html#cb109-11" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb109-12"><a href="데이터-전처리.html#cb109-12" tabindex="-1"></a></span>
<span id="cb109-13"><a href="데이터-전처리.html#cb109-13" tabindex="-1"></a></span>
<span id="cb109-14"><a href="데이터-전처리.html#cb109-14" tabindex="-1"></a><span class="do">## 산술 연산</span></span>
<span id="cb109-15"><a href="데이터-전처리.html#cb109-15" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb109-16"><a href="데이터-전처리.html#cb109-16" tabindex="-1"></a><span class="fu">dyears</span>(<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">dweeks</span>(<span class="dv">12</span>) <span class="sc">+</span> <span class="fu">dhours</span>(<span class="dv">15</span>)</span>
<span id="cb109-17"><a href="데이터-전처리.html#cb109-17" tabindex="-1"></a></span>
<span id="cb109-18"><a href="데이터-전처리.html#cb109-18" tabindex="-1"></a>tomorrow <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">1</span>)</span>
<span id="cb109-19"><a href="데이터-전처리.html#cb109-19" tabindex="-1"></a>last_year <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">-</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb109-20"><a href="데이터-전처리.html#cb109-20" tabindex="-1"></a></span>
<span id="cb109-21"><a href="데이터-전처리.html#cb109-21" tabindex="-1"></a><span class="co"># daylight saving time</span></span>
<span id="cb109-22"><a href="데이터-전처리.html#cb109-22" tabindex="-1"></a>one_pm <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2016-03-12 13:00:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/New_York&quot;</span>)</span>
<span id="cb109-23"><a href="데이터-전처리.html#cb109-23" tabindex="-1"></a>one_pm                                        <span class="co"># &quot;2016-03-12 13:00:00 EST&quot;</span></span>
<span id="cb109-24"><a href="데이터-전처리.html#cb109-24" tabindex="-1"></a>one_pm <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">1</span>)                             <span class="co"># &quot;2016-03-13 14:00:00 EDT&quot;</span></span></code></pre></div>
</div>
<div id="period-object" class="section level4 hasAnchor" number="6.5.4.3">
<h4><span class="header-section-number">6.5.4.3</span> period object<a href="데이터-전처리.html#period-object" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>지정된 단위로 period object 생성</li>
<li>사람이 인식하는 단위로, 작동 방식이 보다 직관적임</li>
</ul>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="데이터-전처리.html#cb110-1" tabindex="-1"></a><span class="do">## period object 생성</span></span>
<span id="cb110-2"><a href="데이터-전처리.html#cb110-2" tabindex="-1"></a><span class="fu">seconds</span>(<span class="dv">15</span>)</span>
<span id="cb110-3"><a href="데이터-전처리.html#cb110-3" tabindex="-1"></a><span class="fu">minutes</span>(<span class="dv">10</span>)</span>
<span id="cb110-4"><a href="데이터-전처리.html#cb110-4" tabindex="-1"></a><span class="fu">hours</span>(<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">24</span>))</span>
<span id="cb110-5"><a href="데이터-전처리.html#cb110-5" tabindex="-1"></a><span class="fu">days</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb110-6"><a href="데이터-전처리.html#cb110-6" tabindex="-1"></a><span class="fu">weeks</span>(<span class="dv">3</span>)</span>
<span id="cb110-7"><a href="데이터-전처리.html#cb110-7" tabindex="-1"></a><span class="fu">months</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb110-8"><a href="데이터-전처리.html#cb110-8" tabindex="-1"></a><span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb110-9"><a href="데이터-전처리.html#cb110-9" tabindex="-1"></a></span>
<span id="cb110-10"><a href="데이터-전처리.html#cb110-10" tabindex="-1"></a></span>
<span id="cb110-11"><a href="데이터-전처리.html#cb110-11" tabindex="-1"></a><span class="do">## 산술 연산</span></span>
<span id="cb110-12"><a href="데이터-전처리.html#cb110-12" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> (<span class="fu">months</span>(<span class="dv">6</span>) <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">1</span>))</span>
<span id="cb110-13"><a href="데이터-전처리.html#cb110-13" tabindex="-1"></a><span class="fu">days</span>(<span class="dv">50</span>) <span class="sc">+</span> <span class="fu">hours</span>(<span class="dv">25</span>) <span class="sc">+</span> <span class="fu">minutes</span>(<span class="dv">2</span>)</span>
<span id="cb110-14"><a href="데이터-전처리.html#cb110-14" tabindex="-1"></a></span>
<span id="cb110-15"><a href="데이터-전처리.html#cb110-15" tabindex="-1"></a><span class="co"># 윤년</span></span>
<span id="cb110-16"><a href="데이터-전처리.html#cb110-16" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2016-01-01&quot;</span>) <span class="sc">+</span> <span class="fu">dyears</span>(<span class="dv">1</span>)</span>
<span id="cb110-17"><a href="데이터-전처리.html#cb110-17" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;2016-01-01&quot;</span>) <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb110-18"><a href="데이터-전처리.html#cb110-18" tabindex="-1"></a></span>
<span id="cb110-19"><a href="데이터-전처리.html#cb110-19" tabindex="-1"></a><span class="co"># daylight saving time</span></span>
<span id="cb110-20"><a href="데이터-전처리.html#cb110-20" tabindex="-1"></a>one_pm <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">&quot;2016-03-12 13:00:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/New_York&quot;</span>)</span>
<span id="cb110-21"><a href="데이터-전처리.html#cb110-21" tabindex="-1"></a>one_pm                                        <span class="co"># &quot;2016-03-12 13:00:00 EST&quot;</span></span>
<span id="cb110-22"><a href="데이터-전처리.html#cb110-22" tabindex="-1"></a>one_pm <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">1</span>)                              <span class="co"># &quot;2016-03-13 13:00:00 EDT&quot;</span></span>
<span id="cb110-23"><a href="데이터-전처리.html#cb110-23" tabindex="-1"></a></span>
<span id="cb110-24"><a href="데이터-전처리.html#cb110-24" tabindex="-1"></a></span>
<span id="cb110-25"><a href="데이터-전처리.html#cb110-25" tabindex="-1"></a><span class="do">## 심야 항공편의 도착 일시에 days(1)을 더해줌</span></span>
<span id="cb110-26"><a href="데이터-전처리.html#cb110-26" tabindex="-1"></a>flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb110-27"><a href="데이터-전처리.html#cb110-27" tabindex="-1"></a>  <span class="fu">filter</span>(arr_time <span class="sc">&lt;</span> dep_time)</span>
<span id="cb110-28"><a href="데이터-전처리.html#cb110-28" tabindex="-1"></a></span>
<span id="cb110-29"><a href="데이터-전처리.html#cb110-29" tabindex="-1"></a>flights_dt <span class="ot">&lt;-</span> flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb110-30"><a href="데이터-전처리.html#cb110-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overnight =</span> arr_time <span class="sc">&lt;</span> dep_time,</span>
<span id="cb110-31"><a href="데이터-전처리.html#cb110-31" tabindex="-1"></a>         <span class="at">arr_time =</span> arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>),</span>
<span id="cb110-32"><a href="데이터-전처리.html#cb110-32" tabindex="-1"></a>         <span class="at">sched_arr_time =</span> sched_arr_time <span class="sc">+</span> <span class="fu">days</span>(overnight <span class="sc">*</span> <span class="dv">1</span>))</span>
<span id="cb110-33"><a href="데이터-전처리.html#cb110-33" tabindex="-1"></a></span>
<span id="cb110-34"><a href="데이터-전처리.html#cb110-34" tabindex="-1"></a>flights_dt <span class="sc">%&gt;%</span> </span>
<span id="cb110-35"><a href="데이터-전처리.html#cb110-35" tabindex="-1"></a>  <span class="fu">filter</span>(overnight, arr_time <span class="sc">&lt;</span> dep_time)</span></code></pre></div>
</div>
<div id="interval-object" class="section level4 hasAnchor" number="6.5.4.4">
<h4><span class="header-section-number">6.5.4.4</span> interval object<a href="데이터-전처리.html#interval-object" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>interval object는 시작 시점과 종료 시점을 나타내므로, 정확한 시간 범위를 확인할 수 있음</li>
<li>interval object 생성 - <code>ineterval()</code> 함수, <code>%--%</code> 연산자</li>
<li>정수 나눗셈을 이용하여 interval object의 기간을 확인할 수 있음</li>
</ul>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="데이터-전처리.html#cb111-1" tabindex="-1"></a><span class="do">## interval object 생성</span></span>
<span id="cb111-2"><a href="데이터-전처리.html#cb111-2" tabindex="-1"></a>next_year <span class="ot">&lt;-</span> <span class="fu">today</span>() <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>)</span>
<span id="cb111-3"><a href="데이터-전처리.html#cb111-3" tabindex="-1"></a><span class="fu">interval</span>(<span class="at">start =</span> <span class="fu">today</span>(), <span class="at">end =</span> next_year)    <span class="co"># today() %--% next_year</span></span>
<span id="cb111-4"><a href="데이터-전처리.html#cb111-4" tabindex="-1"></a></span>
<span id="cb111-5"><a href="데이터-전처리.html#cb111-5" tabindex="-1"></a><span class="co"># interval object 기간 확인</span></span>
<span id="cb111-6"><a href="데이터-전처리.html#cb111-6" tabindex="-1"></a>(<span class="fu">today</span>() <span class="sc">%--%</span> next_year) <span class="sc">/</span> <span class="fu">ddays</span>(<span class="dv">1</span>)</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyverse-통합-패키지.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="데이터-시각화.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
